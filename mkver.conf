tagPrefix: v
defaults {
  tag: false
  tagMessageFormat: "release {Tag}"
  preReleaseFormat: "RC{PreReleaseNumber}"
  buildMetaDataFormat: "helm"
  includeBuildMetaData: true
  whenNoValidCommitMessages: IncrementMinor
  patches: [
    HelmChart
  ]
  formats: [
    {
      name: Docker
      format: "{Version}"
    }
    {
      name: DockerBranch
      format: "{Version}.{Branch}.{ShortHash}"
    }
  ]
}
branches: [
  {
    pattern: "master"
    tag: true
    includeBuildMetaData: true
  }
  {
    pattern: ".*"
    tag: false
    formats: [
      {
        name: Docker
        format: "{DockerBranch}"
      }
    ]
  }
]
patches: [
  {
    name: HelmChart
    filePatterns: [
      "Chart.yaml"
    ]
    replacements: [
      {
        find: "appVersion: {VersionRegex}"
        replace: "appVersion: \"{Version}\""
      }
      {
        find: "version: {VersionRegex}"
        replace: "version: \"{Version}\""
      }
      {
        find: "    version: {VersionRegex}"
        replace: "    version: \"{Version}\""
      }
    ]
  }
]
# commitMessageActions configure how different commit messages will increment
# the version number
commitMessageActions: [
  {
    # pattern is a regular expression to occur in a single line
    pattern: "BREAKING CHANGE"
    # action is one of:
    # * Fail - application will exit
    # * IncrementMajor - bump the major version
    # * IncrementMinor - bump the minor version
    # * IncrementPatch - bump the patch version
    # * NoIncrement - no version change will occur
    action: IncrementMajor
  }
  {
    pattern: "major(\\(.+\\))?:"
    action: IncrementMajor
  }
]