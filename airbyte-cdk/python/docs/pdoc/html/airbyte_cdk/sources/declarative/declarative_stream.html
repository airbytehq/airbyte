<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>airbyte_cdk.sources.declarative.declarative_stream API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>airbyte_cdk.sources.declarative.declarative_stream</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#
# Copyright (c) 2022 Airbyte, Inc., all rights reserved.
#


from typing import Any, Iterable, List, Mapping, MutableMapping, Optional, Union

from airbyte_cdk.models import SyncMode
from airbyte_cdk.sources.declarative.retrievers.retriever import Retriever
from airbyte_cdk.sources.declarative.schema.schema_loader import SchemaLoader
from airbyte_cdk.sources.streams.core import Stream


class DeclarativeStream(Stream):
    &#34;&#34;&#34;
    DeclarativeStream is a Stream that delegates most of its logic to its schema_load and retriever
    &#34;&#34;&#34;

    def __init__(
        self,
        name: str,
        primary_key,
        schema_loader: SchemaLoader,
        retriever: Retriever,
        cursor_field: Optional[List[str]] = None,
        checkpoint_interval: Optional[int] = None,
    ):
        self._name = name
        self._primary_key = primary_key
        self._cursor_field = cursor_field or []
        self._schema_loader = schema_loader
        self._retriever = retriever
        self._checkpoint_interval = checkpoint_interval

    @property
    def primary_key(self) -&gt; Optional[Union[str, List[str], List[List[str]]]]:
        return self._primary_key

    @property
    def name(self) -&gt; str:
        &#34;&#34;&#34;
        :return: Stream name. By default this is the implementing class name, but it can be overridden as needed.
        &#34;&#34;&#34;
        return self._name

    @property
    def state_checkpoint_interval(self) -&gt; Optional[int]:
        &#34;&#34;&#34;
        Decides how often to checkpoint state (i.e: emit a STATE message). E.g: if this returns a value of 100, then state is persisted after reading
        100 records, then 200, 300, etc.. A good default value is 1000 although your mileage may vary depending on the underlying data source.

        Checkpointing a stream avoids re-reading records in the case a sync is failed or cancelled.

        return None if state should not be checkpointed e.g: because records returned from the underlying data source are not returned in
        ascending order with respect to the cursor field. This can happen if the source does not support reading records in ascending order of
        created_at date (or whatever the cursor is). In those cases, state must only be saved once the full stream has been read.
        &#34;&#34;&#34;
        return self._checkpoint_interval

    @property
    def state(self) -&gt; MutableMapping[str, Any]:
        return self._retriever.state

    @state.setter
    def state(self, value: MutableMapping[str, Any]):
        &#34;&#34;&#34;State setter, accept state serialized by state getter.&#34;&#34;&#34;
        self._retriever.state = value

    def get_updated_state(self, current_stream_state: MutableMapping[str, Any], latest_record: Mapping[str, Any]):
        return self.state

    @property
    def cursor_field(self) -&gt; Union[str, List[str]]:
        &#34;&#34;&#34;
        Override to return the default cursor field used by this stream e.g: an API entity might always use created_at as the cursor field.
        :return: The name of the field used as a cursor. If the cursor is nested, return an array consisting of the path to the cursor.
        &#34;&#34;&#34;
        return self._cursor_field

    def read_records(
        self,
        sync_mode: SyncMode,
        cursor_field: List[str] = None,
        stream_slice: Mapping[str, Any] = None,
        stream_state: Mapping[str, Any] = None,
    ) -&gt; Iterable[Mapping[str, Any]]:
        return self._retriever.read_records(sync_mode, cursor_field, stream_slice, stream_state)

    def get_json_schema(self) -&gt; Mapping[str, Any]:
        &#34;&#34;&#34;
        :return: A dict of the JSON schema representing this stream.

        The default implementation of this method looks for a JSONSchema file with the same name as this stream&#39;s &#34;name&#34; property.
        Override as needed.
        &#34;&#34;&#34;
        # TODO show an example of using pydantic to define the JSON schema, or reading an OpenAPI spec
        return self._schema_loader.get_json_schema()

    def stream_slices(
        self, *, sync_mode: SyncMode, cursor_field: List[str] = None, stream_state: Mapping[str, Any] = None
    ) -&gt; Iterable[Optional[Mapping[str, Any]]]:
        &#34;&#34;&#34;
        Override to define the slices for this stream. See the stream slicing section of the docs for more information.

        :param sync_mode:
        :param cursor_field:
        :param stream_state:
        :return:
        &#34;&#34;&#34;
        # this is not passing the cursor field because it is known at init time
        return self._retriever.stream_slices(sync_mode=sync_mode, stream_state=stream_state)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream"><code class="flex name class">
<span>class <span class="ident">DeclarativeStream</span></span>
<span>(</span><span>name: str, primary_key, schema_loader: <a title="airbyte_cdk.sources.declarative.schema.schema_loader.SchemaLoader" href="schema/schema_loader.html#airbyte_cdk.sources.declarative.schema.schema_loader.SchemaLoader">SchemaLoader</a>, retriever: <a title="airbyte_cdk.sources.declarative.retrievers.retriever.Retriever" href="retrievers/retriever.html#airbyte_cdk.sources.declarative.retrievers.retriever.Retriever">Retriever</a>, cursor_field: Optional[List[str]] = None, checkpoint_interval: Optional[int] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>DeclarativeStream is a Stream that delegates most of its logic to its schema_load and retriever</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DeclarativeStream(Stream):
    &#34;&#34;&#34;
    DeclarativeStream is a Stream that delegates most of its logic to its schema_load and retriever
    &#34;&#34;&#34;

    def __init__(
        self,
        name: str,
        primary_key,
        schema_loader: SchemaLoader,
        retriever: Retriever,
        cursor_field: Optional[List[str]] = None,
        checkpoint_interval: Optional[int] = None,
    ):
        self._name = name
        self._primary_key = primary_key
        self._cursor_field = cursor_field or []
        self._schema_loader = schema_loader
        self._retriever = retriever
        self._checkpoint_interval = checkpoint_interval

    @property
    def primary_key(self) -&gt; Optional[Union[str, List[str], List[List[str]]]]:
        return self._primary_key

    @property
    def name(self) -&gt; str:
        &#34;&#34;&#34;
        :return: Stream name. By default this is the implementing class name, but it can be overridden as needed.
        &#34;&#34;&#34;
        return self._name

    @property
    def state_checkpoint_interval(self) -&gt; Optional[int]:
        &#34;&#34;&#34;
        Decides how often to checkpoint state (i.e: emit a STATE message). E.g: if this returns a value of 100, then state is persisted after reading
        100 records, then 200, 300, etc.. A good default value is 1000 although your mileage may vary depending on the underlying data source.

        Checkpointing a stream avoids re-reading records in the case a sync is failed or cancelled.

        return None if state should not be checkpointed e.g: because records returned from the underlying data source are not returned in
        ascending order with respect to the cursor field. This can happen if the source does not support reading records in ascending order of
        created_at date (or whatever the cursor is). In those cases, state must only be saved once the full stream has been read.
        &#34;&#34;&#34;
        return self._checkpoint_interval

    @property
    def state(self) -&gt; MutableMapping[str, Any]:
        return self._retriever.state

    @state.setter
    def state(self, value: MutableMapping[str, Any]):
        &#34;&#34;&#34;State setter, accept state serialized by state getter.&#34;&#34;&#34;
        self._retriever.state = value

    def get_updated_state(self, current_stream_state: MutableMapping[str, Any], latest_record: Mapping[str, Any]):
        return self.state

    @property
    def cursor_field(self) -&gt; Union[str, List[str]]:
        &#34;&#34;&#34;
        Override to return the default cursor field used by this stream e.g: an API entity might always use created_at as the cursor field.
        :return: The name of the field used as a cursor. If the cursor is nested, return an array consisting of the path to the cursor.
        &#34;&#34;&#34;
        return self._cursor_field

    def read_records(
        self,
        sync_mode: SyncMode,
        cursor_field: List[str] = None,
        stream_slice: Mapping[str, Any] = None,
        stream_state: Mapping[str, Any] = None,
    ) -&gt; Iterable[Mapping[str, Any]]:
        return self._retriever.read_records(sync_mode, cursor_field, stream_slice, stream_state)

    def get_json_schema(self) -&gt; Mapping[str, Any]:
        &#34;&#34;&#34;
        :return: A dict of the JSON schema representing this stream.

        The default implementation of this method looks for a JSONSchema file with the same name as this stream&#39;s &#34;name&#34; property.
        Override as needed.
        &#34;&#34;&#34;
        # TODO show an example of using pydantic to define the JSON schema, or reading an OpenAPI spec
        return self._schema_loader.get_json_schema()

    def stream_slices(
        self, *, sync_mode: SyncMode, cursor_field: List[str] = None, stream_state: Mapping[str, Any] = None
    ) -&gt; Iterable[Optional[Mapping[str, Any]]]:
        &#34;&#34;&#34;
        Override to define the slices for this stream. See the stream slicing section of the docs for more information.

        :param sync_mode:
        :param cursor_field:
        :param stream_state:
        :return:
        &#34;&#34;&#34;
        # this is not passing the cursor field because it is known at init time
        return self._retriever.stream_slices(sync_mode=sync_mode, stream_state=stream_state)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="airbyte_cdk.sources.streams.core.Stream" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream">Stream</a></li>
<li>abc.ABC</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream.transformer"><code class="name">var <span class="ident">transformer</span> : <a title="airbyte_cdk.sources.utils.transform.TypeTransformer" href="../utils/transform.html#airbyte_cdk.sources.utils.transform.TypeTransformer">TypeTransformer</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream.state"><code class="name">var <span class="ident">state</span> : MutableMapping[str, Any]</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def state(self) -&gt; MutableMapping[str, Any]:
    return self._retriever.state</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="airbyte_cdk.sources.streams.core.Stream" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream">Stream</a></b></code>:
<ul class="hlist">
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.cursor_field" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.cursor_field">cursor_field</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.get_error_display_message" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.get_error_display_message">get_error_display_message</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.get_json_schema" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.get_json_schema">get_json_schema</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.get_updated_state" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.get_updated_state">get_updated_state</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.name" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.name">name</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.namespace" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.namespace">namespace</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.primary_key" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.primary_key">primary_key</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.read_records" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.read_records">read_records</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.source_defined_cursor" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.source_defined_cursor">source_defined_cursor</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.state_checkpoint_interval" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.state_checkpoint_interval">state_checkpoint_interval</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.stream_slices" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.stream_slices">stream_slices</a></code></li>
<li><code><a title="airbyte_cdk.sources.streams.core.Stream.supports_incremental" href="../streams/core.html#airbyte_cdk.sources.streams.core.Stream.supports_incremental">supports_incremental</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="airbyte_cdk.sources.declarative" href="index.html">airbyte_cdk.sources.declarative</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream" href="#airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream">DeclarativeStream</a></code></h4>
<ul class="">
<li><code><a title="airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream.state" href="#airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream.state">state</a></code></li>
<li><code><a title="airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream.transformer" href="#airbyte_cdk.sources.declarative.declarative_stream.DeclarativeStream.transformer">transformer</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>