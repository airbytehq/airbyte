# Transformations with Airbyte \(Part 3/3\)

## Overview

This tutorial will describe how to push a custom dbt transformation project back to Airbyte to use during syncs.

This tutorial is the last part of the tutorial series on transformations after [Transformations with dbt](transformations-with-sql.md) and 
[connecting EL with T using DBT](transformations-with-dbt.md).

(Example outputs are updated with Airbyte version 0.23.0-alpha from May 2021)

## Transformations with Airbyte

After replication of data from a source connector (Extract) to a destination connector (Load), multiple optional transformation steps can now be applied as part of an Airbyte Sync. Possible workflows are:

1. Basic normalization transformations as automatically generated by Airbyte dbt code generator.
2. Customized normalization transformations as edited by the user (the default generated normalization one should therefore be disabled)
3. Customized business transformations as specified by the user.

## Public Git repository
In the connection settings page, I can add new Transformations steps to apply after [normalization](../../understanding-airbyte/basic-normalization.md). For example, I want to run my custom dbt project [jaffle_shop](https://github.com/fishtown-analytics/jaffle_shop), whenever my sync is done replicating and normalizing my data.

![](../../.gitbook/assets/custom-dbt-transformations-seed.png)

![](../../.gitbook/assets/custom-dbt-transformations.png)


## Private Git repository
Now, let's connect my mono-repo Business Intelligence project stored in a private git repository to update the related tables and dashboards when my Airbyte syncs complete.

Note that if you need to connect to a private git repository, the recommended way to do so is to generate a `Personal Access Token` that can be used instead of a password. Then, you'll be able to include the credentials in the git repository url:

- [GitHub - Personal Access Tokens](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token)
- [Gitlab - Personal Access Tokens](https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html)

And then use it for cloning:

    git clone https://username:token@github.com/user/repo

Where `https://username:token@github.com/user/repo` is the git repository url.

### Example of a private git repo used as transformations

As an example, I go through my GitHub account to generate a Personal Access Token to use in Airbyte with permissions to clone my private repositories:

![](../../.gitbook/assets/new-personal-token.png)

This provides me with a token to use:

![](../../.gitbook/assets/copy-personal-token.png)

In Airbyte, I can use the git url as: `https://airbyteuser:ghp_***********ShLrG2yXGYF@github.com/airbyteuser/private-datawarehouse.git`

![](../../.gitbook/assets/setup-custom-transformation.png)

### Refresh models partially

Since I am using a mono-repo from my organization, other team members or departments may also contribute their dbt models to this centralized location. This will give us many dbt models and sources to build our complete data warehouse...

The whole warehouse is scheduled for full refresh on a different orchestration tool, or as part of the git repository CI. However, here, I want to partially refresh some small relevant tables when attaching this operation to a specific Airbyte sync, in this case, the Covid dataset.

Therefore, I can restrict the execution of models to a particular tag or folder by specifying in the dbt cli arguments, in this case whatever is related to "covid_api":

    run --models tag:covid_api opendata.base.*

Now, when replications syncs are triggered by Airbyte, my custom transformations from my private git repository are also run at the end!
