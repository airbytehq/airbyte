-- extensions
 CREATE
    EXTENSION IF NOT EXISTS "uuid-ossp";

-- tables
 CREATE
    TABLE
        IF NOT EXISTS AIRBYTE_CONFIGS(
            id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
            config_id VARCHAR(36) NOT NULL DEFAULT uuid_generate_v4(),
            config_type VARCHAR(60) NOT NULL,
            config_blob JSONB NOT NULL,
            created_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
            updated_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP
        );

-- indices
 CREATE
    UNIQUE INDEX IF NOT EXISTS airbyte_configs_idx ON
    AIRBYTE_CONFIGS(
        config_type,
        config_id
    );
