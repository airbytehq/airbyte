import groovy.io.FileType

rootProject.name = 'dataline'

include 'dataline-api'
include 'dataline-commons'
include ':dataline-config:models'
include ':dataline-config:init'
include ':dataline-config:persistence'
include 'dataline-db'
include 'dataline-integrations'
include 'dataline-scheduler'
include 'dataline-server'
include 'dataline-webapp'
include 'dataline-workers'
include 'dataline-tests'

// include all integration subprojects
def prefix = rootProject.projectDir.absolutePath
def dir = new File(prefix + "/dataline-integrations")
dir.eachFileRecurse(FileType.FILES) { file ->
  if (file.absolutePath.endsWith("build.gradle") && file.length() != 0) {
    def subproject = file.absolutePath.substring(prefix.length() + "/dataline-integrations/".length())
    subproject = subproject.substring(0, subproject.length() - "/build.gradle".length())
    subproject = ":dataline-integrations:" + subproject.split("/").join(":")
    include subproject
  }
}
