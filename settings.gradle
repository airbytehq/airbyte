// Configure the gradle enterprise plugin to enable build scans. Enabling the plugin at the top of the settings file allows the build scan to record
// as much information as possible.
plugins {
    id "com.gradle.enterprise" version "3.4.1"
}

gradleEnterprise {
    buildScan {
        termsOfServiceUrl = "https://gradle.com/terms-of-service"
        termsOfServiceAgree = "yes"
    }
}

import groovy.io.FileType

rootProject.name = 'airbyte'

include ':airbyte-analytics'
include ':airbyte-api'
include ':airbyte-commons'
include ':airbyte-config:models'
include ':airbyte-config:init'
include ':airbyte-config:persistence'
include ':airbyte-db'
include ':airbyte-integrations'
include ':airbyte-json-validation'
include ':airbyte-protocol:models'
include ':airbyte-queue'
include ':airbyte-scheduler'
include ':airbyte-server'
include ':airbyte-webapp'
include ':airbyte-workers'
include ':airbyte-tests'
include ':airbyte-test-utils'

// include all integration subprojects
def integrationsPath = rootDir.toPath().resolve('airbyte-integrations')
integrationsPath.eachFileRecurse(FileType.FILES) { path ->
    def relativePath = integrationsPath.relativize(path)
    if (path.endsWith('build.gradle') && !path.contains("build") && relativePath.getNameCount() > 1) {
        include ":airbyte-integrations:${relativePath.parent.join(':')}"
    }
}

