task prepareBuild(type: Copy) {
    into layout.buildDirectory.dir("docker")
}

tasks.named("buildDockerImage") {
    dependsOn prepareBuild
    dependsOn copyDocker
}

task bashTest(type: Exec) {
    dependsOn buildDockerImage
    commandLine "./test.sh"
}

// we can't override the 'test' command, so we can make our bash test a dependency
test.dependsOn(project.tasks.bashTest)
