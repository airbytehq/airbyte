name: Publish Connector ERD
inputs:
  connector_directory_name:
    description: connector_directory_name
    required: true
  dbdocs_token:
    description: API token
    required: true
description: Publish connector ERD
runs:
  using: "composite"
  steps:
    - name: Install Java
      uses: actions/setup-java@v1
      with:
        java-version: "17"
    - uses: actions/setup-node@v1
      with:
        node-version: "16.13.0"
    - name: Install dbdocs
      shell: bash
      run: npm install -g dbdocs
    - name: Check dbdocs
      shell: bash
      run: dbdocs
    - name: Publish ERD
      shell: bash
      run: DBDOCS_TOKEN=${{ inputs.dbdocs_token }} ./tools/erds/publish.sh ${{ inputs.connector_directory_name }}
