name: Connector QA Checks

on:
  pull_request:
    types: [opened, synchronize, reopened]
    # paths:
    #   - "airbyte-integrations/connectors/**/*"

jobs:
  generate-matrix:
    name: Generate Connectors Matrix
    if: github.event.pull_request.draft == false
    runs-on: ubuntu-24.04
    steps:
      - name: Checkout Current Branch
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Generate Connectors Matrix from Changes
        id: generate-matrix
        run: |
          # Get the list of modified connectors
          echo "connectors_matrix=$(./poe-tasks/get-modified-connectors.sh --json)" | tee -a $GITHUB_OUTPUT
    outputs:
      connectors-matrix: ${{ steps.generate-matrix.outputs.connectors_matrix }}
