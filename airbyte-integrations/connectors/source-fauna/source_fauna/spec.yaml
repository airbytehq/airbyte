documentationUrl: https://github.com/fauna/airbyte/blob/source-fauna/docs/integrations/sources/fauna.md
connectionSpecification:
  $schema: http://json-schema.org/draft-07/schema#
  title: Fauna Spec
  type: object
  required:
    - domain
    - port
    - scheme
    - secret
  additionalProperties: true
  properties:
    domain:
      order: 0
      type: string
      title: Domain
      description: >-
        Domain of Fauna to query. Defaults db.fauna.com.
        See <a href=https://docs.fauna.com/fauna/current/learn/understanding/region_groups#how-to-use-region-groups>the docs</a>.
      default: "db.fauna.com"
    port:
      order: 1
      type: integer
      title: Port
      description: Endpoint port.
      default: 443
    scheme:
      order: 2
      type: string
      title: Scheme
      description: URL scheme.
      default: "https"
    secret:
      order: 3
      type: string
      title: Fauna Secret
      description: Fauna secret, used when authenticating with the database.
      airbyte_secret: true
    collection:
      order: 5
      type: object
      title: Collection
      description: Settings for the Fauna Collection.
      required:
        - name
        - data_column
        - page_size
        - deletions
      properties:
        name:
          order: 0
          type: string
          title: Collection Name
          description: The name of the collection this connector should read from.
        index:
          title: Incremental Sync Index
          type: string
          order: 1
          description: >-
            This is required for incremental syncs. Leave blank for full syncs.
        data_column:
          order: 2
          type: boolean
          title: Data Column
          default: true
          description: >-
            If enabled, then a column named "data" is added to the destination database.
            This column contains the entire <code>data</code> object from each Fauna
            document.<br>
        additional_columns:
          order: 3
          type: array
          title: Additional Columns
          description: >-
            These fields are added as columns in the destination database.<br>

            This can be used in addition to, or in place of, the data column if you
            would like to map certain document fields into columns, e.g.
            <code>["data", "customer", "address"]</code> or <code>["ttl"]</code>.<br>
          items:
            type: object
            required:
              - name
              - path
              - type
              - required
            properties:
              name:
                order: 0
                type: string
                title: Column Name
                description: The name of this column in the destination.
              path:
                order: 1
                type: array
                title: Path
                description: >-
                  The path of this value within each Fauna document. Path evaluation starts at the top
                  of each document. To specify one of the document's <code>data</code> fields, start the
                  path with <code>data</code>. For example: <code>["data", "address", "zip_code"]</code>.
                  To specify a top-level field such as <code>ttl</code>, enter the path <code>["ttl"]</code>.<br>

                  Numerical values cannot be entered. It is not possible to index into an
                  array using this path.<br>

                  This path is the same as a <a href="https://docs.fauna.com/fauna/current/api/fql/functions/select"><code>Select</code> call</a>.
                items:
                  type: string
              type:
                order: 2
                type: string
                title: Type
                description: >-
                  The Airbyte record type for this field value from the Fauna document. <code>Type<code>
                  specifies the encoding of the value separate from the type of value specified
                  by <code>Format<code>.

                  For example, `2022-08-05T12:34:56+00:00` is a value whose `Type` is
                  "string" and its `Format` is "date-time".

                  See <a href=https://docs.airbyte.com/understanding-airbyte/supported-data-types/#specific-types>the Airbyte docs</a>.
              format:
                order: 3
                type: string
                title: Format
                description: >-
                  The format of this field value from the Fauna document. <code>Format</code>
                  specifies the type of value separate from the encoding of the value specified
                  by <code>Type</code>.

                  For example, <code>2022-08-05T12:34:56+00:00</code> is a value whose <code>Type</code>
                  is "string" and its <code>Format</code> is "date-time".

                  See <a href=https://docs.airbyte.com/understanding-airbyte/supported-data-types/#specific-types>the Airbyte docs</a>.
              airbyte_type:
                order: 4
                type: string
                title: Airbyte Type
                description: >-
                  The Airbyte record type used to store the field value in the destination database.

                  For example, <code>2022-08-05T12:34:56+00:00</code> is a value whose <code>Type</code>
                  is "string" and its <code>Format</code> is "date-time". The most appropriate Airbyte record
                  type would be "Date".

                  See <a href=https://docs.airbyte.com/understanding-airbyte/supported-data-types/#specific-types>the Airbyte docs</a>.
              required:
                order: 5
                type: boolean
                title: Required
                default: true
                description: >-
                  If true, this value is required to exist within each Fauna document. If the path
                  doesn't exist in a document the sync fails.
                  If false, then non-existent field values store <code>null</code>.
        page_size:
          order: 4
          type: integer
          title: Page Size
          default: 64
          description: >-
            The page size used when reading documents from the database. The larger the
            page size, the faster the connector processes documents. However, if a
            page is too large, the connector may fail.
            <br>

            Choose your page size based on how large the documents are.
            <br>

            See <a href="https://docs.fauna.com/fauna/current/learn/understanding/types#page">the docs</a>.
        deletions:
          order: 5
          type: object
          title: Deletion Mode
          description: >-
            <b>This only applies to incremental syncs.</b>
            <br>

            Enabling deletion mode informs your destination of deleted documents.<br>

            Disabled - Leave this feature disabled, and ignore deleted documents.<br>

            Enabled - Enables this feature. When a document is deleted, the connector
            exports a record with a "deleted at" column containing the time that the
            document was deleted.
          oneOf:
            - title: Disabled
              type: object
              order: 0
              required:
                - deletion_mode
              properties:
                deletion_mode:
                  type: string
                  const: ignore
            - title: Enabled
              type: object
              order: 1
              required:
                - deletion_mode
                - column
              properties:
                deletion_mode:
                  type: string
                  const: deleted_field
                column:
                  type: string
                  title: Deleted At Column
                  description: Name of the "deleted at" column.
                  default: "deleted_at"
