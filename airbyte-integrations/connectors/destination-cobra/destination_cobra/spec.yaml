documentationUrl: https://docs.airbyte.com/integrations/enterprise-connectors/destination-salesforce
supported_destination_sync_modes:
  - append
connectionSpecification:
  $schema: http://json-schema.org/draft-07/schema#
  title: Salesforce Destination Spec
  type: object
  required:
    - client_id
    - client_secret
    - refresh_token
    - stream_mappings
    - stream_order
    - print_record_content_on_error
    - is_sandbox
  additionalProperties: true
  properties:
    client_id:
      title: Client ID
      description: Enter your Salesforce developer application's <a
        href="https://developer.salesforce.com/forums/?id=9062I000000DLgbQAG">Client ID</a>
      type: string
      order: 1
    auth_type:
      type: string
      const: Client
    client_secret:
      title: Client Secret
      description: Enter your Salesforce developer application's <a
        href="https://developer.salesforce.com/forums/?id=9062I000000DLgbQAG">Client secret</a>
      type: string
      airbyte_secret: true
      order: 2
    refresh_token:
      title: Refresh Token
      description: >-
        Enter your application's <a
        href="https://developer.salesforce.com/docs/atlas.en-us.mobile_sdk.meta/mobile_sdk/oauth_refresh_token_flow.htm">Salesforce Refresh Token</a> used for Airbyte to access your Salesforce account.
      type: string
      airbyte_secret: true
      order: 3
    stream_mappings:
      title: Stream Mapping to Salesforce
      type: array
      items:
        type: object
        title: Stream Mapping
        description: "Describes the relationship between a source stream and a destination table and how to update the information."
        # TODO should we support namespace at some point?
        required:
          - source_stream
          - destination_table
          - update_mode
        properties:
          source_stream:
            title: Source stream
            description: "The name for the input stream."
            type: string
          destination_table:
            title: Destination table
            description: "The name for the table to update the data in the destination."
            type: string
          update_mode:
            title: Update mode
            description: "How to update the data in the destination."
            type: string
            enum:
              - INSERT
              - UPDATE
              - UPSERT
              - DELETE
          upsert_key:
            title: Upsert key
            description: "Given the operation is an upsert, a field representing an external ID needs to be provided"
            type: string
      default: []
      order: 4
    stream_order:
      title: Stream Sync Order
      description: >-
        The order in which the streams should be synced. Streams are synced in the order they are listed. Only those streams will be synced so make sure all the input streams are configured here.
      type: array
      items:
        type: string
      default: []
      order: 5
    print_record_content_on_error:
      title: Include Record Contents in Error Logs
      description: If enabled, the records content will be printed as part of the log in case of failure which allows for easier debugging.
      type: boolean
      default: false
      order: 6
    is_sandbox:
      title: Sync to Salesforce Sandbox
      description: >-
        Toggle if you're using a <a
        href="https://help.salesforce.com/s/articleView?id=sf.deploy_sandboxes_parent.htm&type=5">Salesforce Sandbox</a>
      type: boolean
      default: false
      order: 7
advanced_auth:
  auth_flow_type: oauth2.0
  predicate_key:
    - auth_type
  predicate_value: Client
  oauth_config_specification:
    oauth_user_input_from_connector_config_specification:
      type: object
      additionalProperties: false
      properties:
        is_sandbox:
          type: boolean
          path_in_connector_config:
            - is_sandbox
    complete_oauth_output_specification:
      type: object
      additionalProperties: false
      properties:
        refresh_token:
          type: string
          path_in_connector_config:
            - refresh_token
    complete_oauth_server_input_specification:
      type: object
      additionalProperties: false
      properties:
        client_id:
          type: string
        client_secret:
          type: string
    complete_oauth_server_output_specification:
      type: object
      additionalProperties: false
      properties:
        client_id:
          type: string
          path_in_connector_config:
            - client_id
        client_secret:
          type: string
          path_in_connector_config:
            - client_secret
