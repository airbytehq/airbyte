version: "0.29.0"

definitions:
  selector:
    type: RecordSelector
    extractor:
      type: DpathExtractor
      field_path: ["{{ parameters.path_extractor }}"]
  requester:
    type: HttpRequester
    url_base: "https://{{config['domain_name']}}/api/v2/"
    http_method: "GET"
    authenticator:
      type: "BasicHttpAuthenticator"
      username: "{{config['api_key']}}"
      password: ""
    error_handler:
      response_filters:
        - http_codes: [403]
          action: IGNORE
  retriever:
    type: SimpleRetriever
    record_selector:
      $ref: "#/definitions/selector"
    paginator:
      type: "DefaultPaginator"
      pagination_strategy:
        type: "PageIncrement"
        page_size: 30
        start_from_page: 1
      page_token_option:
        type: "RequestOption"
        inject_into: "request_parameter"
        field_name: "page"
    requester:
      $ref: "#/definitions/requester"

  incremental_base:
    type: DatetimeBasedCursor
    cursor_field: "updated_at"
    datetime_format: "%Y-%m-%dT%H:%M:%SZ"
    start_datetime:
      datetime: "{{ config['start_date'] }}"
      datetime_format: "%Y-%m-%dT%H:%M:%SZ"
    start_time_option:
      field_name: "updated_since"
      inject_into: "request_parameter"

  base_stream:
    type: DeclarativeStream
    retriever:
      $ref: "#/definitions/retriever"

  tickets_stream:
    $ref: "#/definitions/base_stream"
    name: "tickets"
    primary_key: "id"
    incremental_sync:
      $ref: "#/definitions/incremental_base"
    $parameters:
      path_extractor: "tickets"
      path: "/tickets"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          attachments:
            description: Attachments related to the ticket.
            type:
              - "null"
              - array
          cc_emails:
            description: Email addresses cc'd on the ticket.
            type:
              - "null"
              - array
          department_id:
            description: ID of the department handling the ticket.
            type:
              - "null"
              - integer
          custom_fields:
            description: Custom fields associated with the ticket.
            type:
              - "null"
              - object
          deleted:
            description: Indicates if the ticket is deleted.
            type:
              - "null"
              - boolean
          description:
            description: Description of the ticket.
            type:
              - "null"
              - string
          description_text:
            description: Textual description of the ticket.
            type:
              - "null"
              - string
          due_by:
            description: Date by which the ticket needs to be resolved.
            type:
              - "null"
              - string
          email:
            description: Email address associated with the ticket.
            type:
              - "null"
              - string
          email_config_id:
            description: Configuration ID of the email associated with the ticket.
            type:
              - "null"
              - integer
          fr_due_by:
            description: First response due by date for the ticket.
            type:
              - "null"
              - string
          fr_escalated:
            description: Indicates if the ticket has been first response escalated.
            type:
              - "null"
              - boolean
          fwd_emails:
            description: Email addresses to which the ticket has been forwarded.
            type:
              - "null"
              - array
          group_id:
            description: ID of the group the ticket is assigned to.
            type:
              - "null"
              - integer
          id:
            description: Unique identifier of the ticket.
            type: integer
          is_escalated:
            description: Indicates if the ticket has been escalated.
            type:
              - "null"
              - boolean
          name:
            description: Name associated with the ticket.
            type:
              - "null"
              - string
          phone:
            description: Phone number associated with the ticket.
            type:
              - "null"
              - string
          priority:
            description: Priority level of the ticket.
            type:
              - "null"
              - integer
          category:
            description: Category of the ticket.
            type:
              - "null"
              - string
          sub_category:
            description: Sub-category of the ticket.
            type:
              - "null"
              - string
          item_category:
            description: Category of the item related to the ticket.
            type:
              - "null"
              - string
          reply_cc_emails:
            description: Email addresses cc'd on replies to the ticket.
            type:
              - "null"
              - array
          requester_id:
            description: ID of the person who requested the ticket.
            type:
              - "null"
              - integer
          responder_id:
            description: ID of the responder handling the ticket.
            type:
              - "null"
              - integer
          source:
            description: Source of the ticket creation.
            type:
              - "null"
              - integer
          spam:
            description: Indicates if the ticket is considered as spam.
            type:
              - "null"
              - boolean
          status:
            description: Current status of the ticket.
            type:
              - "null"
              - integer
          subject:
            description: Subject of the ticket.
            type:
              - "null"
              - string
          tags:
            description: Tags associated with the ticket.
            type:
              - "null"
              - array
          to_emails:
            description: Email addresses the ticket was sent to.
            type:
              - "null"
              - array
          type:
            description: Type of the ticket.
            type:
              - "null"
              - string
          created_at:
            description: Date and time when the ticket was created.
            type:
              - "null"
              - string
          updated_at:
            description: Date and time when the ticket was last updated.
            type:
              - "null"
              - string
          urgency:
            description: Urgency level of the ticket.
            type:
              - "null"
              - integer
          impact:
            description: Impact level of the ticket.
            type:
              - "null"
              - integer
          workspace_id:
            description: ID of the workspace associated with the ticket.
            type:
              - "null"
              - integer
          requested_for_id:
            description: ID of the person for whom the ticket was requested.
            type:
              - "null"
              - integer
  satisfaction_survey_responses_stream:
    name: "satisfaction_survey_responses"
    primary_key: "id"
    $parameters:
      path_extractor: "csat_response"
    retriever:
      $ref: "#/definitions/retriever"
      requester:
        $ref: "#/definitions/requester"
        path: "tickets/{{ stream_slice.parent_id }}/csat_response"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
          - stream: "#/definitions/tickets_stream"
            parent_key: "id"
            partition_field: "parent_id"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: The unique identifier for the survey response.
            type:
              - "null"
              - integer
          overall_rating:
            description: The overall numeric rating given by the respondent.
            type:
              - "null"
              - integer
          overall_rating_text:
            description: The text representation of the overall rating.
            type:
              - "null"
              - string
          primary_question:
            description: The main question being asked in the survey.
            type:
              - "null"
              - string
          questionnaire_responses:
            description: List of questionnaire responses provided by users
            type:
              - "null"
              - object
            items:
              type:
                - "null"
                - object
              additionalProperties: true
              properties:
                question:
                  description: Details of the question asked in the survey
                  type:
                    - "null"
                    - object
                  additionalProperties: true
                  properties:
                    question_text:
                      description: The text of the question being answered.
                      type:
                        - "null"
                        - string
                answers:
                  description: List of answers provided by users for the questions
                  type:
                    - "null"
                    - array
                  items:
                    - type:
                        - "null"
                        - object
                      additionalProperties: true
                      properties:
                        answer_text:
                          type:
                            - "null"
                            - string
          created_at:
            description: The timestamp when the survey response was created.
            type:
              - "null"
              - string
          updated_at:
            description: The timestamp when the survey response was last updated.
            type:
              - "null"
              - string
  requested_items_stream:
    name: "requested_items"
    primary_key: "id"
    $parameters:
      path_extractor: "requested_items"
    retriever:
      $ref: "#/definitions/retriever"
      requester:
        $ref: "#/definitions/requester"
        path: "tickets/{{ stream_slice.parent_id }}/requested_items"
        error_handler:
          type: CompositeErrorHandler
          error_handlers:
            - type: DefaultErrorHandler
              response_filters:
                - http_codes: [404]
                  action: IGNORE
                  error_message: No data collected
            - type: DefaultErrorHandler
              response_filters:
                - http_codes: [429]
                  action: RETRY
              backoff_strategies:
                - type: WaitTimeFromHeader
                  header: "Retry-After"
      partition_router:
        type: SubstreamPartitionRouter
        parent_stream_configs:
          - stream: "#/definitions/tickets_stream"
            parent_key: "id"
            partition_field: "parent_id"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: The unique identifier for the requested item.
            type:
              - "null"
              - integer
          created_at:
            description: The timestamp when the request was created.
            type:
              - "null"
              - string
          updated_at:
            description: The timestamp when the request item was last updated.
            type:
              - "null"
              - string
          quantity:
            description: The quantity of the requested item.
            type:
              - "null"
              - integer
          stage:
            description: The current stage of the request item.
            type:
              - "null"
              - integer
          loaned:
            description: Whether the item has been loaned out.
            type:
              - "null"
              - boolean
          cost_per_request:
            description: The cost associated with fulfilling the request.
            type:
              - "null"
              - number
          remarks:
            description: Any additional remarks or notes.
            type:
              - "null"
              - string
          delivery_time:
            description: The estimated delivery time for the requested item.
            type:
              - "null"
              - number
          is_parent:
            description: Indicates whether the requested item is a parent item.
            type:
              - "null"
              - boolean
          service_item_id:
            description: The ID of the service item being requested.
            type:
              - "null"
              - integer
          service_item_name:
            description: The name of the service item being requested.
            type:
              - "null"
              - string
          custom_fields:
            description: Any custom fields associated with the requested item.
            type:
              - "null"
              - object
            additionalProperties: true
  problems_stream:
    $ref: "#/definitions/base_stream"
    name: "problems"
    primary_key: "id"
    $parameters:
      path_extractor: "problems"
      path: "/problems"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: The unique identifier of the problem
            type: integer
          agent_id:
            description: The unique identifier of the agent assigned to the problem
            type:
              - "null"
              - integer
          requester_id:
            description: The ID of the user who reported the problem
            type:
              - "null"
              - integer
          group_id:
            description: The ID of the group handling the problem
            type:
              - "null"
              - integer
          description:
            description: Detailed description of the problem
            type:
              - "null"
              - string
          description_text:
            description: Textual description of the problem
            type:
              - "null"
              - string
          priority:
            description: The priority level assigned to the problem
            type:
              - "null"
              - integer
          status:
            description: The current status of the problem
            type:
              - "null"
              - integer
          impact:
            description: The level of impact the problem has on operations
            type:
              - "null"
              - integer
          known_error:
            description: Indicates if the problem is a known error
            type:
              - "null"
              - boolean
          subject:
            description: The subject or title of the problem
            type:
              - "null"
              - string
          due_by:
            description: The due date by which the problem needs to be resolved
            type:
              - "null"
              - string
          department_id:
            description: The ID of the department associated with the problem
            type:
              - "null"
              - integer
          category:
            description: The category under which the problem falls
            type:
              - "null"
              - string
          sub_category:
            description: The sub-category under which the problem falls
            type:
              - "null"
              - string
          item_category:
            description: The category of the item associated with the problem
            type:
              - "null"
              - string
          created_at:
            description: The date and time at which the problem was created
            type:
              - "null"
              - string
            format: date-time
          updated_at:
            description: The date and time at which the problem was last updated
            type:
              - "null"
              - string
            format: date-time
          associated_change:
            description: The ID of the change request associated with the problem
            type:
              - "null"
              - integer
          custom_fields:
            description: Custom fields specific to the problem
            type:
              - "null"
              - object
            additionalProperties: true
          analysis_fields:
            description: Fields related to the analysis or investigation of the problem
            type: object
            additionalProperties: true
          planned_start_date:
            description: The planned start date for resolving the problem
            type:
              - "null"
              - string
            format: date-time
          planned_end_date:
            description: The planned end date for resolving the problem
            type:
              - "null"
              - string
            format: date-time
          planned_effort:
            description: The planned effort required to resolve the problem
            type:
              - string
              - "null"
          attachments:
            description:
              Contains any additional files or documents attached to the
              problem for reference or analysis.
            type:
              - "null"
              - array
            items:
              description: List of attachments related to the problem
              additionalProperties: true
          workspace_id:
            description: The ID of the workspace to which the problem belongs
            type:
              - "null"
              - integer
          assets:
            description:
              Contains information about assets related to the problem,
              such as hardware or software configurations.
            type:
              - "null"
              - array
            items:
              description: Details of assets associated with the problem
              additionalProperties: true
  changes_stream:
    $ref: "#/definitions/base_stream"
    name: "changes"
    primary_key: "id"
    $parameters:
      path_extractor: "changes"
      path: "/changes"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: Unique identifier for the change
            type: integer
          agent_id:
            description: ID of the agent responsible for the change
            type:
              - "null"
              - integer
          description:
            description: Detailed description of the change
            type:
              - "null"
              - string
          description_text:
            description: Textual description of the change
            type:
              - "null"
              - string
          requester_id:
            description: ID of the requester initiating the change
            type:
              - "null"
              - integer
          group_id:
            description: ID of the group handling the change
            type:
              - "null"
              - integer
          priority:
            description: Priority level of the change
            type:
              - "null"
              - integer
          impact:
            description: Impact level of the change
            type:
              - "null"
              - integer
          status:
            description: Current status of the change
            type:
              - "null"
              - integer
          risk:
            description: Risk level associated with the change
            type:
              - "null"
              - integer
          change_type:
            description: Type of change being requested
            type:
              - "null"
              - integer
          approval_status:
            description: Approval status of the change request
            type:
              - "null"
              - integer
          planned_start_date:
            description: Planned start date for the change
            type:
              - "null"
              - string
          planned_end_date:
            description: Planned end date for the change
            type:
              - "null"
              - string
          subject:
            description: Subject or title of the change
            type:
              - "null"
              - string
          department_id:
            description: ID of the department associated with the change
            type:
              - "null"
              - integer
          category:
            description: Category under which the change falls
            type:
              - "null"
              - string
          sub_category:
            description: Sub-category under which the change falls
            type:
              - "null"
              - string
          item_category:
            description: Category of the item related to the change
            type:
              - "null"
              - string
          custom_fields:
            description: Any custom fields associated with the change
            type:
              - "null"
              - object
            additionalProperties: true
          maintenance_window:
            description: Details of any maintenance window for the change
            type:
              - "null"
              - object
            additionalProperties: true
          blackout_window:
            description: Details of any blackout window for the change
            type:
              - "null"
              - object
            additionalProperties: true
          created_at:
            description: Timestamp when the change was created
            type:
              - "null"
              - string
            format: date-time
          updated_at:
            description: Timestamp when the change was last updated
            type:
              - "null"
              - string
            format: date-time
          planned_effort:
            description: Effort planned for the change
            type:
              - string
              - "null"
          attachments:
            description:
              Contains data related to any attachments associated with
              the changes.
            type:
              - "null"
              - array
            items:
              description: List of attachments related to the change
              additionalProperties: true
          impacted_services:
            description: List of services impacted by the change
            type:
              - "null"
              - array
            items:
              additionalProperties: true
          workspace_id:
            description: ID of the workspace in which the change resides
            type:
              - "null"
              - integer
          change_window_id:
            description: ID of the change window
            type:
              - "null"
              - integer
          assets:
            description: Contains information about the assets that were changed.
            type:
              - "null"
              - array
            items:
              description: List of assets associated with the change
              additionalProperties: true
  releases_stream:
    $ref: "#/definitions/base_stream"
    name: "releases"
    primary_key: "id"
    incremental_sync:
      $ref: "#/definitions/incremental_base"
    $parameters:
      path_extractor: "releases"
      path: "/changes"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            description: Unique identifier of the release.
            type: integer
          agent_id:
            description: The unique identifier of the agent associated with the release.
            type:
              - "null"
              - integer
          group_id:
            description: ID of the group associated with the release.
            type:
              - "null"
              - integer
          priority:
            description: Priority level of the release.
            type:
              - "null"
              - integer
          status:
            description: Status of the release (e.g., planned, in progress, completed).
            type:
              - "null"
              - integer
          release_type:
            description: Type of release (e.g., major, minor, patch).
            type:
              - "null"
              - integer
          subject:
            description: Subject or title of the release.
            type:
              - "null"
              - string
          description:
            description: Description of the release.
            type:
              - "null"
              - string
          planned_start_date:
            description: Planned start date of the release.
            type:
              - "null"
              - string
          planned_end_date:
            description: Planned end date of the release.
            type:
              - "null"
              - string
          work_start_date:
            description: Actual start date of the release work.
            type:
              - "null"
              - string
          work_end_date:
            description: Actual end date of the release work.
            type:
              - "null"
              - string
          department_id:
            description: ID of the department associated with the release.
            type:
              - "null"
              - integer
          category:
            description: Category of the release.
            type:
              - "null"
              - string
          sub_category:
            description: Sub-category of the release.
            type:
              - "null"
              - string
          item_category:
            description: Category of the item associated with the release.
            type:
              - "null"
              - string
          created_at:
            description: Timestamp indicating when the release was created.
            type:
              - "null"
              - string
          updated_at:
            description: Timestamp indicating when the release was last updated.
            type:
              - "null"
              - string
          associated_assets:
            description: Assets associated with the release.
            type:
              - "null"
              - array
          associated_changes:
            description: Changes associated with the release.
            type:
              - "null"
              - array
          custom_fields:
            description: Custom fields specific to the release.
            type:
              - "null"
              - object
          planning_fields:
            description: Fields related to the planning of the release.
            type: object
  requesters_stream:
    $ref: "#/definitions/base_stream"
    name: "requesters"
    primary_key: "id"
    $parameters:
      path_extractor: "requesters"
      path: "/requesters"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: Unique identifier for the requester.
            type: integer
          first_name:
            description: First name of the requester.
            type:
              - "null"
              - string
          last_name:
            description: Last name of the requester.
            type:
              - "null"
              - string
          job_title:
            description: Job title of the requester.
            type:
              - "null"
              - string
          primary_email:
            description: Primary email address of the requester.
            type:
              - "null"
              - string
          secondary_emails:
            description: Additional email addresses of the requester.
            type:
              - "null"
              - array
          work_phone_number:
            description: Work phone number of the requester.
            type:
              - "null"
              - string
          mobile_phone_number:
            description: Mobile phone number of the requester.
            type:
              - "null"
              - string
          department_ids:
            description: IDs of the departments the requester is associated with.
            type:
              - "null"
              - array
          can_see_all_tickets_from_associated_departments:
            description:
              Boolean value for whether the requester can see tickets from
              associated departments.
            type:
              - "null"
              - boolean
          reporting_manager_id:
            description: ID of the reporting manager for the requester.
            type:
              - "null"
              - integer
          address:
            description: Requester's physical address.
            type:
              - "null"
              - string
          time_zone:
            description: Time zone preference for the requester.
            type:
              - "null"
              - string
          time_format:
            description: Preferred time format for the requester.
            type:
              - "null"
              - string
          language:
            description: Language preference of the requester.
            type:
              - "null"
              - string
          location_id:
            description: ID of the location associated with the requester.
            type:
              - "null"
              - integer
          background_information:
            description: Additional background information about the requester.
            type:
              - "null"
              - string
          custom_fields:
            description: Custom fields associated with the requester profile.
            type:
              - "null"
              - object
          active:
            description:
              Indicates if the requester is currently active or not in
              the system.
            type:
              - "null"
              - boolean
          has_logged_in:
            description: Indicates if the requester has logged into the system.
            type:
              - "null"
              - boolean
          created_at:
            description: Date and time when the requester record was created.
            type:
              - "null"
              - string
          updated_at:
            description: Date and time when the requester record was last updated.
            type:
              - "null"
              - string
          is_agent:
            description: Boolean value indicating if the requester is also an agent.
            type:
              - "null"
              - boolean
          department_names:
            description: Names of the departments the requester is associated with.
            type:
              - "null"
              - array
          vip_user:
            description: Indicates if the requester is a VIP user.
            type:
              - "null"
              - boolean
          external_id:
            description: External identifier for the requester, if applicable.
            type:
              - "null"
              - string
          can_see_all_changes_from_associated_departments:
            description:
              Boolean value for whether the requester can see changes from
              associated departments.
            type:
              - "null"
              - boolean
          location_name:
            description: Name of the location associated with the requester.
            type:
              - "null"
              - string
          work_schedule_id:
            description: ID of the work schedule assigned to the requester.
            type:
              - "null"
              - integer
  agents_stream:
    $ref: "#/definitions/base_stream"
    name: "agents"
    primary_key: "id"
    $parameters:
      path_extractor: "agents"
      path: "/agents"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: Unique identifier for the agent
            type: integer
          first_name:
            description: First name of the agent
            type:
              - "null"
              - string
          last_name:
            description: Last name of the agent
            type:
              - "null"
              - string
          occasional:
            description: Indicates if the agent is an occasional user
            type:
              - "null"
              - boolean
          job_title:
            description: Job title of the agent
            type:
              - "null"
              - string
          email:
            description: Email address of the agent
            type:
              - "null"
              - string
          work_phone_number:
            description: Work phone number of the agent
            type:
              - "null"
              - string
          mobile_phone_number:
            description: Mobile phone number of the agent
            type:
              - "null"
              - string
          member_of_pending_approval:
            description: Groups the agent has requested to join but pending approval
            type:
              - "null"
              - array
          observer_of_pending_approval:
            description: Groups the agent is waiting to be approved as an observer
            type:
              - "null"
              - array
          department_ids:
            description: IDs of departments to which the agent belongs
            type:
              - "null"
              - array
          can_see_all_tickets_from_associated_departments:
            description: Flag to allow viewing of tickets from associated departments
            type:
              - "null"
              - boolean
          reporting_manager_id:
            description: ID of the reporting manager for the agent
            type:
              - "null"
              - integer
          address:
            description: The physical address of the agent
            type:
              - "null"
              - string
          time_zone:
            description: Preferred time zone for the agent
            type:
              - "null"
              - string
          time_format:
            description: Preferred time format for the agent
            type:
              - "null"
              - string
          language:
            description: Preferred language of communication for the agent
            type:
              - "null"
              - string
          location_id:
            description: ID of the location where the agent is based
            type:
              - "null"
              - integer
          background_information:
            description: Additional background information about the agent
            type:
              - "null"
              - string
          scoreboard_level_id:
            description: ID of the scoreboard level for the agent
            type:
              - "null"
              - integer
          scoreboard_points:
            description: Scoreboard points earned by the agent
            type:
              - "null"
              - integer
          ticket_scope:
            description: Scope of tickets the agent is allowed to access
            type:
              - "null"
              - string
          problem_scope:
            description: Scope of problems the agent is allowed to work on
            type:
              - "null"
              - string
          change_scope:
            description: Scope of changes the agent is allowed to make
            type:
              - "null"
              - string
          release_scope:
            description: Scope of releases the agent is involved in
            type:
              - "null"
              - string
          group_ids:
            description: IDs of groups to which the agent belongs
            type:
              - "null"
              - array
          member_of:
            description: Groups the agent is a member of
            type:
              - "null"
              - array
          observer_of:
            description: Groups the agent is an observer of
            type:
              - "null"
              - array
          role_ids:
            description: IDs of roles assigned to the agent
            type:
              - "null"
              - array
          roles:
            description: Roles assigned to the agent
            type:
              - "null"
              - array
          last_login_at:
            description: Timestamp for when the agent last logged in
            type:
              - "null"
              - string
          last_active_at:
            description: Timestamp for when the agent was last active
            type:
              - "null"
              - string
          custom_fields:
            description: Custom fields specific to the agent
            type:
              - "null"
              - object
          has_logged_in:
            description: Indicates if the agent has logged into the system
            type:
              - "null"
              - boolean
          active:
            description: Indicates if the agent is currently active or not
            type:
              - "null"
              - boolean
          created_at:
            description: Timestamp for when the agent was created
            type:
              - "null"
              - string
          updated_at:
            description: Timestamp for when the agent was last updated
            type:
              - "null"
              - string
          location_name:
            description: Name of the location where the agent is based
            type:
              - "null"
              - string
          department_names:
            description: Names of departments to which the agent belongs
            type:
              - "null"
              - array
          scopes:
            description: Various scopes assigned to the agent
            type:
              - "null"
              - object
          auto_assign_status_changed_at:
            description: Timestamp for when auto assign status was last changed
            type:
              - "null"
              - string
          workspace_id:
            description: ID of the primary workspace for the agent
            type:
              - "null"
              - integer
          signature:
            description: Email signature of the agent
            type:
              - "null"
              - string
          vip_user:
            description: Indicates if the agent is a VIP user
            type:
              - "null"
              - boolean
          auto_assign_tickets:
            description: Flag to enable/disable auto-assigning of tickets to the agent
            type:
              - "null"
              - boolean
          external_id:
            description: External identifier for the agent
            type:
              - "null"
              - string
          workspace_ids:
            description: IDs of workspaces associated with the agent
            type:
              - "null"
              - array
          workspace_info:
            description: Information about workspaces used by the agent
            type:
              - "null"
              - array
            items:
              description: Workspace details
              additionalProperties: true
          work_schedule_id:
            description: ID of the work schedule assigned to the agent
            type:
              - "null"
              - integer
  locations_stream:
    $ref: "#/definitions/base_stream"
    name: "locations"
    primary_key: "id"
    $parameters:
      path_extractor: "locations"
      path: "/locations"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: Unique identifier for the location
            type: integer
          name:
            description: Name of the location
            type:
              - "null"
              - string
          parent_location_id:
            description: Identifier of the parent location (if applicable)
            type:
              - "null"
              - integer
          primary_contact_id:
            description: Identifier of the primary contact person
            type:
              - "null"
              - integer
          address:
            description: Location address details
            type: object
            additionalProperties: true
            properties:
              line1:
                description: First line of the address
                type:
                  - "null"
                  - string
              line2:
                description: Second line of the address
                type:
                  - "null"
                  - string
              city:
                description: City of the location
                type:
                  - "null"
                  - string
              state:
                description: State of the location
                type:
                  - "null"
                  - string
              country:
                description: Country of the location
                type:
                  - "null"
                  - string
              zipcode:
                description: Zip code of the location
                type:
                  - "null"
                  - string
          created_at:
            description: Timestamp when the location was created
            type:
              - "null"
              - string
          updated_at:
            description: Timestamp when the location was last updated
            type:
              - "null"
              - string
          email:
            description: Email address associated with the location
            type:
              - "null"
              - string
          phone:
            description: Phone number of the location
            type:
              - "null"
              - string
          contact_name:
            description: Name of the primary contact person
            type:
              - "null"
              - string
  products_stream:
    $ref: "#/definitions/base_stream"
    name: "products"
    primary_key: "id"
    $parameters:
      path_extractor: "products"
      path: "/products"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        properties:
          id:
            description: Unique identifier for the product.
            type: integer
          name:
            description: Name or title of the product.
            type:
              - "null"
              - string
          asset_type_id:
            description:
              Unique identifier for the type of asset associated with the
              product.
            type:
              - "null"
              - integer
          manufacturer:
            description: Name of the manufacturer of the product.
            type:
              - "null"
              - string
          status:
            description: Current status of the product.
            type:
              - "null"
              - string
          mode_of_procurement:
            description: Method through which the product was procured.
            type:
              - "null"
              - string
          depreciation_type_id:
            description:
              Unique identifier for the type of depreciation method used
              for the product.
            type:
              - "null"
              - integer
          description:
            description: Brief overview or summary of the product.
            type:
              - "null"
              - string
          description_text:
            description: Detailed text describing the product.
            type:
              - "null"
              - string
          created_at:
            description: Timestamp indicating when the product was created.
            type:
              - "null"
              - string
          updated_at:
            description: Timestamp indicating when the product was last updated.
            type:
              - "null"
              - string
  vendors_stream:
    $ref: "#/definitions/base_stream"
    name: "vendors"
    primary_key: "id"
    $parameters:
      path_extractor: "vendors"
      path: "/vendors"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: Unique identifier for the vendor
            type: integer
          name:
            description: Name of the vendor
            type:
              - "null"
              - string
          description:
            description: Description of the vendor
            type:
              - "null"
              - string
          contact_name:
            description: Name of the primary contact person
            type:
              - "null"
              - string
          mobile:
            description: Mobile number of the vendor
            type:
              - "null"
              - integer
          phone:
            description: Phone number of the vendor
            type:
              - "null"
              - integer
          primary_contact_id:
            description: ID of the primary contact person
            type:
              - "null"
              - integer
          email:
            description: Email address of the vendor
            type:
              - "null"
              - string
          custom_fields:
            description: Custom fields specific to the vendor
            type:
              - "null"
              - object
          address:
            description: Vendor address information
            type: object
            additionalProperties: true
            properties:
              line1:
                description: First line of the vendor's address
                type:
                  - "null"
                  - string
              city:
                description: City of the vendor's address
                type:
                  - "null"
                  - string
              state:
                description: State of the vendor's address
                type:
                  - "null"
                  - string
              country:
                description: Country of the vendor's address
                type:
                  - "null"
                  - string
              zipcode:
                description: Zipcode of the vendor's address
                type:
                  - "null"
                  - string
          created_at:
            description: Date and time when vendor data was created
            type:
              - "null"
              - string
          updated_at:
            description: Date and time when vendor data was last updated
            type:
              - "null"
              - string
  assets_stream:
    $ref: "#/definitions/base_stream"
    name: "assets"
    primary_key: "id"
    $parameters:
      path_extractor: "assets"
      path: "/assets"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: Unique identifier for the asset.
            type: integer
          display_id:
            description: Identifier used to display the asset.
            type:
              - "null"
              - integer
          name:
            description: Name or title of the asset.
            type:
              - "null"
              - string
          description:
            description: Description providing additional details about the asset.
            type:
              - "null"
              - string
          asset_type_id:
            description: Identifier for the type of asset.
            type:
              - "null"
              - integer
          asset_tag:
            description: Identification tag assigned to the asset.
            type:
              - "null"
              - string
          impact:
            description: Measure of impact of the asset on operations.
            type:
              - "null"
              - string
          author_type:
            description: Type of author responsible for the asset.
            type:
              - "null"
              - string
          usage_type:
            description: Type of usage or purpose of the asset.
            type:
              - "null"
              - string
          user_id:
            description: Identifier for the user assigned to the asset.
            type:
              - "null"
              - integer
          location_id:
            description: Identifier for the location where the asset is located.
            type:
              - "null"
              - integer
          department_id:
            description: Identifier for the department where the asset is assigned.
            type:
              - "null"
              - integer
          agent_id:
            description: Unique identifier for the agent associated with the asset.
            type:
              - "null"
              - integer
          group_id:
            description: Identifier for the group to which the asset belongs.
            type:
              - "null"
              - integer
          assigned_on:
            description: Date when the asset was assigned.
            type:
              - "null"
              - string
          created_at:
            description: Date and time when the asset record was created.
            type:
              - "null"
              - string
          updated_at:
            description: Date and time when the asset record was last updated.
            type:
              - "null"
              - string
          discovery_enabled:
            description: Flag indicating if asset discovery is enabled.
            type:
              - "null"
              - boolean
          end_of_life:
            description: Date when the asset is expected to reach its end of life.
            type:
              - "null"
              - string
            format: "%Y-%m-%d"
  software_stream:
    $ref: "#/definitions/base_stream"
    name: "software"
    primary_key: "id"
    $parameters:
      path_extractor: "applications"
      path: "/applications"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: Unique identifier for the software.
            type: integer
          name:
            description: Name of the software.
            type:
              - "null"
              - string
          description:
            description: Brief description or overview of the software.
            type:
              - "null"
              - string
          application_type:
            description: Type of application the software belongs to.
            type:
              - "null"
              - string
          status:
            description: Current status of the software.
            type:
              - "null"
              - string
          publisher_id:
            description: Identifier of the publisher of the software.
            type:
              - "null"
              - integer
          managed_by_id:
            description: Identifier of the user or entity managing the software.
            type:
              - "null"
              - integer
          notes:
            description: Any additional notes or comments related to the software.
            type:
              - "null"
              - string
          category:
            description: Category of the software.
            type:
              - "null"
              - string
          sources:
            description: Sources for the software.
            type:
              - "null"
              - array
            items:
              description: Individual source item related to the software.
              additionalProperties: true
          user_count:
            description: Number of users utilizing the software.
            type:
              - "null"
              - integer
          installation_count:
            description: Number of installations of the software.
            type:
              - "null"
              - integer
          workspace_id:
            description: Identifier of the workspace to which the software belongs.
            type:
              - "null"
              - integer
          additional_data:
            description: Additional data related to the software.
            type:
              - "null"
              - object
          created_at:
            description: Timestamp for when the software was created.
            type:
              - "null"
              - string
          updated_at:
            description: Timestamp for when the software was last updated.
            type:
              - "null"
              - string
  purchase_orders_stream:
    $ref: "#/definitions/base_stream"
    name: "purchase_orders"
    primary_key: "id"
    $parameters:
      path_extractor: "purchase_orders"
      path: "/purchase_orders"

    schema_loader:
      type: InlineSchemaLoader
      schema:
        $schema: http://json-schema.org/draft-07/schema#
        type: object
        additionalProperties: true
        properties:
          id:
            description: The unique identifier for the purchase order
            type: integer
          vendor_id:
            description: The ID of the vendor associated with the purchase order
            type:
              - "null"
              - integer
          name:
            description: The name or title for the purchase order
            type:
              - "null"
              - string
          po_number:
            description: The purchase order number for identification
            type:
              - "null"
              - string
          vendor_details:
            description: Details about the vendor supplying the items
            type:
              - "null"
              - string
          expected_delivery_date:
            description: The expected delivery date for the purchase order
            type:
              - "null"
              - string
          created_at:
            description: The date and time when the purchase order was created
            type:
              - "null"
              - string
          updated_at:
            description: The date and time when the purchase order was last updated
            type:
              - "null"
              - string
          created_by:
            description: The user who created the purchase order
            type:
              - "null"
              - integer
          status:
            description: The current status of the purchase order
            type:
              - "null"
              - integer
          shipping_address:
            description: The address where the items will be shipped
            type:
              - "null"
              - string
          billing_same_as_shipping:
            description:
              Indicates whether the billing address is the same as the
              shipping address
            type:
              - "null"
              - integer
          billing_address:
            description: The address used for billing purposes
            type:
              - "null"
              - string
          currency_code:
            description: The currency code used for the purchase order
            type:
              - "null"
              - string
          conversion_rate:
            description: The currency conversion rate used for the purchase order
            type: number
          department_id:
            description: The ID of the department associated with the purchase order
            type:
              - "null"
              - integer
          discount_percentage:
            description: The discount percentage applied to the total cost
            type:
              - "null"
              - integer
          tax_percentage:
            description: The tax percentage applied to the total cost
            type:
              - "null"
              - integer
          shipping_cost:
            description: The cost associated with shipping the items
            type:
              - "null"
              - integer
          workspace_id:
            description: The ID of the workspace in which the purchase order was created
            type:
              - "null"
              - integer
          total_cost:
            description:
              The total cost of the purchase order including taxes and
              discounts
            type:
              - "null"
              - number
          custom_fields:
            description: Any custom fields associated with the purchase order
            type:
              - "null"
              - object
          purchase_items:
            description: The items or products included in the purchase order
            type: array
streams:
  - "#/definitions/tickets_stream"
  - "#/definitions/satisfaction_survey_responses_stream"
  - "#/definitions/problems_stream"
  - "#/definitions/changes_stream"
  - "#/definitions/releases_stream"
  - "#/definitions/requesters_stream"
  - "#/definitions/agents_stream"
  - "#/definitions/locations_stream"
  - "#/definitions/products_stream"
  - "#/definitions/vendors_stream"
  - "#/definitions/assets_stream"
  - "#/definitions/purchase_orders_stream"
  - "#/definitions/software_stream"
  - "#/definitions/requested_items_stream"

check:
  type: CheckStream
  stream_names:
    - "tickets"
