version: 6.4.0

type: DeclarativeSource

description: >-
  Jibble connector  enables seamless integration between Jibble's time-tracking
  data and various data warehouses or tools. It automates data syncs, allowing
  businesses to analyze employee attendance, productivity, and timesheets
  efficiently in their preferred analytics platforms.

check:
  type: CheckStream
  stream_names:
    - members

definitions:
  streams:
    members:
      type: DeclarativeStream
      name: members
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /People
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - value
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: request_parameter
            field_name: $skip
          pagination_strategy:
            type: OffsetIncrement
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/members"
    organizations:
      type: DeclarativeStream
      name: organizations
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /Organizations
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - value
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/organizations"
    activities:
      type: DeclarativeStream
      name: activities
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /Activities
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - value
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/activities"
    schedules:
      type: DeclarativeStream
      name: schedules
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /Schedules
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - value
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/schedules"
    groups:
      type: DeclarativeStream
      name: groups
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /Groups
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - value
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/groups"
    locations:
      type: DeclarativeStream
      name: locations
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /Locations
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - value
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/locations"
  base_requester:
    type: HttpRequester
    url_base: https://workspace.prod.jibble.io/v1
    authenticator:
      type: OAuthAuthenticator
      client_id: "{{ config[\"client_id\"] }}"
      grant_type: client_credentials
      client_secret: "{{ config[\"client_secret\"] }}"
      expires_in_name: expires_in
      access_token_name: access_token
      refresh_request_body: {}
      token_refresh_endpoint: https://identity.prod.jibble.io/connect/token

streams:
  - $ref: "#/definitions/streams/members"
  - $ref: "#/definitions/streams/organizations"
  - $ref: "#/definitions/streams/activities"
  - $ref: "#/definitions/streams/schedules"
  - $ref: "#/definitions/streams/groups"
  - $ref: "#/definitions/streams/locations"

spec:
  type: Spec
  connection_specification:
    type: object
    $schema: http://json-schema.org/draft-07/schema#
    required:
      - client_id
      - client_secret
    properties:
      client_id:
        type: string
        name: client_id
        order: 0
        title: OAuth Client ID
        airbyte_secret: true
      client_secret:
        type: string
        name: client_secret
        order: 1
        title: OAuth Client Secret
        airbyte_secret: true
    additionalProperties: true

metadata:
  autoImportSchema:
    members: true
    organizations: true
    activities: true
    schedules: true
    groups: true
    locations: true
  testedStreams:
    members:
      hasRecords: true
      streamHash: ef45ff5f0afef312985880df4ee144cb169e1b8b
      hasResponse: true
      primaryKeysAreUnique: true
      primaryKeysArePresent: true
      responsesAreSuccessful: true
    organizations:
      hasRecords: true
      streamHash: 5e4042346fb786478b9e093574b64ab0b03e8ed3
      hasResponse: true
      primaryKeysAreUnique: true
      primaryKeysArePresent: true
      responsesAreSuccessful: true
    activities:
      hasRecords: true
      streamHash: 23ab11db3dd676bf786361334922c6a51b4b6a55
      hasResponse: true
      primaryKeysAreUnique: true
      primaryKeysArePresent: true
      responsesAreSuccessful: true
    schedules:
      hasRecords: true
      streamHash: d79ede8730a467134d0f4276825a46295abb05b9
      hasResponse: true
      primaryKeysAreUnique: true
      primaryKeysArePresent: true
      responsesAreSuccessful: true
    groups:
      hasRecords: true
      streamHash: ee2552075167c7b558e7645498a6b7413c7face8
      hasResponse: true
      primaryKeysAreUnique: true
      primaryKeysArePresent: true
      responsesAreSuccessful: true
    locations:
      hasRecords: true
      streamHash: 7110a0e71fee869c7fa3aa798855ef50bfd5a8a5
      hasResponse: true
      primaryKeysAreUnique: true
      primaryKeysArePresent: true
      responsesAreSuccessful: true
  assist:
    docsUrl: >-
      https://docs.api.jibble.io/?_gl=1*syn3kw*_gcl_au*NzQyMDQyMDYyLjE3MzAwOTYyNTk.*_ga*MTY3MDgzNjY1NC4xNzMwMDk2MjU5*_ga_GB6MJWXV2B*MTczMDA5NjI1OS4xLjAuMTczMDA5NjI1OS42MC4wLjExMDcwMjI3MzE.#intro

schemas:
  members:
    type: object
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    properties:
      "@odata.etag":
        type:
          - string
          - "null"
      ICalculationSettings/TimeSheetTimeZone:
        type:
          - string
          - "null"
      ICultureSettings/TimeZone:
        type:
          - string
          - "null"
      IFaceDataSettings/Embeddings:
        type:
          - array
          - "null"
      IFaceDataSettings/Embeddings@odata.type:
        type:
          - string
          - "null"
      IFormatSettings/DurationFormat:
        type:
          - string
          - "null"
      IFormatSettings/TimeFormat:
        type:
          - string
          - "null"
      IFormatSettings/Units:
        type:
          - string
          - "null"
      ILocalizationSettings/CultureCode:
        type:
          - string
          - "null"
      IPersonSetting/AccountVerified:
        type:
          - boolean
          - "null"
      IPersonSetting/OnboardingInProgress:
        type:
          - boolean
          - "null"
      IReminderNotificationSettings/Channels:
        type:
          - array
          - "null"
        items:
          type:
            - string
            - "null"
      IReminderNotificationSettings/Channels@odata.type:
        type:
          - string
          - "null"
      IReminderSettings/NotifyAboutApprovalRequests:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutSuspiciousActivity:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutSuspiciousLocationActivity:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutTimeClockAlerts:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutTimeEntryAdjustments:
        type:
          - boolean
          - "null"
      IReportNotificationSettings/Channels:
        type:
          - array
          - "null"
      IReportNotificationSettings/Channels@odata.type:
        type:
          - string
          - "null"
      IReportNotificationSettings/LongReportExportThresholdInSec:
        type:
          - number
          - "null"
      IReportSettings/YourWeeklyActivityDay:
        type:
          - string
          - "null"
      IScreenshotSettings/IsScreenshotRequired:
        type:
          - boolean
          - "null"
      IScreenshotStorageSettings/Resolution:
        type:
          - string
          - "null"
      ITimeOffNotificationSettings/NotifyAboutMyTimeOffRequests:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/EnableAutomationByGeofence:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludePublicHolidays:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludeRestDays:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludeTimeOffDays:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/AllowedDevices:
        type:
          - array
          - "null"
        items:
          type:
            - string
            - "null"
      ITimeTrackingSettings/AllowedDevices@odata.type:
        type:
          - string
          - "null"
      ITimeTrackingSettings/DeviceLockEnabled:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsActivityRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsAreaRestrictionEnabled:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsEditTimeEntriesAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsLocationRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsManualLocationAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsOfflineAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsProjectRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsSelfieRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/TrackLocationActivity:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/UnusualBehaviourReaction:
        type:
          - string
          - "null"
      ITimeTrackingSettings/VerificationMethod:
        type:
          - string
          - "null"
      code:
        type:
          - string
          - "null"
      createdAt:
        type:
          - string
          - "null"
      email:
        type:
          - string
          - "null"
      fullName:
        type:
          - string
          - "null"
      groupId:
        type:
          - string
          - "null"
      hasEmbeddings:
        type:
          - boolean
          - "null"
      id:
        type: string
      joinDate:
        type:
          - string
          - "null"
      kiosks:
        type:
          - array
          - "null"
      managedUnits:
        type:
          - array
          - "null"
      managers:
        type:
          - array
          - "null"
      organizationId:
        type:
          - string
          - "null"
      overriddenProperties:
        type:
          - array
          - "null"
        items:
          type:
            - string
            - "null"
      pinCode:
        type:
          - string
          - "null"
      preferredName:
        type:
          - string
          - "null"
      projects:
        type:
          - array
          - "null"
      role:
        type:
          - string
          - "null"
      status:
        type:
          - string
          - "null"
      unitTimeOffPolicies:
        type:
          - array
          - "null"
      updatedAt:
        type:
          - string
          - "null"
      userId:
        type:
          - string
          - "null"
      workStartDate:
        type:
          - string
          - "null"
      workTypes:
        type:
          - array
          - "null"
    required:
      - id
  organizations:
    type: object
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    properties:
      "@odata.etag":
        type:
          - string
          - "null"
      ICalculationSettings/TimeSheetTimeZone:
        type:
          - string
          - "null"
      IClientBillingSettings/CurrencyCode:
        type:
          - string
          - "null"
      ICultureSettings/TimeZone:
        type:
          - string
          - "null"
      IExportSettings/PayrollPandaFormatEnabled:
        type:
          - boolean
          - "null"
      IFaceRecognitionSettings/Version:
        type:
          - string
          - "null"
      IFormatSettings/DurationFormat:
        type:
          - string
          - "null"
      IFormatSettings/TimeFormat:
        type:
          - string
          - "null"
      IFormatSettings/Units:
        type:
          - string
          - "null"
      IGeneralTimeSettings/Preset:
        type:
          - string
          - "null"
      ILocalizationSettings/CultureCode:
        type:
          - string
          - "null"
      IOnboardingProgress/Activities:
        type:
          - boolean
          - "null"
      IOnboardingProgress/Completed:
        type:
          - boolean
          - "null"
      IOnboardingProgress/Kiosk:
        type:
          - boolean
          - "null"
      IOnboardingProgress/Locations:
        type:
          - boolean
          - "null"
      IOnboardingProgress/OrganizationProfile:
        type:
          - boolean
          - "null"
      IOnboardingProgress/People:
        type:
          - boolean
          - "null"
      IOnboardingProgress/Skipped:
        type:
          - boolean
          - "null"
      IOnboardingProgress/TimeTrackingRules:
        type:
          - boolean
          - "null"
      IOnboardingProgress/WelcomePresented:
        type:
          - boolean
          - "null"
      IOnboardingProgress/WorkSchedule:
        type:
          - boolean
          - "null"
      IOnboardingSettings/CompanySize:
        type:
          - string
          - "null"
      IOnboardingSettings/Industry:
        type:
          - string
          - "null"
      IOnboardingSettings/Objectives:
        type:
          - array
          - "null"
        items:
          type:
            - string
            - "null"
      IOnboardingSettings/Objectives@odata.type:
        type:
          - string
          - "null"
      IOnboardingSettings/Referer:
        type:
          - string
          - "null"
      IOrganizationProfileSettings/CountryCode:
        type:
          - string
          - "null"
      IOrganizationProfileSettings/FirstDayOfWeek:
        type:
          - string
          - "null"
      IOrganizationProfileSettings/FirstMonth:
        type:
          - string
          - "null"
      IOrganizationProfileSettings/PhoneNumber:
        type:
          - string
          - "null"
      IOrganizationProfileSettings/RoundClockTimes:
        type:
          - string
          - "null"
      IReminderSettings/NotifyAboutApprovalRequests:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutSuspiciousActivity:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutSuspiciousLocationActivity:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutTimeClockAlerts:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutTimeEntryAdjustments:
        type:
          - boolean
          - "null"
      IScreenshotSettings/IsScreenshotRequired:
        type:
          - boolean
          - "null"
      IScreenshotStorageSettings/Resolution:
        type:
          - string
          - "null"
      ISubscriptionSettings/TrialStarted:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/EnableAutomationByGeofence:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludePublicHolidays:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludeRestDays:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludeTimeOffDays:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/AllowedDevices:
        type:
          - array
          - "null"
        items:
          type:
            - string
            - "null"
      ITimeTrackingSettings/AllowedDevices@odata.type:
        type:
          - string
          - "null"
      ITimeTrackingSettings/DeviceLockEnabled:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsActivityRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsAreaRestrictionEnabled:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsEditTimeEntriesAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsLocationRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsManualLocationAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsOfflineAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsProjectRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsSelfieRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/TrackLocationActivity:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/UnusualBehaviourReaction:
        type:
          - string
          - "null"
      ITimeTrackingSettings/VerificationMethod:
        type:
          - string
          - "null"
      createdAt:
        type:
          - string
          - "null"
      id:
        type:
          - string
          - "null"
      name:
        type:
          - string
          - "null"
      status:
        type:
          - string
          - "null"
      updatedAt:
        type:
          - string
          - "null"
  activities:
    type: object
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    properties:
      description:
        type:
          - string
          - "null"
      "@odata.etag":
        type:
          - string
          - "null"
      assignedGroups:
        type:
          - array
          - "null"
      code:
        type:
          - string
          - "null"
      color:
        type:
          - string
          - "null"
      createdAt:
        type:
          - string
          - "null"
      id:
        type:
          - string
          - "null"
      name:
        type:
          - string
          - "null"
      organizationId:
        type:
          - string
          - "null"
      status:
        type:
          - string
          - "null"
      updatedAt:
        type:
          - string
          - "null"
  schedules:
    type: object
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    properties:
      "@odata.etag":
        type:
          - string
          - "null"
      autoDeductions:
        type:
          - array
          - "null"
      breaks:
        type:
          - array
          - "null"
      breaksType:
        type:
          - string
          - "null"
      createdAt:
        type:
          - string
          - "null"
      daySchedules:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            day:
              type:
                - string
                - "null"
            duration:
              type:
                - string
                - "null"
            from:
              type:
                - string
                - "null"
            to:
              type:
                - string
                - "null"
      default:
        type:
          - boolean
          - "null"
      excludeEarlyClockIn:
        type:
          - boolean
          - "null"
      id:
        type:
          - string
          - "null"
      locations:
        type:
          - array
          - "null"
      name:
        type:
          - string
          - "null"
      organizationId:
        type:
          - string
          - "null"
      overtime:
        type:
          - object
          - "null"
        properties:
          dailyDoubleOvertime:
            type:
              - boolean
              - "null"
          dailyOvertime:
            type:
              - boolean
              - "null"
          endWorkDayAt:
            type:
              - string
              - "null"
          publicHolidayOvertime:
            type:
              - boolean
              - "null"
          restDayOvertime:
            type:
              - boolean
              - "null"
          timeRangeStyle:
            type:
              - string
              - "null"
          weeklyOvertime:
            type:
              - boolean
              - "null"
      updatedAt:
        type:
          - string
          - "null"
      workArrangement:
        type:
          - string
          - "null"
  groups:
    type: object
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    properties:
      "@odata.etag":
        type:
          - string
          - "null"
      IGeneralTimeSettings/Preset:
        type:
          - string
          - "null"
      IReminderSettings/NotifyAboutApprovalRequests:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutSuspiciousActivity:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutSuspiciousLocationActivity:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutTimeClockAlerts:
        type:
          - boolean
          - "null"
      IReminderSettings/NotifyAboutTimeEntryAdjustments:
        type:
          - boolean
          - "null"
      IScreenshotSettings/IsScreenshotRequired:
        type:
          - boolean
          - "null"
      IScreenshotStorageSettings/Resolution:
        type:
          - string
          - "null"
      ITimeTrackingAutomationSettings/EnableAutomationByGeofence:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludePublicHolidays:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludeRestDays:
        type:
          - boolean
          - "null"
      ITimeTrackingAutomationSettings/ExcludeTimeOffDays:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/AllowedDevices:
        type:
          - array
          - "null"
        items:
          type:
            - string
            - "null"
      ITimeTrackingSettings/AllowedDevices@odata.type:
        type:
          - string
          - "null"
      ITimeTrackingSettings/DeviceLockEnabled:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsActivityRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsAreaRestrictionEnabled:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsEditTimeEntriesAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsLocationRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsManualLocationAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsOfflineAllowed:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsProjectRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/IsSelfieRequired:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/TrackLocationActivity:
        type:
          - boolean
          - "null"
      ITimeTrackingSettings/UnusualBehaviourReaction:
        type:
          - string
          - "null"
      ITimeTrackingSettings/VerificationMethod:
        type:
          - string
          - "null"
      activities:
        type:
          - array
          - "null"
      createdAt:
        type:
          - string
          - "null"
      firstApprovers:
        type:
          - array
          - "null"
      id:
        type:
          - string
          - "null"
      kiosks:
        type:
          - array
          - "null"
      managers:
        type:
          - array
          - "null"
      name:
        type:
          - string
          - "null"
      organizationId:
        type:
          - string
          - "null"
      overriddenProperties:
        type:
          - array
          - "null"
      projects:
        type:
          - array
          - "null"
      secondApprovers:
        type:
          - array
          - "null"
      status:
        type:
          - string
          - "null"
      unitTimeOffPolicies:
        type:
          - array
          - "null"
      updatedAt:
        type:
          - string
          - "null"
      workTypes:
        type:
          - array
          - "null"
  locations:
    type: object
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    properties:
      "@odata.etag":
        type:
          - string
          - "null"
      address:
        type:
          - string
          - "null"
      coordinates:
        type:
          - object
          - "null"
        properties:
          latitude:
            type:
              - number
              - "null"
          longitude:
            type:
              - number
              - "null"
      createdAt:
        type:
          - string
          - "null"
      id:
        type: string
      name:
        type:
          - string
          - "null"
      organizationId:
        type:
          - string
          - "null"
      schedules:
        type:
          - array
          - "null"
      status:
        type:
          - string
          - "null"
      updatedAt:
        type:
          - string
          - "null"
    required:
      - id
