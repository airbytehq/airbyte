version: 4.3.2

type: DeclarativeSource

check:
  type: CheckStream
  stream_names:
    - organizations

definitions:
  streams:
    organizations:
      type: DeclarativeStream
      name: organizations
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: me/organizations
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - organizations
              - "*"
              - organization
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: updated_at
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%fZ"
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        is_client_side_incremental: true
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/organizations"
    adaccounts:
      type: DeclarativeStream
      name: adaccounts
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: organizations/{{ stream_slice["organization_id"] }}/adaccounts
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - adaccounts
              - "*"
              - adaccount
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: organization_id
              stream:
                $ref: "#/definitions/streams/organizations"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: updated_at
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%fZ"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%fZ"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        is_client_side_incremental: true
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/adaccounts"
    creatives:
      type: DeclarativeStream
      name: creatives
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['adaccount_id'] }}/creatives
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - creatives
              - "*"
              - creative
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: adaccount_id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: updated_at
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%fZ"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%fZ"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        is_client_side_incremental: true
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/creatives"
    ads:
      type: DeclarativeStream
      name: ads
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['adaccount_id'] }}/ads
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - ads
              - "*"
              - ad
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: adaccount_id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: updated_at
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%fZ"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%fZ"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        is_client_side_incremental: true
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/ads"
    adsquads:
      type: DeclarativeStream
      name: adsquads
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['adaccount_id'] }}/adsquads
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - adsquads
              - "*"
              - adsquad
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: adaccount_id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: updated_at
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%fZ"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%fZ"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        is_client_side_incremental: true
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/adsquads"
    segments:
      type: DeclarativeStream
      name: segments
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['adaccount_id'] }}/segments
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - segments
              - "*"
              - segment
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: adaccount_id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: updated_at
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%fZ"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%fZ"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        is_client_side_incremental: true
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/segments"
    media:
      type: DeclarativeStream
      name: media
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['adaccount_id'] }}/media
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - media
              - "*"
              - media
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: adaccount_id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: updated_at
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%fZ"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%fZ"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        is_client_side_incremental: true
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/media"
    campaigns:
      type: DeclarativeStream
      name: campaigns
      primary_key:
        - id
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['adaccount_id'] }}/campaigns
          http_method: GET
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - campaigns
              - "*"
              - campaign
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: adaccount_id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: updated_at
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%fZ"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%fZ"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        is_client_side_incremental: true
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/campaigns"
    adaccounts_stats_hourly:
      type: DeclarativeStream
      name: adaccounts_stats_hourly
      primary_key:
        - id
        - granularity
        - start_time
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: HOUR
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: spend
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - timeseries_stats
              - "*"
              - timeseries_stat
              - timeseries
              - "*"
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      incremental_sync:
        type: DatetimeBasedCursor
        is_compare_strictly: true
        cursor_field: start_time
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%f%z"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: start_time
        end_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: end_time
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        step: P1W
        cursor_granularity: PT0S
      transformations:
        - type: AddFields
          fields:
            - path: ["id"]
              value: "{{ stream_slice['id'] }}"
            - path: ["type"]
              value: "AD_ACCOUNT"
            - path: ["granularity"]
              value: "HOUR"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    adaccounts_stats_daily:
      type: DeclarativeStream
      name: adaccounts_stats_daily
      primary_key:
        - id
        - granularity
        - start_time
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: DAY
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: spend
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - timeseries_stats
              - "*"
              - timeseries_stat
              - timeseries
              - "*"
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      incremental_sync:
        type: DatetimeBasedCursor
        is_compare_strictly: true
        cursor_field: start_time
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%f%z"
        datetime_format: "%Y-%m-%dT%H:%M:%S"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: start_time
        end_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: end_time
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        step: P1M
        cursor_granularity: PT0S
      transformations:
        - type: AddFields
          fields:
            - path: ["id"]
              value: "{{ stream_slice['id'] }}"
            - path: ["type"]
              value: "AD_ACCOUNT"
            - path: ["granularity"]
              value: "DAY"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    adaccounts_stats_lifetime:
      type: DeclarativeStream
      name: adaccounts_stats_lifetime
      primary_key:
        - id
        - granularity
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adaccounts/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: LIFETIME
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: spend
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - lifetime_stats
              - "*"
              - lifetime_stat
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/adaccounts"
      transformations:
        - type: AddFields
          fields:
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    ads_stats_hourly:
      type: DeclarativeStream
      name: ads_stats_hourly
      primary_key:
        - id
        - granularity
        - start_time
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: ads/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: HOUR
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - timeseries_stats
              - "*"
              - timeseries_stat
              - timeseries
              - "*"
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/ads"
      incremental_sync:
        type: DatetimeBasedCursor
        is_compare_strictly: true
        cursor_field: start_time
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%f%z"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: start_time
        end_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: end_time
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        step: P1W
        cursor_granularity: PT0S
      transformations:
        - type: AddFields
          fields:
            - path: ["id"]
              value: "{{ stream_slice['id'] }}"
            - path: ["type"]
              value: "AD"
            - path: ["granularity"]
              value: "HOUR"
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    ads_stats_daily:
      type: DeclarativeStream
      name: ads_stats_daily
      primary_key:
        - id
        - granularity
        - start_time
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: ads/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: DAY
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes,attachment_frequency,attachment_uniques,frequency,uniques,total_reach,earned_reach
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - timeseries_stats
              - "*"
              - timeseries_stat
              - timeseries
              - "*"
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/ads"
      incremental_sync:
        type: DatetimeBasedCursor
        is_compare_strictly: true
        cursor_field: start_time
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%f%z"
        datetime_format: "%Y-%m-%dT%H:%M:%S"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: start_time
        end_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: end_time
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        step: P1M
        cursor_granularity: PT0S
      transformations:
        - type: AddFields
          fields:
            - path: ["id"]
              value: "{{ stream_slice['id'] }}"
            - path: ["type"]
              value: "AD"
            - path: ["granularity"]
              value: "DAY"
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
            - path: ["attachment_frequency"]
              value: "{{ record.get('stats', {}).get('attachment_frequency') }}"
            - path: ["attachment_uniques"]
              value: "{{ record.get('stats', {}).get('attachment_uniques') }}"
            - path: ["frequency"]
              value: "{{ record.get('stats', {}).get('frequency') }}"
            - path: ["uniques"]
              value: "{{ record.get('stats', {}).get('uniques') }}"
            - path: ["total_reach"]
              value: "{{ record.get('stats', {}).get('total_reach') }}"
            - path: ["earned_reach"]
              value: "{{ record.get('stats', {}).get('earned_reach') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    ads_stats_lifetime:
      type: DeclarativeStream
      name: ads_stats_lifetime
      primary_key:
        - id
        - granularity
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: ads/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: LIFETIME
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes,attachment_frequency,attachment_uniques,frequency,uniques,total_reach,earned_reach
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - lifetime_stats
              - "*"
              - lifetime_stat
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/ads"
      transformations:
        - type: AddFields
          fields:
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
            - path: ["attachment_frequency"]
              value: "{{ record.get('stats', {}).get('attachment_frequency') }}"
            - path: ["attachment_uniques"]
              value: "{{ record.get('stats', {}).get('attachment_uniques') }}"
            - path: ["frequency"]
              value: "{{ record.get('stats', {}).get('frequency') }}"
            - path: ["uniques"]
              value: "{{ record.get('stats', {}).get('uniques') }}"
            - path: ["total_reach"]
              value: "{{ record.get('stats', {}).get('total_reach') }}"
            - path: ["earned_reach"]
              value: "{{ record.get('stats', {}).get('earned_reach') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    adsquads_stats_hourly:
      type: DeclarativeStream
      name: adsquads_stats_hourly
      primary_key:
        - id
        - granularity
        - start_time
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adsquads/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: HOUR
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - timeseries_stats
              - "*"
              - timeseries_stat
              - timeseries
              - "*"
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/adsquads"
      incremental_sync:
        type: DatetimeBasedCursor
        is_compare_strictly: true
        cursor_field: start_time
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%f%z"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: start_time
        end_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: end_time
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        step: P1W
        cursor_granularity: PT0S
      transformations:
        - type: AddFields
          fields:
            - path: ["id"]
              value: "{{ stream_slice['id'] }}"
            - path: ["type"]
              value: "AD_SQUAD"
            - path: ["granularity"]
              value: "HOUR"
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    adsquads_stats_daily:
      type: DeclarativeStream
      name: adsquads_stats_daily
      primary_key:
        - id
        - granularity
        - start_time
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adsquads/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: DAY
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes,attachment_frequency,attachment_uniques,frequency,uniques,total_reach,earned_reach
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - timeseries_stats
              - "*"
              - timeseries_stat
              - timeseries
              - "*"
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/adsquads"
      incremental_sync:
        type: DatetimeBasedCursor
        is_compare_strictly: true
        cursor_field: start_time
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%f%z"
        datetime_format: "%Y-%m-%dT%H:%M:%S"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: start_time
        end_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: end_time
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        step: P1M
        cursor_granularity: PT0S
      transformations:
        - type: AddFields
          fields:
            - path: ["id"]
              value: "{{ stream_slice['id'] }}"
            - path: ["type"]
              value: "AD_SQUAD"
            - path: ["granularity"]
              value: "DAY"
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
            - path: ["attachment_frequency"]
              value: "{{ record.get('stats', {}).get('attachment_frequency') }}"
            - path: ["attachment_uniques"]
              value: "{{ record.get('stats', {}).get('attachment_uniques') }}"
            - path: ["frequency"]
              value: "{{ record.get('stats', {}).get('frequency') }}"
            - path: ["uniques"]
              value: "{{ record.get('stats', {}).get('uniques') }}"
            - path: ["total_reach"]
              value: "{{ record.get('stats', {}).get('total_reach') }}"
            - path: ["earned_reach"]
              value: "{{ record.get('stats', {}).get('earned_reach') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    adsquads_stats_lifetime:
      type: DeclarativeStream
      name: adsquads_stats_lifetime
      primary_key:
        - id
        - granularity
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: adsquads/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: LIFETIME
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes,attachment_frequency,attachment_uniques,frequency,uniques,total_reach,earned_reach
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - lifetime_stats
              - "*"
              - lifetime_stat
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/adsquads"
      transformations:
        - type: AddFields
          fields:
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
            - path: ["attachment_frequency"]
              value: "{{ record.get('stats', {}).get('attachment_frequency') }}"
            - path: ["attachment_uniques"]
              value: "{{ record.get('stats', {}).get('attachment_uniques') }}"
            - path: ["frequency"]
              value: "{{ record.get('stats', {}).get('frequency') }}"
            - path: ["uniques"]
              value: "{{ record.get('stats', {}).get('uniques') }}"
            - path: ["total_reach"]
              value: "{{ record.get('stats', {}).get('total_reach') }}"
            - path: ["earned_reach"]
              value: "{{ record.get('stats', {}).get('earned_reach') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    campaigns_stats_hourly:
      type: DeclarativeStream
      name: campaigns_stats_hourly
      primary_key:
        - id
        - granularity
        - start_time
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: campaigns/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: HOUR
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - timeseries_stats
              - "*"
              - timeseries_stat
              - timeseries
              - "*"
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/campaigns"
      incremental_sync:
        type: DatetimeBasedCursor
        is_compare_strictly: true
        cursor_field: start_time
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%f%z"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: start_time
        end_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: end_time
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        step: P1W
        cursor_granularity: PT0S
      transformations:
        - type: AddFields
          fields:
            - path: ["id"]
              value: "{{ stream_slice['id'] }}"
            - path: ["type"]
              value: "CAMPAIGN"
            - path: ["granularity"]
              value: "HOUR"
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    campaigns_stats_daily:
      type: DeclarativeStream
      name: campaigns_stats_daily
      primary_key:
        - id
        - granularity
        - start_time
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: campaigns/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: DAY
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes,attachment_frequency,attachment_uniques,frequency,uniques,total_reach,earned_reach
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - timeseries_stats
              - "*"
              - timeseries_stat
              - timeseries
              - "*"
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/campaigns"
      incremental_sync:
        type: DatetimeBasedCursor
        is_compare_strictly: true
        cursor_field: start_time
        cursor_datetime_formats:
          - "%Y-%m-%dT%H:%M:%S.%f%z"
        datetime_format: "%Y-%m-%dT%H:%M:%S"
        start_datetime:
          type: MinMaxDatetime
          datetime: '{{ config.get("start_date", "2011-09-01") }}'
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: start_time
        end_time_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: end_time
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('end_date', now_utc().strftime('%Y-%m-%d')) }}"
          datetime_format: "%Y-%m-%d"
        step: P1M
        cursor_granularity: PT0S
      transformations:
        - type: AddFields
          fields:
            - path: ["id"]
              value: "{{ stream_slice['id'] }}"
            - path: ["type"]
              value: "CAMPAIGN"
            - path: ["granularity"]
              value: "DAY"
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
            - path: ["attachment_frequency"]
              value: "{{ record.get('stats', {}).get('attachment_frequency') }}"
            - path: ["attachment_uniques"]
              value: "{{ record.get('stats', {}).get('attachment_uniques') }}"
            - path: ["frequency"]
              value: "{{ record.get('stats', {}).get('frequency') }}"
            - path: ["uniques"]
              value: "{{ record.get('stats', {}).get('uniques') }}"
            - path: ["total_reach"]
              value: "{{ record.get('stats', {}).get('total_reach') }}"
            - path: ["earned_reach"]
              value: "{{ record.get('stats', {}).get('earned_reach') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
    campaigns_stats_lifetime:
      type: DeclarativeStream
      name: campaigns_stats_lifetime
      primary_key:
        - id
        - granularity
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: campaigns/{{ stream_slice['id'] }}/stats
          http_method: GET
          request_parameters:
            granularity: LIFETIME
            action_report_time: "{{ config['action_report_time'] }}"
            swipe_up_attribution_window: '{{ config["swipe_up_attribution_window"] }}'
            view_attribution_window: '{{ config["view_attribution_window"] }}'
            fields: >-
              android_installs,attachment_avg_view_time_millis,attachment_impressions,attachment_quartile_1,attachment_quartile_2,attachment_quartile_3,attachment_total_view_time_millis,attachment_view_completion,avg_screen_time_millis,avg_view_time_millis,impressions,ios_installs,quartile_1,quartile_2,quartile_3,screen_time_millis,spend,swipe_up_percent,swipes,total_installs,video_views,video_views_time_based,video_views_15s,view_completion,view_time_millis,paid_impressions,earned_impressions,total_impressions,play_time_millis,shares,saves,native_leads,conversion_purchases,conversion_purchases_value,conversion_save,conversion_start_checkout,conversion_add_cart,conversion_view_content,conversion_add_billing,conversion_searches,conversion_level_completes,conversion_app_opens,conversion_page_views,conversion_subscribe,conversion_ad_click,conversion_ad_view,conversion_complete_tutorial,conversion_invite,conversion_login,conversion_share,conversion_reserve,conversion_achievement_unlocked,conversion_add_to_wishlist,conversion_spend_credits,conversion_rate,conversion_start_trial,conversion_list_view,custom_event_1,custom_event_2,custom_event_3,custom_event_4,custom_event_5,story_opens,story_completes,attachment_frequency,attachment_uniques,frequency,uniques,total_reach,earned_reach
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - lifetime_stats
              - "*"
              - lifetime_stat
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestPath
          pagination_strategy:
            type: CursorPagination
            cursor_value: '{{ response.get("paging", {}).get("next_link", {}) }}'
            stop_condition: '{{ not response.get("paging", {}).get("next_link", {}) }}'
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: id
              partition_field: id
              stream:
                $ref: "#/definitions/streams/campaigns"
      transformations:
        - type: AddFields
          fields:
            - path: ["android_installs"]
              value: "{{ record.get('stats', {}).get('android_installs') }}"
            - path: ["attachment_avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_avg_view_time_millis') }}"
            - path: ["attachment_impressions"]
              value: "{{ record.get('stats', {}).get('attachment_impressions') }}"
            - path: ["attachment_quartile_1"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_1') }}"
            - path: ["attachment_quartile_2"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_2') }}"
            - path: ["attachment_quartile_3"]
              value: "{{ record.get('stats', {}).get('attachment_quartile_3') }}"
            - path: ["attachment_total_view_time_millis"]
              value: "{{ record.get('stats', {}).get('attachment_total_view_time_millis') }}"
            - path: ["attachment_view_completion"]
              value: "{{ record.get('stats', {}).get('attachment_view_completion') }}"
            - path: ["avg_screen_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_screen_time_millis') }}"
            - path: ["avg_view_time_millis"]
              value: "{{ record.get('stats', {}).get('avg_view_time_millis') }}"
            - path: ["impressions"]
              value: "{{ record.get('stats', {}).get('impressions') }}"
            - path: ["ios_installs"]
              value: "{{ record.get('stats', {}).get('ios_installs') }}"
            - path: ["quartile_1"]
              value: "{{ record.get('stats', {}).get('quartile_1') }}"
            - path: ["quartile_2"]
              value: "{{ record.get('stats', {}).get('quartile_2') }}"
            - path: ["quartile_3"]
              value: "{{ record.get('stats', {}).get('quartile_3') }}"
            - path: ["screen_time_millis"]
              value: "{{ record.get('stats', {}).get('screen_time_millis') }}"
            - path: ["spend"]
              value: "{{ record.get('stats', {}).get('spend') }}"
            - path: ["swipe_up_percent"]
              value: "{{ record.get('stats', {}).get('swipe_up_percent') }}"
            - path: ["swipes"]
              value: "{{ record.get('stats', {}).get('swipes') }}"
            - path: ["total_installs"]
              value: "{{ record.get('stats', {}).get('total_installs') }}"
            - path: ["video_views"]
              value: "{{ record.get('stats', {}).get('video_views') }}"
            - path: ["video_views_time_based"]
              value: "{{ record.get('stats', {}).get('video_views_time_based') }}"
            - path: ["video_views_15s"]
              value: "{{ record.get('stats', {}).get('video_views_15s') }}"
            - path: ["view_completion"]
              value: "{{ record.get('stats', {}).get('view_completion') }}"
            - path: ["view_time_millis"]
              value: "{{ record.get('stats', {}).get('view_time_millis') }}"
            - path: ["paid_impressions"]
              value: "{{ record.get('stats', {}).get('paid_impressions') }}"
            - path: ["earned_impressions"]
              value: "{{ record.get('stats', {}).get('earned_impressions') }}"
            - path: ["total_impressions"]
              value: "{{ record.get('stats', {}).get('total_impressions') }}"
            - path: ["play_time_millis"]
              value: "{{ record.get('stats', {}).get('play_time_millis') }}"
            - path: ["shares"]
              value: "{{ record.get('stats', {}).get('shares') }}"
            - path: ["saves"]
              value: "{{ record.get('stats', {}).get('saves') }}"
            - path: ["native_leads"]
              value: "{{ record.get('stats', {}).get('native_leads') }}"
            - path: ["conversion_purchases"]
              value: "{{ record.get('stats', {}).get('conversion_purchases') }}"
            - path: ["conversion_purchases_value"]
              value: "{{ record.get('stats', {}).get('conversion_purchases_value') }}"
            - path: ["conversion_save"]
              value: "{{ record.get('stats', {}).get('conversion_save') }}"
            - path: ["conversion_start_checkout"]
              value: "{{ record.get('stats', {}).get('conversion_start_checkout') }}"
            - path: ["conversion_add_cart"]
              value: "{{ record.get('stats', {}).get('conversion_add_cart') }}"
            - path: ["conversion_view_content"]
              value: "{{ record.get('stats', {}).get('conversion_view_content') }}"
            - path: ["conversion_add_billing"]
              value: "{{ record.get('stats', {}).get('conversion_add_billing') }}"
            - path: ["conversion_searches"]
              value: "{{ record.get('stats', {}).get('conversion_searches') }}"
            - path: ["conversion_level_completes"]
              value: "{{ record.get('stats', {}).get('conversion_level_completes') }}"
            - path: ["conversion_app_opens"]
              value: "{{ record.get('stats', {}).get('conversion_app_opens') }}"
            - path: ["conversion_page_views"]
              value: "{{ record.get('stats', {}).get('conversion_page_views') }}"
            - path: ["conversion_subscribe"]
              value: "{{ record.get('stats', {}).get('conversion_subscribe') }}"
            - path: ["conversion_ad_click"]
              value: "{{ record.get('stats', {}).get('conversion_ad_click') }}"
            - path: ["conversion_ad_view"]
              value: "{{ record.get('stats', {}).get('conversion_ad_view') }}"
            - path: ["conversion_complete_tutorial"]
              value: "{{ record.get('stats', {}).get('conversion_complete_tutorial') }}"
            - path: ["conversion_invite"]
              value: "{{ record.get('stats', {}).get('conversion_invite') }}"
            - path: ["conversion_login"]
              value: "{{ record.get('stats', {}).get('conversion_login') }}"
            - path: ["conversion_share"]
              value: "{{ record.get('stats', {}).get('conversion_share') }}"
            - path: ["conversion_reserve"]
              value: "{{ record.get('stats', {}).get('conversion_reserve') }}"
            - path: ["conversion_achievement_unlocked"]
              value: "{{ record.get('stats', {}).get('conversion_achievement_unlocked') }}"
            - path: ["conversion_add_to_wishlist"]
              value: "{{ record.get('stats', {}).get('conversion_add_to_wishlist') }}"
            - path: ["conversion_spend_credits"]
              value: "{{ record.get('stats', {}).get('conversion_spend_credits') }}"
            - path: ["conversion_rate"]
              value: "{{ record.get('stats', {}).get('conversion_rate') }}"
            - path: ["conversion_start_trial"]
              value: "{{ record.get('stats', {}).get('conversion_start_trial') }}"
            - path: ["conversion_list_view"]
              value: "{{ record.get('stats', {}).get('conversion_list_view') }}"
            - path: ["custom_event_1"]
              value: "{{ record.get('stats', {}).get('custom_event_1') }}"
            - path: ["custom_event_2"]
              value: "{{ record.get('stats', {}).get('custom_event_2') }}"
            - path: ["custom_event_3"]
              value: "{{ record.get('stats', {}).get('custom_event_3') }}"
            - path: ["custom_event_4"]
              value: "{{ record.get('stats', {}).get('custom_event_4') }}"
            - path: ["custom_event_5"]
              value: "{{ record.get('stats', {}).get('custom_event_5') }}"
            - path: ["story_opens"]
              value: "{{ record.get('stats', {}).get('story_opens') }}"
            - path: ["story_completes"]
              value: "{{ record.get('stats', {}).get('story_completes') }}"
            - path: ["attachment_frequency"]
              value: "{{ record.get('stats', {}).get('attachment_frequency') }}"
            - path: ["attachment_uniques"]
              value: "{{ record.get('stats', {}).get('attachment_uniques') }}"
            - path: ["frequency"]
              value: "{{ record.get('stats', {}).get('frequency') }}"
            - path: ["uniques"]
              value: "{{ record.get('stats', {}).get('uniques') }}"
            - path: ["total_reach"]
              value: "{{ record.get('stats', {}).get('total_reach') }}"
            - path: ["earned_reach"]
              value: "{{ record.get('stats', {}).get('earned_reach') }}"
        - type: RemoveFields
          field_pointers:
            - - stats
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/basic_stats"
  base_requester:
    type: HttpRequester
    url_base: https://adsapi.snapchat.com/v1/
    authenticator:
      type: OAuthAuthenticator
      refresh_request_body: {}
      token_refresh_endpoint: https://accounts.snapchat.com/login/oauth2/access_token
      grant_type: refresh_token
      client_id: '{{ config["client_id"] }}'
      client_secret: '{{ config["client_secret"] }}'
      refresh_token: '{{ config["refresh_token"] }}'
    error_handler:
      type: DefaultErrorHandler
      response_filters:
        - type: HttpResponseFilter
          action: RETRY
          http_codes:
            - 403
          error_message: >-
            Got permission error when accessing URL. Skipping {{self.name}} stream.
      backoff_strategies:
        - type: ExponentialBackoffStrategy
          factor: 1

streams:
  - $ref: "#/definitions/streams/organizations"
  - $ref: "#/definitions/streams/adaccounts"
  - $ref: "#/definitions/streams/creatives"
  - $ref: "#/definitions/streams/ads"
  - $ref: "#/definitions/streams/adsquads"
  - $ref: "#/definitions/streams/segments"
  - $ref: "#/definitions/streams/media"
  - $ref: "#/definitions/streams/campaigns"
  - $ref: "#/definitions/streams/adaccounts_stats_hourly"
  - $ref: "#/definitions/streams/adaccounts_stats_daily"
  - $ref: "#/definitions/streams/adaccounts_stats_lifetime"
  - $ref: "#/definitions/streams/ads_stats_hourly"
  - $ref: "#/definitions/streams/ads_stats_daily"
  - $ref: "#/definitions/streams/ads_stats_lifetime"
  - $ref: "#/definitions/streams/adsquads_stats_hourly"
  - $ref: "#/definitions/streams/adsquads_stats_daily"
  - $ref: "#/definitions/streams/adsquads_stats_lifetime"
  - $ref: "#/definitions/streams/campaigns_stats_hourly"
  - $ref: "#/definitions/streams/campaigns_stats_daily"
  - $ref: "#/definitions/streams/campaigns_stats_lifetime"

spec:
  type: Spec
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    title: Snapchat Marketing Spec
    type: object
    required:
      - client_id
      - client_secret
      - refresh_token
    properties:
      client_id:
        title: Client ID
        type: string
        description: The Client ID of your Snapchat developer application.
        airbyte_secret: true
        order: 0
      client_secret:
        title: Client Secret
        type: string
        description: The Client Secret of your Snapchat developer application.
        airbyte_secret: true
        order: 1
      refresh_token:
        title: Refresh Token
        type: string
        description: Refresh Token to renew the expired Access Token.
        airbyte_secret: true
        order: 2
      start_date:
        title: Start Date
        type: string
        description: Date in the format 2022-01-01. Any data before this date will not be replicated.
        examples:
          - "2022-01-01"
        default: "2022-01-01"
        pattern: ^[0-9]{4}-[0-9]{2}-[0-9]{2}$
        order: 3
        format: date
      end_date:
        type: string
        title: End Date
        description: Date in the format 2017-01-25. Any data after this date will not be replicated.
        pattern: ^[0-9]{4}-[0-9]{2}-[0-9]{2}$
        examples:
          - "2022-01-30"
        order: 4
        format: date
      action_report_time:
        type: string
        enum:
          - conversion
          - impression
        title: Action Report Time
        description: Specifies the principle for conversion reporting.
        default: conversion
        order: 5
      swipe_up_attribution_window:
        type: string
        title: Swipe Up Attribution Window
        description: Attribution window for swipe ups.
        enum:
          - 1_DAY
          - 7_DAY
          - 28_DAY
        default: 28_DAY
        order: 6
      view_attribution_window:
        type: string
        title: View Attribution Window
        description: Attribution window for views.
        enum:
          - 1_HOUR
          - 3_HOUR
          - 6_HOUR
          - 1_DAY
          - 7_DAY
        default: 1_DAY
        order: 7
  advanced_auth:
    auth_flow_type: oauth2.0
    oauth_config_specification:
      complete_oauth_output_specification:
        type: object
        properties:
          refresh_token:
            type: string
            path_in_connector_config:
              - refresh_token
      complete_oauth_server_input_specification:
        type: object
        properties:
          client_id:
            type: string
          client_secret:
            type: string
      complete_oauth_server_output_specification:
        type: object
        properties:
          client_id:
            type: string
            path_in_connector_config:
              - client_id
          client_secret:
            type: string
            path_in_connector_config:
              - client_secret

metadata:
  autoImportSchema:
    organizations: false
    adaccounts: false
    creatives: false
    ads: false
    adsquads: false
    segments: false
    media: false
    campaigns: false
    adaccounts_stats_hourly: false
    adaccounts_stats_daily: false
    adaccounts_stats_lifetime: false
    ads_stats_hourly: false
    ads_stats_daily: false
    ads_stats_lifetime: false
    adsquads_stats_hourly: false
    adsquads_stats_daily: false
    adsquads_stats_lifetime: false
    campaigns_stats_hourly: false
    campaigns_stats_daily: false
    campaigns_stats_lifetime: false

schemas:
  organizations:
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: Unique identifier for the organization record.
        type:
          - "null"
          - string
      updated_at:
        description: Timestamp indicating the last update date of the organization record.
        type:
          - "null"
          - string
      created_at:
        description: Timestamp indicating the creation date of the organization record.
        type:
          - "null"
          - string
      name:
        description: The name of the organization.
        type:
          - "null"
          - string
      country:
        description: The country where the organization is located.
        type:
          - "null"
          - string
      postal_code:
        description: The postal code of the organization's location.
        type:
          - "null"
          - string
      locality:
        description: The locality or city where the organization is situated.
        type:
          - "null"
          - string
      contact_name:
        description: The name of the contact person within the organization.
        type:
          - "null"
          - string
      contact_email:
        description: The email address used for contact purposes.
        type:
          - "null"
          - string
      contact_phone:
        description: The phone number of the contact person within the organization.
        type:
          - "null"
          - string
      address_line_1:
        description: The first line of the organization's address.
        type:
          - "null"
          - string
      administrative_district_level_1:
        description: The first-level administrative district of the organization's location.
        type:
          - "null"
          - string
      accepted_term_version:
        description: The version of the terms and conditions accepted by the organization.
        type:
          - "null"
          - string
      contact_phone_optin:
        description: Flag indicating if contact person has opted in for phone contact.
        type:
          - "null"
          - boolean
      configuration_settings:
        description: Settings related to organization configurations
        type:
          - "null"
          - object
        properties:
          notifications_enabled:
            description: Flag indicating if notifications are enabled for the organization.
            type:
              - "null"
              - boolean
      type:
        description: The type or category of the organization.
        type:
          - "null"
          - string
      state:
        description: The state or region where the organization is located.
        type:
          - "null"
          - string
      roles:
        description: List of roles assigned to the organization.
        type:
          - "null"
          - array
        items:
          description: A specific role assigned to the organization.
          type:
            - "null"
            - string
      my_display_name:
        description: The public display name of the organization.
        type:
          - "null"
          - string
      my_invited_email:
        description: Email address of the member invited to the organization.
        type:
          - "null"
          - string
      my_member_id:
        description: Unique identifier of the member within the organization.
        type:
          - "null"
          - string
      createdByCaller:
        description: Record of the creator of the organization within the system.
        type:
          - "null"
          - boolean
  adaccounts:
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: The unique identifier for the ad account.
        type:
          - "null"
          - string
      updated_at:
        description: The timestamp when the ad account details were last updated.
        type:
          - "null"
          - string
      created_at:
        description: The timestamp when the ad account was created.
        type:
          - "null"
          - string
      name:
        description: The name or title of the ad account.
        type:
          - "null"
          - string
      type:
        description: The type or category of the ad account.
        type:
          - "null"
          - string
      status:
        description: The current status or state of the ad account.
        type:
          - "null"
          - string
      organization_id:
        description: The ID of the organization that owns the ad account.
        type:
          - "null"
          - string
      funding_source_ids:
        description: IDs of the funding sources linked to the ad account.
        type:
          - "null"
          - array
        items:
          description: Individual funding source ID.
          type:
            - "null"
            - string
      currency:
        description: The currency used for financial transactions within the ad account.
        type:
          - "null"
          - string
      timezone:
        description: The timezone setting for the ad account operations.
        type:
          - "null"
          - string
      advertiser_organization_id:
        description: The ID of the organization that is advertising on the platform.
        type:
          - "null"
          - string
      billing_center_id:
        description: The ID of the billing center associated with the ad account.
        type:
          - "null"
          - string
      billing_type:
        description: The type of billing arrangement for the ad account.
        type:
          - "null"
          - string
      agency_representing_client:
        description: The agency representing the client for ad account management.
        type:
          - "null"
          - boolean
      client_paying_invoices:
        description: Indicates if the client is responsible for paying the invoices.
        type:
          - "null"
          - boolean
      regulations:
        description: Regulatory information associated with the ad account.
        type:
          - "null"
          - object
        properties:
          restricted_delivery_signals:
            description: Signals or content types subject to delivery restrictions.
            type:
              - "null"
              - boolean
  creatives:
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: The unique identifier of the creative
        type:
          - "null"
          - string
      updated_at:
        description: The timestamp indicating when the creative was last updated
        type:
          - "null"
          - string
      created_at:
        description: The timestamp indicating when the creative was created
        type:
          - "null"
          - string
      name:
        description: The name or title given to the creative
        type:
          - "null"
          - string
      ad_account_id:
        description: The ID of the advertising account linked to the creative
        type:
          - "null"
          - string
      type:
        description: The type or category of the creative
        type:
          - "null"
          - string
      packaging_status:
        description: The status of the packaging for the creative
        type:
          - "null"
          - string
      review_status:
        description: The overall review status of the creative
        type:
          - "null"
          - string
      review_status_details:
        description: Additional details related to the review status
        type:
          - "null"
          - string
      shareable:
        description: Indicates if the creative is shareable
        type:
          - "null"
          - boolean
      forced_view_eligibility:
        description: Whether the creative is eligible for forced views
        type:
          - "null"
          - string
      headline:
        description: The headline or title of the creative
        type:
          - "null"
          - string
      brand_name:
        description: The name of the brand associated with the creative
        type:
          - "null"
          - string
      call_to_action:
        description: The call to action prompt for the creative
        type:
          - "null"
          - string
      render_type:
        description: The type of rendering used for the creative
        type:
          - "null"
          - string
      top_snap_media_id:
        description: The ID of the media file for the top snap
        type:
          - "null"
          - string
      top_snap_crop_position:
        description: The crop position for the top snap of the creative
        type:
          - "null"
          - string
      web_view_properties:
        description: Properties related to the web view functionality when a user interacts with the ad.
        type:
          - "null"
          - object
        properties:
          url:
            description: The URL to be loaded in the web view
            type:
              - "null"
              - string
          allow_snap_javascript_sdk:
            description: Whether to allow the use of Snap JavaScript SDK in the web view
            type:
              - "null"
              - boolean
          use_immersive_mode:
            description: Whether to use immersive mode in the web view
            type:
              - "null"
              - boolean
          deep_link_urls:
            description: List of deep link URLs associated with the web view
            type:
              - "null"
              - array
          block_preload:
            description: Indicates if preloading is blocked for the web view
            type:
              - "null"
              - boolean
      ad_product:
        description: The type of Snapchat advertising product used for the creative
        type:
          - "null"
          - string
      ad_to_place_properties:
        description: Properties related to the ad to be displayed within the Snapchat interface.
        type:
          - "null"
          - object
        properties:
          place_id:
            description: The ID of the place where the ad is to be displayed
            type:
              - "null"
              - string
  ads:
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: The unique identifier of the ad.
        type:
          - "null"
          - string
      updated_at:
        description: The date and time when the ad was last updated.
        type:
          - "null"
          - string
      created_at:
        description: The date and time when the ad was created.
        type:
          - "null"
          - string
      name:
        description: The name or title of the ad.
        type:
          - "null"
          - string
      ad_squad_id:
        description: The unique identifier of the ad squad this ad belongs to.
        type:
          - "null"
          - string
      creative_id:
        description: The unique identifier of the creative content used in the ad.
        type:
          - "null"
          - string
      status:
        description: The current status of the ad.
        type:
          - "null"
          - string
      type:
        description: The type or category of the ad.
        type:
          - "null"
          - string
      render_type:
        description: The type of rendering used for the ad.
        type:
          - "null"
          - string
      review_status:
        description: The review status of the ad.
        type:
          - "null"
          - string
      review_status_reasons:
        description: Reasons for the review status of the ad.
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - string
      delivery_status:
        description: The delivery status of the ad.
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - string
  adsquads:
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: Unique identifier for the ad squad.
        type:
          - "null"
          - string
      updated_at:
        description: Timestamp indicating when the ad squad was last updated.
        type:
          - "null"
          - string
      created_at:
        description: Timestamp indicating when the ad squad was created.
        type:
          - "null"
          - string
      name:
        description: Name of the ad squad.
        type:
          - "null"
          - string
      status:
        description: Current status of the ad squad.
        type:
          - "null"
          - string
      campaign_id:
        description: ID of the campaign associated with the ad squad.
        type:
          - "null"
          - string
      type:
        description: Type of the ad squad.
        type:
          - "null"
          - string
      targeting:
        description: Targeting settings for the ad squad.
        type:
          - "null"
          - object
        properties:
          regulated_content:
            description: Indicates whether regulated content targeting is enabled.
            type:
              - "null"
              - boolean
          geos:
            description: Geographic targeting criteria.
            type:
              - "null"
              - array
            items:
              description: Individual geographic item.
              type:
                - "null"
                - object
              properties:
                country_code:
                  description: Country code for geographic targeting.
                  type:
                    - "null"
                    - string
                operation:
                  description: Operation applied for geographic targeting.
                  type:
                    - "null"
                    - string
          locations:
            description: Location targeting criteria.
            type:
              - "null"
              - array
            items:
              description: Individual location item.
              type:
                - "null"
                - object
              properties:
                circles:
                  description: Circular location details.
                  type:
                    - "null"
                    - array
                  items:
                    description: Individual circle item.
                    type:
                      - "null"
                      - object
                    properties:
                      latitude:
                        description: Latitude coordinate of the circle center.
                        type:
                          - "null"
                          - number
                      longitude:
                        description: Longitude coordinate of the circle center.
                        type:
                          - "null"
                          - number
                      name:
                        description: Name of the circle location.
                        type:
                          - "null"
                          - string
                      radius:
                        description: Radius of the circle in specified unit.
                        type:
                          - "null"
                          - number
                      unit:
                        description: Unit used to measure the radius of the circle.
                        type:
                          - "null"
                          - string
                operation:
                  description: Operation applied for location targeting.
                  type:
                    - "null"
                    - string
          auto_expansion_options:
            description: Options for automatic expansion in targeting.
            type:
              - "null"
              - object
            properties:
              interest_expansion_option:
                description: Settings for interest expansion option.
                type:
                  - "null"
                  - object
                properties:
                  enabled:
                    description: Indicates whether interest expansion is enabled.
                    type:
                      - "null"
                      - boolean
          enable_targeting_expansion:
            description: Option to enable targeting expansion.
            type:
              - "null"
              - boolean
          interests:
            description: Interest targeting criteria.
            type:
              - "null"
              - array
            items:
              description: Individual interest item.
              type:
                - "null"
                - object
              properties:
                category_id:
                  description: Category ID for interest targeting.
                  type:
                    - "null"
                    - array
                  items:
                    description: Individual category ID item.
                    type:
                      - "null"
                      - string
                operation:
                  description: Operation applied for interest targeting.
                  type:
                    - "null"
                    - string
          demographics:
            description: Demographic targeting criteria.
            type:
              - "null"
              - array
            items:
              description: Individual demographic item.
              type:
                - "null"
                - object
      targeting_reach_status:
        description: Status of targeting reach for the ad squad.
        type:
          - "null"
          - string
      placement:
        description: Ad placement settings for the ad squad.
        type:
          - "null"
          - string
      billing_event:
        description: Defines the billing event for the ad squad.
        type:
          - "null"
          - string
      auto_bid:
        description: Indicates whether the ad squad is using auto-bidding for its bids.
        type:
          - "null"
          - boolean
      target_bid:
        description: Target bid value for the ad squad.
        type:
          - "null"
          - boolean
      bid_strategy:
        description: Specifies the bidding strategy used by the ad squad.
        type:
          - "null"
          - string
      daily_budget_micro:
        description: Daily budget in micro currency units for the ad squad.
        type:
          - "null"
          - integer
      start_time:
        description: Start time for the ad squad's run.
        type:
          - "null"
          - string
      optimization_goal:
        description: Goal used for optimizing ad delivery.
        type:
          - "null"
          - string
      delivery_constraint:
        description: Constraints applied to the delivery of the ad squad.
        type:
          - "null"
          - string
      delivery_properties_version:
        description: Version of delivery properties for the ad squad.
        type:
          - "null"
          - integer
      pacing_type:
        description: Type of pacing applied to the ad squad's delivery.
        type:
          - "null"
          - string
      child_ad_type:
        description: Type of child ads under the ad squad.
        type:
          - "null"
          - string
      forced_view_setting:
        description: Setting to force views for the ad squad.
        type:
          - "null"
          - string
      creation_state:
        description: Current state of the ad squad creation process.
        type:
          - "null"
          - string
      delivery_status:
        description: Status of ad delivery for the ad squad.
        type:
          - "null"
          - array
        items:
          description: Individual delivery status item.
          type:
            - "null"
            - string
      event_sources:
        description: Sources of events associated with the ad squad.
        type:
          - "null"
          - object
        properties:
          PLACE:
            description: Event source related to a specific place.
            type:
              - "null"
              - array
            items:
              description: Individual event source item.
              type:
                - "null"
                - string
      skadnetwork_properties:
        description: Properties related to SKAdNetwork integration for the ad squad.
        type:
          - "null"
          - object
        properties:
          ecid_enrollment_status:
            description: Status of ECID enrollment.
            type:
              - "null"
              - string
          enable_skoverlay:
            description: Option to enable SKOverlay.
            type:
              - "null"
              - boolean
          status:
            description: Current status of SKAdNetwork.
            type:
              - "null"
              - string
      lifetime_budget_micro:
        description: Total budget in micro currency units for the lifetime of the ad squad.
        type:
          - "null"
          - integer
      end_time:
        description: End time for the ad squad's run.
        type:
          - "null"
          - string
  segments:
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: Unique identifier for the segment.
        type:
          - "null"
          - string
      updated_at:
        description: The date and time when the segment was last updated.
        type:
          - "null"
          - string
      created_at:
        description: The date and time when the segment was created.
        type:
          - "null"
          - string
      name:
        description: Name or title of the segment.
        type:
          - "null"
          - string
      ad_account_id:
        description: The unique identifier for the ad account associated with the segment.
        type:
          - "null"
          - string
      organization_id:
        description: Unique identifier for the organization to which the segment belongs.
        type:
          - "null"
          - string
      description:
        description: Brief description of the segment.
        type:
          - "null"
          - string
      status:
        description: Current status of the segment (e.g., active, inactive).
        type:
          - "null"
          - string
      targetable_status:
        description: Status indicating whether the segment can be targeted in marketing campaigns.
        type:
          - "null"
          - string
      upload_status:
        description: Status of the segment upload process (e.g., pending, completed).
        type:
          - "null"
          - string
      source_type:
        description: Type of the source data used to create the segment.
        type:
          - "null"
          - string
      retention_in_days:
        description: Number of days for which the segment data is retained.
        type:
          - "null"
          - integer
      approximate_number_users:
        description: Approximate number of users within the segment.
        type:
          - "null"
          - integer
      visible_to:
        description: Visibility setting for the segment, determining who can access it.
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - string
  media:
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: The unique identifier of the media.
        type:
          - "null"
          - string
      updated_at:
        description: The timestamp when the media was last updated.
        type:
          - "null"
          - string
      created_at:
        description: The timestamp when the media was created.
        type:
          - "null"
          - string
      ad_account_id:
        description: The unique identifier of the ad account associated with the media.
        type:
          - "null"
          - string
      type:
        description: The type of media (e.g., image, video).
        type:
          - "null"
          - string
      media_status:
        description: The status of the media (e.g., active, inactive).
        type:
          - "null"
          - string
      media_usages:
        description: Items associated with the media usage.
        type:
          - "null"
          - array
        items:
          description: Details of the media usage.
          type:
            - "null"
            - string
      file_name:
        description: The name of the media file.
        type:
          - "null"
          - string
      download_link:
        description: The link to download the media file.
        type:
          - "null"
          - string
      duration_in_seconds:
        description: The duration of the media in seconds.
        type:
          - "null"
          - number
      image_metadata:
        description: Additional metadata related to the image media.
        type:
          - "null"
          - object
      video_metadata:
        description: Additional metadata related to the video media.
        type:
          - "null"
          - object
      file_size_in_bytes:
        description: The file size of the media in bytes.
        type:
          - "null"
          - integer
      is_demo_media:
        description: Indicates if the media is a demo or not.
        type:
          - "null"
          - boolean
      hash:
        description: The hash value of the media file for identification purposes.
        type:
          - "null"
          - string
      visibility:
        description: The visibility settings of the media (e.g., public, private).
        type:
          - "null"
          - string
      name:
        description: The name or title of the media.
        type:
          - "null"
          - string
  campaigns:
    $schema: http://json-schema.org/draft-07/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: The unique identifier of the campaign.
        type:
          - "null"
          - string
      updated_at:
        description: The timestamp indicating when the campaign was last updated.
        type:
          - "null"
          - string
      created_at:
        description: The timestamp indicating when the campaign was created.
        type:
          - "null"
          - string
      name:
        description: The name assigned to the campaign for easy identification.
        type:
          - "null"
          - string
      ad_account_id:
        description: The unique identifier of the advertising account associated with the campaign.
        type:
          - "null"
          - string
      status:
        description: The current status of the campaign (e.g., paused, active).
        type:
          - "null"
          - string
      objective:
        description: The primary goal or objective of the campaign.
        type:
          - "null"
          - string
      start_time:
        description: The starting date and time for the campaign to begin running.
        type:
          - "null"
          - string
      buy_model:
        description: The purchasing model used for the campaign (e.g., auction, reach and frequency).
        type:
          - "null"
          - string
      delivery_status:
        description: The status of campaign delivery.
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - string
      creation_state:
        description: The current state of the campaign creation process.
        type:
          - "null"
          - string
  basic_stats:
    $schema: http://json-schema.org/schema#
    additionalProperties: true
    type:
      - object
    properties:
      id:
        description: Identifier for the data entry.
        type:
          - string
      type:
        description: Type of data entry.
        type:
          - string
      granularity:
        description: Granularity of the data.
        type:
          - string
      start_time:
        description: Start time of the data snapshot.
        type:
          - "null"
          - string
        format: date-time
      end_time:
        description: End time of the data snapshot.
        type:
          - "null"
          - string
        format: date-time
      android_installs:
        description: Total number of installs on Android devices.
        type:
          - "null"
          - number
      attachment_avg_view_time_millis:
        description: Average time in milliseconds a viewer spends viewing an attachment.
        type:
          - "null"
          - number
      attachment_impressions:
        description: Total number of times an attachment is displayed to users.
        type:
          - "null"
          - number
      attachment_quartile_1:
        description: First quartile of attachment viewing time.
        type:
          - "null"
          - number
      attachment_quartile_2:
        description: Second quartile of attachment viewing time.
        type:
          - "null"
          - number
      attachment_quartile_3:
        description: Third quartile of attachment viewing time.
        type:
          - "null"
          - number
      attachment_total_view_time_millis:
        description: Total time in milliseconds viewers spend on attachment views.
        type:
          - "null"
          - number
      attachment_view_completion:
        description: Percentage of attachment views that are completed.
        type:
          - "null"
          - number
      avg_screen_time_millis:
        description: Average time in milliseconds users spent on the screen.
        type:
          - "null"
          - number
      avg_view_time_millis:
        description: Average time in milliseconds viewers spend on viewing content.
        type:
          - "null"
          - number
      impressions:
        description: Total number of impressions recorded.
        type:
          - "null"
          - number
      ios_installs:
        description: Total number of installs on iOS devices.
        type:
          - "null"
          - number
      quartile_1:
        description: First quartile of viewing time.
        type:
          - "null"
          - number
      quartile_2:
        description: Second quartile of viewing time.
        type:
          - "null"
          - number
      quartile_3:
        description: Third quartile of viewing time.
        type:
          - "null"
          - number
      screen_time_millis:
        description: Total time in milliseconds users spend on the screen.
        type:
          - "null"
          - number
      spend:
        description: Total spend for marketing activities.
        type:
          - "null"
          - number
      swipe_up_percent:
        description: Percentage of users who swiped up.
        type:
          - "null"
          - number
      swipes:
        description: Total number of swipe gestures.
        type:
          - "null"
          - number
      total_installs:
        description: Total number of installations.
        type:
          - "null"
          - number
      video_views:
        description: Total number of video views.
        type:
          - "null"
          - number
      video_views_time_based:
        description: Video views based on time duration.
        type:
          - "null"
          - number
      video_views_15s:
        description: Total number of video views that last at least 15 seconds.
        type:
          - "null"
          - number
      view_completion:
        description: Percentage of views that are completed.
        type:
          - "null"
          - number
      view_time_millis:
        description: Total time viewers spend on viewing content in milliseconds.
        type:
          - "null"
          - number
      paid_impressions:
        description: Total number of impressions from paid sources.
        type:
          - "null"
          - number
      earned_impressions:
        description: Impressions earned through engagements.
        type:
          - "null"
          - number
      total_impressions:
        description: Total number of impressions including earned and paid.
        type:
          - "null"
          - number
      play_time_millis:
        description: Total time in milliseconds users spend playing content.
        type:
          - "null"
          - number
      shares:
        description: Total number of content shares.
        type:
          - "null"
          - number
      saves:
        description: Number of saves performed.
        type:
          - "null"
          - number
      native_leads:
        description: Number of leads generated natively.
        type:
          - "null"
          - number
      conversion_purchases:
        description: Number of total purchases made.
        type:
          - "null"
          - number
      conversion_purchases_value:
        description: Total value of purchases made.
        type:
          - "null"
          - number
      conversion_save:
        description: Number of saves performed.
        type:
          - "null"
          - number
      conversion_start_checkout:
        description: Number of times checkout process is initiated.
        type:
          - "null"
          - number
      conversion_add_cart:
        description: Conversion events where items are added to cart.
        type:
          - "null"
          - number
      conversion_view_content:
        description: Number of content views.
        type:
          - "null"
          - number
      conversion_add_billing:
        description: Conversion events where billing information is added.
        type:
          - "null"
          - number
      conversion_searches:
        description: Number of search queries made.
        type:
          - "null"
          - number
      conversion_level_completes:
        description: Number of game levels completed.
        type:
          - "null"
          - number
      conversion_app_opens:
        description: Number of times the app is opened.
        type:
          - "null"
          - number
      conversion_page_views:
        description: Total number of page views.
        type:
          - "null"
          - number
      conversion_subscribe:
        description: Number of subscriptions made.
        type:
          - "null"
          - number
      conversion_ad_click:
        description: Number of ad clicks recorded.
        type:
          - "null"
          - number
      conversion_ad_view:
        description: Number of ad views.
        type:
          - "null"
          - number
      conversion_complete_tutorial:
        description: Number of completed tutorials.
        type:
          - "null"
          - number
      conversion_invite:
        description: Number of invitations sent by users.
        type:
          - "null"
          - number
      conversion_login:
        description: Number of logins recorded.
        type:
          - "null"
          - number
      conversion_share:
        description: Number of shares made.
        type:
          - "null"
          - number
      conversion_reserve:
        description: Reserve conversion events.
        type:
          - "null"
          - number
      conversion_achievement_unlocked:
        description: Number of times achievements are unlocked.
        type:
          - "null"
          - number
      conversion_add_to_wishlist:
        description: Conversion events where items are added to the wishlist.
        type:
          - "null"
          - number
      conversion_spend_credits:
        description: Total credits spent during conversion events.
        type:
          - "null"
          - number
      conversion_rate:
        description: Rate of conversion events.
        type:
          - "null"
          - number
      conversion_start_trial:
        description: Number of trials started.
        type:
          - "null"
          - number
      conversion_list_view:
        description: Number of views on the list content.
        type:
          - "null"
          - number
      custom_event_1:
        description: Custom event tracking 1.
        type:
          - "null"
          - number
      custom_event_2:
        description: Custom event tracking 2.
        type:
          - "null"
          - number
      custom_event_3:
        description: Custom event tracking 3.
        type:
          - "null"
          - number
      custom_event_4:
        description: Custom event tracking 4.
        type:
          - "null"
          - number
      custom_event_5:
        description: Custom event tracking 5.
        type:
          - "null"
          - number
      attachment_frequency:
        description: Frequency of attachment views.
        type:
          - "null"
          - number
      attachment_uniques:
        description: Unique viewers of attachments.
        type:
          - "null"
          - number
      frequency:
        description: Frequency of events tracked.
        type:
          - "null"
          - number
      uniques:
        description: Total unique events or users.
        type:
          - "null"
          - number
      total_reach:
        description: Total reach including earned and paid.
        type:
          - "null"
          - number
      earned_reach:
        description: Total reach earned through engagements.
        type:
          - "null"
          - number
      story_opens:
        description: Total number of story opens.
        type:
          - "null"
          - number
      story_completes:
        description: Total number of completed stories.
        type:
          - "null"
          - number
