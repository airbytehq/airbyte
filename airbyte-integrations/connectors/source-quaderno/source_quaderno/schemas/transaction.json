{
  "type": "object",
  "description": "A transaction logs a new sale or refund in Quaderno.",
  "properties": {
    "id": {
      "type": "integer",
      "description": "Unique identifier for the object.",
      "readOnly": true,
      "example": 92732431
    },
    "type": {
      "type": "string",
      "enum": [
        "sale",
        "refund"
      ],
      "default": "sale",
      "description": "The transaction\u2019s type."
    },
    "currency": {
      "type": "string",
      "nullable": true,
      "description": "Three-letter [ISO currency code](https://en.wikipedia.org/wiki/ISO_4217), in uppercase. Defaults to the account\u2019s default currency.",
      "example": "USD"
    },
    "custom_metadata": {
      "type": "hash",
      "nullable": true,
      "description": "Set of key-value pairs that you can attach to an object. This can be useful for storing additional information about the object in a structured format. You can have up to 20 keys, with key names up to 40 characters long and values up to 500 characters long.",
      "example": "anything_you_want: extra info"
    },
    "customer": {
      "type": "object",
      "description": "Any customer or vendor who appears on your invoices, credit notes, and expenses.",
      "properties": {
        "id": {
          "type": "integer",
          "description": "Unique identifier for the object.",
          "readOnly": true,
          "example": 92732431
        },
        "city": {
          "type": "string",
          "nullable": true,
          "description": "City/District/Suburb/Town/Village.",
          "example": "Pasadena"
        },
        "contact_person": {
          "type": "string",
          "nullable": true,
          "description": "If the contact is a `company`, this is its contact person."
        },
        "country": {
          "type": "string",
          "description": "2-letter [ISO country code](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes).",
          "example": "US"
        },
        "created_at": {
          "type": "integer",
          "readOnly": true,
          "description": "Time at which the object was created. Measured in seconds since the Unix epoch.",
          "example": 1648037653
        },
        "department": {
          "type": "string",
          "nullable": true,
          "description": "If the contact is a `company`, this is the deparment."
        },
        "discount": {
          "oneOf": [
            {
              "type": "number",
              "format": "float"
            },
            {
              "type": "null"
            }
          ],
          "description": "Default discount for this contact.",
          "example": 0
        },
        "email": {
          "type": "string",
          "format": "email",
          "nullable": true,
          "description": "The contact's email address",
          "example": "leonard@gmail.com"
        },
        "first_name": {
          "type": "string",
          "description": "The contact's first name. Only if the contact is a `person`.",
          "example": "Leonard"
        },
        "full_name": {
          "type": "string",
          "description": "The contact's full name.",
          "example": "Leonard Hofstadter"
        },
        "kind": {
          "type": "string",
          "enum": [
            "company",
            "person"
          ],
          "default": "company",
          "description": "The type of contact.",
          "example": "person"
        },
        "language": {
          "type": "string",
          "description": "The contact's preferred language. 2-letter [ISO language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes). Should be included in the account's translations list.",
          "example": "EN"
        },
        "last_name": {
          "type": "string",
          "nullable": true,
          "description": "The contact's last name. Only if the contact is a `person`.",
          "example": "Hofstadter"
        },
        "notes": {
          "type": "string",
          "nullable": true,
          "description": "Internal notes about the contact.",
          "example": "Some private notes about the contact."
        },
        "phone_1": {
          "type": "string",
          "nullable": true,
          "description": "The contact's phone number.",
          "example": "202-555-0104"
        },
        "postal_code": {
          "type": "string",
          "nullable": true,
          "description": "ZIP or postal code.",
          "example": "91104"
        },
        "processor": {
          "type": "string",
          "nullable": true,
          "description": "The external platform where the contact was imported from, if applicable.",
          "example": "stripe"
        },
        "processor_id": {
          "type": "string",
          "nullable": true,
          "description": "The ID the `payment_processor` assigned to the contact.",
          "example": "cus_999999999999"
        },
        "permalink": {
          "type": "string",
          "format": "uri",
          "description": "The URL for the hosted billing area, where customers can download their invoices and update their billing details.",
          "readOnly": true,
          "example": "https://quadernoapp.com/billing/123345abcdef67890"
        },
        "region": {
          "type": "string",
          "nullable": true,
          "description": "State/Province/Region.",
          "example": "CA"
        },
        "street_line_1": {
          "type": "string",
          "nullable": true,
          "description": "Address line 1 (Street address/PO Box).",
          "example": "2311 North Los Robles Av."
        },
        "street_line_2": {
          "type": "string",
          "nullable": true,
          "description": "Address line 2 (Apartment/Suite/Unit/Building).",
          "example": "Apartment C"
        },
        "tax_id": {
          "type": "string",
          "nullable": true,
          "description": "The contact's tax identification number. Quaderno can validate EU VAT numbers, ABN, and NZBN."
        },
        "tax_status": {
          "type": "string",
          "enum": [
            "taxable",
            "exempt",
            "reverse"
          ],
          "description": "Specifies the tax status of the contact.",
          "default": "taxable"
        },
        "web": {
          "type": "string",
          "nullable": true,
          "format": "uri",
          "description": "The contact's website",
          "example": "https://theelevatorisbroken.com"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URI of the object",
          "readOnly": true,
          "example": "https://quadernoapp.com/api/contacts/92732431"
        }
      },
      "required": [
        "first_name"
      ],
      "$schema": "http://json-schema.org/schema#"
    },
    "created_at": {
      "type": "integer",
      "readOnly": true,
      "description": "Time at which the object was created. Measured in seconds since the Unix epoch.",
      "example": "1593260908"
    },
    "date": {
      "type": "string",
      "format": "date",
      "description": "The transaction\u2019s date. Defaults to today."
    },
    "items": {
      "type": "array",
      "items": {
        "type": "object",
        "description": "A transaction item represents the concept being sold or refunded.",
        "properties": {
          "id": {
            "type": "integer",
            "description": "Unique identifier for the object.",
            "readOnly": true,
            "example": 92732431
          },
          "product_code": {
            "type": "string",
            "description": "Code of an existing product. If present, you don't need to set the description.",
            "example": "012345678901-MFN"
          },
          "created_at": {
            "type": "integer",
            "readOnly": true,
            "description": "Time at which the object was created. Measured in seconds since the Unix epoch.",
            "example": "1593260908"
          },
          "description": {
            "type": "string",
            "description": "Concept being sold or refunded. Meant to be displayable to the customer."
          },
          "quantity": {
            "type": "number",
            "format": "float",
            "nullable": true,
            "description": "Quantity of units for the transaction item. Defaults to 1.",
            "example": 10
          },
          "discount_rate": {
            "type": "number",
            "format": "float",
            "nullable": true,
            "description": "This represents the discount percent out of 100 included in the amount, if applicable.",
            "example": 10
          },
          "amount": {
            "type": "number",
            "format": "float",
            "description": "Total amount of the transaction item. This should always be equal to the amount charged after discounts and taxes.",
            "example": 10
          },
          "tax": {
            "type": "object",
            "description": "Represents a tax calculation on a transaction item.",
            "properties": {
              "name": {
                "type": "string",
                "nullable": true,
                "description": "Name of the tax.",
                "example": "Sales tax"
              },
              "rate": {
                "type": "number",
                "format": "float",
                "description": "Tax rate applied.",
                "example": 8.875
              },
              "taxable_part": {
                "type": "number",
                "nullable": true,
                "format": "float",
                "description": "Percentage of the subtotal used for calculating the tax amount. It's usually 100% but there are a few exceptions. For example, in Texas the taxable base is 80% for SaaS products.",
                "example": 100
              },
              "country": {
                "type": "string",
                "description": "Country used for the tax calculation.",
                "example": "US"
              },
              "region": {
                "type": "string",
                "nullable": true,
                "description": "Region used for the tax calculation.",
                "example": "NY"
              },
              "tax_code": {
                "type": "string",
                "description": "The transaction's tax code used for calculating the tax rate.",
                "example": "eservice"
              },
              "additional_name": {
                "type": "string",
                "nullable": true,
                "description": "Only for jurisdictions that need to apply two tax rates (e.g. some Canadian provinces)."
              },
              "additional_rate": {
                "type": "number",
                "format": "float",
                "nullable": true,
                "description": "Only for jurisdictions that need to apply two tax rates (e.g. some Canadian provinces)."
              },
              "additional_taxable_part": {
                "type": "number",
                "format": "float",
                "nullable": true,
                "description": "Only for jurisdictions that need to apply two tax rates (e.g. some Canadian provinces)."
              },
              "import": {
                "type": "boolean",
                "nullable": true,
                "description": "Whether the product is considered an import sale or not."
              }
            },
            "required": [
              "rate",
              "country",
              "tax_code"
            ],
            "$schema": "http://json-schema.org/schema#"
          }
        },
        "required": [
          "amount"
        ],
        "$schema": "http://json-schema.org/schema#"
      },
      "description": "The list of individual items that make up the transaction."
    },
    "shipping_address": {
      "type": "object",
      "description": "The mailing address to where the order will be shipped. Use it if the order contains physical goods.",
      "properties": {
        "street_line_1": {
          "type": "string"
        },
        "street_line_2": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "country": {
          "type": "string"
        },
        "region": {
          "type": "string"
        },
        "postal_code": {
          "type": "string"
        }
      }
    },
    "evidence": {
      "type": "object",
      "description": "Evidence are proofs of customers' location that must be stored to comply with tax rules.",
      "properties": {
        "id": {
          "type": "integer",
          "description": "Unique identifier for the object.",
          "readOnly": true,
          "example": 92732431
        },
        "additional_evidence": {
          "type": "string",
          "nullable": true,
          "description": "Additional evidence used to proof the customer's location. Required if there's a `additional_evidence_country'.",
          "example": "Phone bill"
        },
        "additional_evidence_country": {
          "type": "string",
          "nullable": true,
          "description": "2-letter ISO 3166-1 code.",
          "example": "DE"
        },
        "bank_country": {
          "type": "string",
          "nullable": true,
          "description": "2-letter ISO 3166-1 code.",
          "example": "DE"
        },
        "billing_country": {
          "type": "string",
          "nullable": true,
          "description": "2-letter ISO 3166-1 code.",
          "example": "DE"
        },
        "created_at": {
          "type": "integer",
          "readOnly": true,
          "description": "Time at which the object was created. Measured in seconds since the Unix epoch.",
          "example": "1593260908"
        },
        "document_id": {
          "type": "integer",
          "description": "Unique identifier for the related invoice.",
          "example": 43123
        },
        "ip_address": {
          "type": "string",
          "nullable": true,
          "description": "The customer's IP address",
          "example": "127.0.0.1"
        },
        "ip_country": {
          "type": "string",
          "nullable": true,
          "readOnly": true,
          "description": "2-letter ISO 3166-1 code.",
          "example": "DE"
        },
        "notes": {
          "type": "string",
          "nullable": true,
          "description": "Internal notes about the evidence.",
          "example": "Some private notes about the evidence."
        },
        "state": {
          "type": "string",
          "enum": [
            "unsettled",
            "conflicting",
            "confirmed"
          ],
          "default": "unsettled",
          "description": "State of the evidence"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URI of the object",
          "readOnly": true,
          "example": "https://quadernoapp.com/api/evidence/92732431"
        }
      },
      "required": [
        "document_id"
      ],
      "$schema": "http://json-schema.org/schema#"
    },
    "payment": {
      "type": "object",
      "description": "Detailed information about the transaction payment.",
      "properties": {
        "method": {
          "type": "string",
          "enum": [
            "credit_card",
            "cash",
            "wire_transfer",
            "direct_debit",
            "check",
            "iou",
            "paypal",
            "other"
          ],
          "default": "other",
          "description": "The payment method used to pay the transaction."
        },
        "processor": {
          "type": "string",
          "description": "The name of the payment processor used to take the payment. E.g. stripe, paypal\u2026"
        },
        "processor_id": {
          "type": "string",
          "description": "The ID of the transaction in the payment processor."
        }
      }
    },
    "processor": {
      "type": "string",
      "nullable": true,
      "description": "The name of the platform that processed the transaction. E.g. shopify, woocommerce or any user agent you may want to use to identify yourself\u2026 **Recommended**",
      "example": "my_platform_user_agent"
    },
    "processor_id": {
      "type": "string",
      "nullable": true,
      "description": "The ID of the transaction in the processor. Use the same ID to link sales and refunds for the same operation. **Recommended**",
      "example": "my_internal_request_id"
    },
    "processor_fee_cents": {
      "type": "integer",
      "nullable": true,
      "description": "Processor total fee, in cents.",
      "example": 99
    },
    "po_number": {
      "type": "string",
      "nullable": true,
      "description": "The number of the related order. **Recommended**.",
      "example": "po_xxxxxxxx"
    },
    "notes": {
      "type": "string",
      "nullable": true,
      "description": "Optional notes attached to the transaction.",
      "example": "A note."
    },
    "tags": {
      "type": "string",
      "nullable": true,
      "description": "Tags attached to the transaction, formatted as a string of comma-separated values. Tags are additional short descriptors, commonly used for filtering and searching. Each individual tag is limited to 40 characters in length.",
      "example": "tagA, tagB"
    }
  },
  "required": [
    "items",
    "payment"
  ],
  "$schema": "http://json-schema.org/schema#"
}