{
  "documentationUrl" : "https://docs.airbyte.com/integrations/destinations/iceberg",
  "supportsNormalization" : false,
  "supported_destination_sync_modes" : [
    "overwrite",
    "append"
  ],
  "connectionSpecification" : {
    "$schema" : "http://json-schema.org/draft-07/schema#",
    "title" : "Iceberg Destination Spec",
    "type" : "object",
    "required" : [
      "catalog_config",
      "storage_config",
      "format_config"
    ],
    "properties" : {
      "catalog_config" : {
        "title" : "Iceberg catalog config",
        "type" : "object",
        "description" : "Catalog config of Iceberg.",
        "oneOf" : [
          {
            "title" : "Hive: Apache Hive MetaStore",
            "required" : [
              "catalog_type",
              "hive_thrift_uri"
            ],
            "properties" : {
              "catalog_type" : {
                "title" : "Catalog Type",
                "type" : "string",
                "default" : "Hive",
                "enum" : [
                  "Hive"
                ],
                "order" : 0
              },
              "hive_thrift_uri" : {
                "type" : "string",
                "description" : "Hive MetaStore thrift server uri of iceberg catalog.",
                "examples" : [
                  "host:port"
                ],
                "order" : 1
              },
              "database" : {
                "title" : "Default database",
                "description" : "The default database tables are written to if the source does not specify a namespace. The usual value for this field is \"default\".",
                "type" : "string",
                "default" : "default",
                "examples" : [
                  "default"
                ],
                "order" : 2
              }
            }
          }
        ],
        "order" : 0
      },
      "storage_config" : {
        "title" : "Storage config",
        "type" : "object",
        "description" : "Storage config of Iceberg.",
        "oneOf" : [
          {
            "title" : "S3",
            "type" : "object",
            "description" : "S3 object storage",
            "required" : [
              "storage_type",
              "access_key_id",
              "secret_access_key",
              "s3_warehouse_uri"
            ],
            "properties" : {
              "storage_type" : {
                "title" : "Storage Type",
                "type" : "string",
                "default" : "S3",
                "enum" : [
                  "S3"
                ],
                "order" : 0
              },
              "access_key_id" : {
                "type" : "string",
                "description" : "The access key ID to access the S3 bucket. Airbyte requires Read and Write permissions to the given bucket. Read more <a href=\"https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys\">here</a>.",
                "title" : "S3 Key ID",
                "airbyte_secret" : true,
                "examples" : [
                  "A012345678910EXAMPLE"
                ],
                "order" : 0
              },
              "secret_access_key" : {
                "type" : "string",
                "description" : "The corresponding secret to the access key ID. Read more <a href=\"https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys\">here</a>",
                "title" : "S3 Access Key",
                "airbyte_secret" : true,
                "examples" : [
                  "a012345678910ABCDEFGH/AbCdEfGhEXAMPLEKEY"
                ],
                "order" : 1
              },
              "s3_warehouse_uri" : {
                "title" : "S3 Warehouse Uri for Iceberg",
                "type" : "string",
                "description" : "The Warehouse Uri for Iceberg",
                "examples" : [
                  "s3a://my-bucket/path/to/warehouse",
                  "s3://my-bucket/path/to/warehouse"
                ],
                "order" : 2
              },
              "s3_bucket_region" : {
                "title" : "S3 Bucket Region",
                "type" : "string",
                "default" : "",
                "description" : "The region of the S3 bucket. See <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-available-regions\">here</a> for all region codes.",
                "enum" : [
                  "",
                  "us-east-1",
                  "us-east-2",
                  "us-west-1",
                  "us-west-2",
                  "af-south-1",
                  "ap-east-1",
                  "ap-south-1",
                  "ap-northeast-1",
                  "ap-northeast-2",
                  "ap-northeast-3",
                  "ap-southeast-1",
                  "ap-southeast-2",
                  "ca-central-1",
                  "cn-north-1",
                  "cn-northwest-1",
                  "eu-central-1",
                  "eu-north-1",
                  "eu-south-1",
                  "eu-west-1",
                  "eu-west-2",
                  "eu-west-3",
                  "sa-east-1",
                  "me-south-1",
                  "us-gov-east-1",
                  "us-gov-west-1"
                ],
                "order" : 3
              },
              "s3_endpoint" : {
                "title" : "Endpoint",
                "type" : "string",
                "default" : "",
                "description" : "Your S3 endpoint url. Read more <a href=\"https://docs.aws.amazon.com/general/latest/gr/s3.html#:~:text=Service%20endpoints-,Amazon%20S3%20endpoints,-When%20you%20use\">here</a>",
                "examples" : [
                  "http://localhost:9000",
                  "localhost:9000"
                ],
                "order" : 4
              },
              "s3_path_style_access" : {
                "type" : "boolean",
                "description" : "Use path style access",
                "examples" : [
                  true,
                  false
                ],
                "default" : true,
                "order" : 5
              }
            }
          }
        ],
        "order" : 1
      },
      "format_config" : {
        "title" : "File format",
        "type" : "object",
        "required" : [
          "format"
        ],
        "description" : "File format of Iceberg storage.",
        "properties" : {
          "format" : {
            "title" : "File storage format",
            "type" : "string",
            "default" : "Parquet",
            "description" : "",
            "enum" : [
              "Parquet",
              "ORC",
              "Avro"
            ],
            "order" : 0
          }
        },
        "order" : 2
      }
    }
  }
}
