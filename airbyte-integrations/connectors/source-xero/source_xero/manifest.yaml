version: 1.0.0

definitions:
  selector:
    type: RecordSelector
    extractor:
      type: CustomRecordExtractor
      class_name: source_xero.components.CustomExtractor
      field_path: ["{{ parameters.extractor_path }}"]

  oauth_authenticator:
    type: OAuthAuthenticator
    token_refresh_endpoint: https://identity.xero.com/connect/token
    client_id: "{{ config['credentials']['client_id'] }}"
    client_secret: "{{ config['credentials']['client_secret'] }}"
    grant_type: client_credentials
    refresh_request_body: {}
    scopes:
      - offline_access
      - accounting.transactions.read
      - accounting.reports.read
      - accounting.budgets.read
      - accounting.reports.tenninetynine.read
      - accounting.journals.read
      - accounting.settings.read
      - accounting.contacts.read
      - accounting.attachments.read
      - assets.read files.read projects.read
      - openid
    expires_in_name: expires_in
    access_token_name: access_token

  bearer_authenticator:
    type: BearerAuthenticator
    api_token: "{{ config['credentials']['access_token'] }}"

  authenticator:
    type: SelectiveAuthenticator
    authenticator_selection_path: ["credentials", "auth_type"]
    authenticators:
      oauth2_access_token: "#/definitions/bearer_authenticator"
      oauth2_confidential_application: "#/definitions/oauth_authenticator"

  requester:
    type: HttpRequester
    url_base: "https://api.xero.com/api.xro/2.0/"
    http_method: "GET"
    authenticator:
      $ref: "#/definitions/authenticator"
    request_headers:
      "Xero-Tenant-Id": "{{ config['tenant_id'] }}"
      "Accept": "application/json"
    error_handler:
      type: CompositeErrorHandler
      error_handlers:
        - type: DefaultErrorHandler
          backoff_strategies:
            - type: "ConstantBackoffStrategy"
              backoff_time_in_seconds: 30
          response_filters:
            - type: HttpResponseFilter
              action: FAIL
              http_codes:
                - 401
              error_message: Failed to authorize request. Please update your access token to continue using the source.
            - type: HttpResponseFilter
              action: IGNORE
              http_codes:
                - 403
            - type: HttpResponseFilter
              action: RETRY
              http_codes:
                - 429

  paginator_base:
    type: "DefaultPaginator"
    page_size_option:
      type: "RequestOption"
      inject_into: "request_parameter"
      field_name: "page_size"
    pagination_strategy:
      type: "PageIncrement"
      page_size: 100
    page_token_option:
      type: "RequestOption"
      inject_into: "request_parameter"
      field_name: "page"

  retriever:
    type: SimpleRetriever
    record_selector:
      $ref: "#/definitions/selector"
    paginator:
      type: NoPagination
    requester:
      $ref: "#/definitions/requester"

  incremental_sync_base:
    type: DatetimeBasedCursor
    cursor_field: UpdatedDateUTC
    datetime_format: "%Y-%m-%dT%H:%M:%S%z"
    start_datetime:
      type: MinMaxDatetime
      datetime: "{{ config['start_date'] }}"
      datetime_format: "%Y-%m-%dT%H:%M:%SZ"
    end_datetime:
      type: MinMaxDatetime
      datetime: "{{ now_utc().strftime('%Y-%m-%dT%H:%M:%S%z') }}"
      datetime_format: "%Y-%m-%dT%H:%M:%S%z"

  base_stream:
    type: DeclarativeStream
    retriever:
      $ref: "#/definitions/retriever"

  bank_transactions_stream:
    $ref: "#/definitions/base_stream"
    name: "bank_transactions"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/bank_transactions_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "BankTransactionID"
      path: "/BankTransactions"
      extractor_path: "BankTransactions"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  contacts_stream:
    $ref: "#/definitions/base_stream"
    name: "contacts"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/contacts_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "ContactID"
      path: "/Contacts"
      extractor_path: "Contacts"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  credit_notes_stream:
    $ref: "#/definitions/base_stream"
    name: "credit_notes"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/credit_notes_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "CreditNoteID"
      path: "/CreditNotes"
      extractor_path: "CreditNotes"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  invoices_stream:
    $ref: "#/definitions/base_stream"
    name: "invoices"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/invoices_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "InvoiceID"
      path: "/Invoices"
      extractor_path: "Invoices"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  manual_journals_stream:
    $ref: "#/definitions/base_stream"
    name: "manual_journals"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/manual_journals_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "ManualJournalID"
      path: "/ManualJournals"
      extractor_path: "ManualJournals"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  overpayments_stream:
    $ref: "#/definitions/base_stream"
    name: "overpayments"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/overpayments_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "OverpaymentID"
      path: "/Overpayments"
      extractor_path: "Overpayments"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  prepayments_stream:
    $ref: "#/definitions/base_stream"
    name: "prepayments"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/prepayments_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "PrepaymentID"
      path: "/Prepayments"
      extractor_path: "Prepayments"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  purchase_orders_stream:
    $ref: "#/definitions/base_stream"
    name: "purchase_orders"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/purchase_orders_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "PurchaseOrderID"
      path: "/PurchaseOrders"
      extractor_path: "PurchaseOrders"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  accounts_stream:
    $ref: "#/definitions/base_stream"
    name: "accounts"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/accounts_schema"
    retriever:
      $ref: "#/definitions/retriever"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "AccountID"
      path: "/Accounts"
      extractor_path: "Accounts"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  bank_transfers_stream:
    $ref: "#/definitions/base_stream"
    name: "bank_transfers"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/bank_transfers_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['CreatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "BankTransferID"
      path: "/BankTransfers"
      extractor_path: "BankTransfers"
    incremental_sync:
      type: DatetimeBasedCursor
      cursor_field: CreatedDateUTC
      datetime_format: "%Y-%m-%dT%H:%M:%S%z"
      start_datetime:
        type: MinMaxDatetime
        datetime: "{{ config['start_date'] }}"
        datetime_format: "%Y-%m-%dT%H:%M:%SZ"
      end_datetime:
        type: MinMaxDatetime
        datetime: "{{ now_utc().strftime('%Y-%m-%dT%H:%M:%S%z') }}"
        datetime_format: "%Y-%m-%dT%H:%M:%S%z"

  employees_stream:
    $ref: "#/definitions/base_stream"
    name: "employees"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/employees_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "EmployeeID"
      path: "/Employees"
      extractor_path: "Employees"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  items_stream:
    $ref: "#/definitions/base_stream"
    name: "items"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/items_schema"
    retriever:
      $ref: "#/definitions/retriever"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "ItemID"
      path: "/Items"
      extractor_path: "Items"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  payments_stream:
    $ref: "#/definitions/base_stream"
    name: "payments"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/payments_schema"
    retriever:
      $ref: "#/definitions/retriever"
      paginator:
        $ref: "#/definitions/paginator_base"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "PaymentID"
      path: "/Payments"
      extractor_path: "Payments"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  users_stream:
    $ref: "#/definitions/base_stream"
    name: "users"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/users_schema"
    retriever:
      $ref: "#/definitions/retriever"
      record_selector:
        $ref: "#/definitions/selector"
        record_filter:
          condition: "{{ record['UpdatedDateUTC'] >= stream_interval['start_time'] }}"
    $parameters:
      primary_key: "UserID"
      path: "/Users"
      extractor_path: "Users"
    incremental_sync:
      $ref: "#/definitions/incremental_sync_base"

  branding_themes_stream:
    $ref: "#/definitions/base_stream"
    name: "branding_themes"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/branding_themes_schema"
    $parameters:
      primary_key: "BrandingThemeID"
      path: "/BrandingThemes"
      extractor_path: "BrandingThemes"

  contact_groups_stream:
    $ref: "#/definitions/base_stream"
    name: "contact_groups"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/contact_groups_schema"
    $parameters:
      primary_key: "ContactGroupID"
      path: "/ContactGroups"
      extractor_path: "ContactGroups"

  currencies_stream:
    $ref: "#/definitions/base_stream"
    name: "currencies"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/currencies_schema"
    $parameters:
      primary_key: "Code"
      path: "/Currencies"
      extractor_path: "Currencies"

  organisations_stream:
    $ref: "#/definitions/base_stream"
    name: "organisations"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/organisations_schema"
    $parameters:
      primary_key: "OrganisationID"
      path: "/Organisation"
      extractor_path: "Organisations"

  repeating_invoices_stream:
    $ref: "#/definitions/base_stream"
    name: "repeating_invoices"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/repeating_invoices_schema"
    $parameters:
      primary_key: "RepeatingInvoiceID"
      path: "/RepeatingInvoices"
      extractor_path: "RepeatingInvoices"

  tax_rates_stream:
    $ref: "#/definitions/base_stream"
    name: "tax_rates"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/tax_rates_schema"
    $parameters:
      primary_key: "Name"
      path: "/TaxRates"
      extractor_path: "TaxRates"

  tracking_categories_stream:
    $ref: "#/definitions/base_stream"
    name: "tracking_categories"
    schema_loader:
      type: InlineSchemaLoader
      schema:
        $ref: "#/definitions/tracking_categories_schema"
    $parameters:
      primary_key: "TrackingCategoryID"
      path: "/TrackingCategories"
      extractor_path: "TrackingCategories"

  line_items_schema:
    type: object
    properties:
      Description:
        type:
          - "null"
          - string
      Quantity:
        type:
          - "null"
          - number
      UnitAmount:
        type:
          - "null"
          - number
      AccountCode:
        type:
          - "null"
          - string
      ItemCode:
        type:
          - "null"
          - string
      LineItemID:
        type:
          - string
      TaxType:
        type:
          - "null"
          - string
      LineAmount:
        type:
          - "null"
          - number
      TaxAmount:
        type:
          - "null"
          - number
      DiscountRate:
        type:
          - "null"
          - number
      Tracking:
        items:
          type:
            - "null"
            - object
          additionalProperties: true
          properties:
            Status:
              type:
                - "null"
                - string
            TrackingCategoryID:
              type:
                - string
            Option:
              type:
                - "null"
                - string
            TrackingCategoryName:
              type:
                - "null"
                - string
            TrackingOptionID:
              type:
                - "null"
                - string
            TrackingOptionName:
              type:
                - "null"
                - string
            Options:
              items:
                type:
                  - "null"
                  - object
                properties:
                  IsActive:
                    type:
                      - "null"
                      - boolean
                  IsDeleted:
                    type:
                      - "null"
                      - boolean
                  TrackingOptionID:
                    type:
                      - "null"
                      - string
                  IsArchived:
                    type:
                      - "null"
                      - boolean
                  Status:
                    type:
                      - "null"
                      - string
                  Name:
                    type:
                      - "null"
                      - string
                  HasValidationErrors:
                    type:
                      - "null"
                      - boolean
                additionalProperties: true
              type:
                - "null"
                - array
            Name:
              type:
                - "null"
                - string
        type:
          - "null"
          - array
    additionalProperties: true

  bank_transactions_schema:
    type: object
    additionalProperties: true
    properties:
      Type:
        type:
          - "null"
          - "string"
      Contact:
        $ref: "#/definitions/contacts_schema"
      LineItems:
        type:
          - "null"
          - "array"
        items:
          $ref: "#/definitions/line_items_schema"
      BankAccount:
        $ref: "#/definitions/accounts_schema"
      IsReconciled:
        type:
          - "null"
          - "boolean"
      Date:
        type:
          - "null"
          - "string"
        format: "date-time"
      DateString:
        type:
          - "null"
          - "string"
        format: "date-time"
      Reference:
        type:
          - "null"
          - "string"
      CurrencyCode:
        type:
          - "null"
          - "string"
      CurrencyRate:
        type:
          - "null"
          - "number"
      Url:
        type:
          - "null"
          - "string"
      Status:
        type:
          - "null"
          - "string"
      LineAmountTypes:
        type:
          - "null"
          - "string"
      SubTotal:
        type:
          - "null"
          - "number"
      TotalTax:
        type:
          - "null"
          - "number"
      Total:
        type:
          - "null"
          - "number"
      BankTransactionID:
        type:
          - "string"
      PrepaymentID:
        type:
          - "null"
          - "string"
      OverpaymentID:
        type:
          - "null"
          - "string"
      UpdatedDateUTC:
        type:
          - "null"
          - "string"
        format: "date-time"
      HasAttachments:
        type:
          - "null"
          - "boolean"
      ExternalLinkProviderName:
        type:
          - "null"
          - "string"

  addresses_schema:
    type: object
    properties:
      Region:
        type:
          - "null"
          - string
      AddressLine1:
        type:
          - "null"
          - string
      AddressLine2:
        type:
          - "null"
          - string
      AddressLine3:
        type:
          - "null"
          - string
      AddressLine4:
        type:
          - "null"
          - string
      AttentionTo:
        type:
          - "null"
          - string
      City:
        type:
          - "null"
          - string
      PostalCode:
        type:
          - "null"
          - string
      Country:
        type:
          - "null"
          - string
      AddressType:
        type:
          - "null"
          - string
    additionalProperties: true

  phones_schema:
    type: object
    properties:
      PhoneNumber:
        type:
          - "null"
          - string
      PhoneAreaCode:
        type:
          - "null"
          - string
      PhoneCountryCode:
        type:
          - "null"
          - string
      PhoneType:
        type:
          - "null"
          - string
    additionalProperties: true

  payment_terms_schema:
    type: object
    properties:
      Sales:
        type:
          - "null"
          - object
        properties:
          Day:
            type:
              - "null"
              - integer
          Type:
            type:
              - "null"
              - string
        additionalProperties: true
      Bills:
        type:
          - "null"
          - object
        properties:
          Day:
            type:
              - "null"
              - integer
          Type:
            type:
              - "null"
              - string
        additionalProperties: true
    additionalProperties: true

  contacts_schema:
    type: object
    properties:
      ContactID:
        type:
          - string
      ContactNumber:
        type:
          - "null"
          - string
      AccountNumber:
        type:
          - "null"
          - string
      ContactStatus:
        type:
          - "null"
          - string
      Name:
        type:
          - "null"
          - string
      FirstName:
        type:
          - "null"
          - string
      LastName:
        type:
          - "null"
          - string
      EmailAddress:
        type:
          - "null"
          - string
      SkypeUserName:
        type:
          - "null"
          - string
      BankAccountDetails:
        type:
          - "null"
          - string
      TaxNumber:
        type:
          - "null"
          - string
      AccountsReceivableTaxType:
        type:
          - "null"
          - string
      AccountsPayableTaxType:
        type:
          - "null"
          - string
      Addresses:
        items:
          $ref: "#/definitions/addresses_schema"
        type:
          - "null"
          - array
      Phones:
        items:
          $ref: "#/definitions/phones_schema"
        type:
          - "null"
          - array
      IsSupplier:
        type:
          - "null"
          - boolean
      IsCustomer:
        type:
          - "null"
          - boolean
      DefaultCurrency:
        type:
          - "null"
          - string
      UpdatedDateUTC:
        format: date-time
        type:
          - "null"
          - string
      ContactPersons:
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - object
          properties:
            FirstName:
              type:
                - "null"
                - string
            LastName:
              type:
                - "null"
                - string
            EmailAddress:
              type:
                - "null"
                - string
            IncludeInEmails:
              type:
                - "null"
                - boolean
          additionalProperties: true
      XeroNetworkKey:
        type:
          - "null"
          - string
      SalesDefaultAccountCode:
        type:
          - "null"
          - string
      PurchasesDefaultAccountCode:
        type:
          - "null"
          - string
      SalesTrackingCategories:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/tracking_categories_schema"
      PurchasesTrackingCategories:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/tracking_categories_schema"
      TrackingCategoryName:
        type:
          - "null"
          - string
      TrackingCategoryOption:
        type:
          - "null"
          - string
      PaymentTerms:
        $ref: "#/definitions/payment_terms_schema"
      ContactGroups:
        items:
          $ref: "#/definitions/contact_groups_schema"
        type:
          - "null"
          - array
      Website:
        type:
          - "null"
          - string
      BrandingTheme:
        $ref: "#/definitions/branding_themes_schema"
      BatchPayments:
        type:
          - "null"
          - object
        properties:
          Details:
            type:
              - "null"
              - string
          Reference:
            type:
              - "null"
              - string
          Code:
            type:
              - "null"
              - string
          BankAccountNumber:
            type:
              - "null"
              - string
          BankAccountName:
            type:
              - "null"
              - string
        additionalProperties: true
      Discount:
        type:
          - "null"
          - number
      Balances:
        type:
          - "null"
          - object
        properties:
          AccountsReceivable:
            type:
              - "null"
              - object
            properties:
              Outstanding:
                type:
                  - "null"
                  - number
              Overdue:
                type:
                  - "null"
                  - number
            additionalProperties: true
          AccountsPayable:
            type:
              - "null"
              - object
            properties:
              Outstanding:
                type:
                  - "null"
                  - number
              Overdue:
                type:
                  - "null"
                  - number
            additionalProperties: true
        additionalProperties: true
      HasAttachments:
        type:
          - "null"
          - boolean
      Attachments:
        $ref: "#/definitions/attachments_schema"
      HasValidationErrors:
        type:
          - "null"
          - boolean
      ValidationErrors:
        $ref: "#/definitions/validation_errors_schema"
    additionalProperties: true

  attachments_schema:
    type:
      - "null"
      - array
    items:
      type:
        - "null"
        - object
      properties: {}
      additionalProperties: true
    additionalProperties: true

  validation_errors_schema:
    type:
      - "null"
      - array
    items:
      type:
        - "null"
        - object
      properties:
        Message:
          type:
            - "null"
            - string
      additionalProperties: true

  credit_notes_schema:
    type: object
    properties:
      Type:
        type:
          - "null"
          - string
      Contact:
        $ref: "#/definitions/contacts_schema"
      Date:
        format: date-time
        type:
          - "null"
          - string
      DueDate:
        format: date-time
        type:
          - "null"
          - string
      DueDateString:
        format: date-time
        type:
          - "null"
          - string
      Status:
        type:
          - "null"
          - string
      LineAmountTypes:
        type:
          - "null"
          - string
      LineItems:
        items:
          $ref: "#/definitions/line_items_schema"
        type:
          - "null"
          - array
      SubTotal:
        type:
          - "null"
          - number
      AppliedAmount:
        type:
          - "null"
          - number
      TotalTax:
        type:
          - "null"
          - number
      Total:
        type:
          - "null"
          - number
      UpdatedDateUTC:
        format: date-time
        type:
          - "null"
          - string
      CurrencyCode:
        type:
          - "null"
          - string
      FullyPaidOnDate:
        format: date-time
        type:
          - "null"
          - string
      CreditNoteID:
        type:
          - string
      CreditNoteNumber:
        type:
          - "null"
          - string
      Reference:
        type:
          - "null"
          - string
      SentToContact:
        type:
          - "null"
          - boolean
      CurrencyRate:
        type:
          - "null"
          - number
      RemainingCredit:
        type:
          - "null"
          - number
      Allocations:
        items:
          $ref: "#/definitions/allocations_schema"
        type:
          - "null"
          - array
      BrandingThemeID:
        type:
          - "null"
          - string
      HasAttachments:
        type:
          - "null"
          - boolean
      DateString:
        format: date-time
        type:
          - "null"
          - string
      ID:
        type:
          - "null"
          - string
    additionalProperties: true

  invoices_schema:
    type: object
    properties:
      Type:
        type:
          - "null"
          - string
      Contact:
        $ref: "#/definitions/contacts_schema"
      Date:
        format: date-time
        type:
          - "null"
          - string
      DueDate:
        format: date-time
        type:
          - "null"
          - string
      Status:
        type:
          - "null"
          - string
      LineAmountTypes:
        type:
          - "null"
          - string
      LineItems:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/line_items_schema"
      SubTotal:
        type:
          - "null"
          - number
      TotalTax:
        type:
          - "null"
          - number
      Total:
        type:
          - "null"
          - number
      TotalDiscount:
        type:
          - "null"
          - number
      UpdatedDateUTC:
        format: date-time
        type:
          - "null"
          - string
      CurrencyCode:
        type:
          - "null"
          - string
      CurrencyRate:
        type:
          - "null"
          - number
      InvoiceID:
        type:
          - string
      InvoiceNumber:
        type:
          - "null"
          - string
      Reference:
        type:
          - "null"
          - string
      BrandingThemeID:
        type:
          - "null"
          - string
      Url:
        type:
          - "null"
          - string
      SentToContact:
        type:
          - "null"
          - boolean
      ExpectedPaymentDate:
        type:
          - "null"
          - string
        format: date-time
      ExpectedPaymentDateString:
        format: date-time
        type:
          - "null"
          - string
      PlannedPaymentDate:
        type:
          - "null"
          - string
        format: date-time
      PlannedPaymentDateString:
        format: date-time
        type:
          - "null"
          - string
      HasAttachments:
        type:
          - "null"
          - boolean
      Payments:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/payments_schema"
      CreditNotes:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/credit_notes_schema"
      Prepayments:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/prepayments_schema"
      Overpayments:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/overpayments_schema"
      AmountDue:
        type:
          - "null"
          - number
      AmountPaid:
        type:
          - "null"
          - number
      FullyPaidOnDate:
        format: date-time
        type:
          - "null"
          - string
      AmountCredited:
        type:
          - "null"
          - number
      DueDateString:
        format: date-time
        type:
          - "null"
          - string
      IsDiscounted:
        type:
          - "null"
          - boolean
      HasErrors:
        type:
          - "null"
          - boolean
      DateString:
        format: date-time
        type:
          - "null"
          - string
    additionalProperties: true

  manual_journals_schema:
    type: object
    properties:
      Date:
        type:
          - "null"
          - string
        format: date-time
      LineAmountTypes:
        type:
          - "null"
          - string
      Status:
        type:
          - "null"
          - string
      Narration:
        type:
          - "null"
          - string
      JournalLines:
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - object
          properties:
            LineAmount:
              type:
                - "null"
                - number
            Description:
              type:
                - "null"
                - string
            TaxAmount:
              type:
                - "null"
                - number
            AccountID:
              type:
                - "null"
                - string
            AccountCode:
              type:
                - "null"
                - string
            IsBlank:
              type:
                - "null"
                - boolean
            TaxType:
              type:
                - "null"
                - string
            Tracking:
              items:
                $ref: "#/definitions/tracking_categories_schema"
              type:
                - "null"
                - array
          additionalProperties: true
      Url:
        type:
          - "null"
          - string
      ShowOnCashBasisReports:
        type:
          - "null"
          - boolean
      HasAttachments:
        type:
          - "null"
          - boolean
      UpdatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
      ManualJournalID:
        type:
          - string
    additionalProperties: true

  overpayments_schema:
    type: object
    properties:
      Type:
        type:
          - "null"
          - string
      Contact:
        $ref: "#/definitions/contacts_schema"
      Date:
        type:
          - "null"
          - string
        format: date-time
      Status:
        type:
          - "null"
          - string
      AppliedAmount:
        type:
          - "null"
          - number
      LineAmountTypes:
        type:
          - "null"
          - string
      LineItems:
        items:
          $ref: "#/definitions/line_items_schema"
        type:
          - "null"
          - array
      SubTotal:
        type:
          - "null"
          - number
      TotalTax:
        type:
          - "null"
          - number
      Total:
        type:
          - "null"
          - number
      UpdatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
      CurrencyCode:
        type:
          - "null"
          - string
      OverpaymentID:
        type:
          - string
      CurrencyRate:
        type:
          - "null"
          - number
      RemainingCredit:
        type:
          - "null"
          - number
      Allocations:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/allocations_schema"
      Payments:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/payments_schema"
      Reference:
        type:
          - "null"
          - string
      HasAttachments:
        type:
          - "null"
          - boolean
      ID:
        type:
          - "null"
          - string
      DateString:
        type:
          - "null"
          - string
        format: date-time
    additionalProperties: true

  prepayments_schema:
    type: object
    properties:
      Type:
        type:
          - "null"
          - string
      ID:
        type:
          - "null"
          - string
      Contact:
        $ref: "#/definitions/contacts_schema"
      Date:
        format: date-time
        type:
          - "null"
          - string
      Status:
        type:
          - "null"
          - string
      LineAmountTypes:
        type:
          - "null"
          - string
      LineItems:
        items:
          $ref: "#/definitions/line_items_schema"
        type:
          - "null"
          - array
      SubTotal:
        type:
          - "null"
          - number
      Total:
        type:
          - "null"
          - number
      UpdatedDateUTC:
        format: date-time
        type:
          - "null"
          - string
      CurrencyCode:
        type:
          - "null"
          - string
      PrepaymentID:
        type:
          - string
      CurrencyRate:
        type:
          - "null"
          - number
      Reference:
        type:
          - "null"
          - string
      RemainingCredit:
        type:
          - "null"
          - number
      AppliedAmount:
        type:
          - "null"
          - number
      Allocations:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/allocations_schema"
      Payments:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/payments_schema"
      HasAttachments:
        type:
          - "null"
          - boolean
      TotalTax:
        type:
          - "null"
          - number
      DateString:
        format: date-time
        type:
          - "null"
          - string
    additionalProperties: true

  allocations_schema:
    type: object
    properties:
      Date:
        type:
          - "null"
          - "string"
        format: "date-time"
      Amount:
        type:
          - "null"
          - "number"
      Invoice:
        $ref: "#/definitions/nested_invoice_schema"
    additionalProperties: true

  purchase_orders_schema:
    type: object
    properties:
      Contact:
        $ref: "#/definitions/contacts_schema"
      Date:
        format: date-time
        type:
          - "null"
          - string
      DeliveryDate:
        format: date-time
        type:
          - "null"
          - string
      LineAmountTypes:
        type:
          - "null"
          - string
      PurchaseOrderNumber:
        type:
          - "null"
          - string
      Reference:
        type:
          - "null"
          - string
      LineItems:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/line_items_schema"
      BrandingThemeID:
        type:
          - "null"
          - string
      CurrencyCode:
        type:
          - "null"
          - string
      Status:
        type:
          - "null"
          - string
      SentToContact:
        type:
          - "null"
          - boolean
      DeliveryAddress:
        type:
          - "null"
          - string
      AttentionTo:
        type:
          - "null"
          - string
      Telephone:
        type:
          - "null"
          - string
      DeliveryInstructions:
        type:
          - "null"
          - string
      ExpectedArrivalDate:
        format: date-time
        type:
          - "null"
          - string
      PurchaseOrderID:
        type:
          - string
      CurrencyRate:
        type:
          - "null"
          - number
      SubTotal:
        type:
          - "null"
          - number
      TotalTax:
        type:
          - "null"
          - number
      Total:
        type:
          - "null"
          - number
      TotalDiscount:
        type:
          - "null"
          - number
      HasAttachments:
        type:
          - "null"
          - boolean
      UpdatedDateUTC:
        format: date-time
        type:
          - "null"
          - string
      DeliveryDateString:
        format: date-time
        type:
          - "null"
          - string
      Type:
        type:
          - "null"
          - string
      DateString:
        format: date-time
        type:
          - "null"
          - string
      HasErrors:
        type:
          - "null"
          - boolean
      IsDiscounted:
        type:
          - "null"
          - boolean
      ExpectedArrivalDateString:
        format: date-time
        type:
          - "null"
          - string
    additionalProperties: true

  accounts_schema:
    type: object
    properties:
      Code:
        type:
          - "null"
          - string
      Name:
        type:
          - "null"
          - string
      Type:
        type:
          - "null"
          - string
      UpdatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
      ReportingCodeName:
        type:
          - "null"
          - string
      SystemAccount:
        type:
          - "null"
          - string
      BankAccountType:
        type:
          - "null"
          - string
      TaxType:
        type:
          - "null"
          - string
      Description:
        type:
          - "null"
          - string
      Class:
        type:
          - "null"
          - string
      AccountID:
        type:
          - string
      BankAccountNumber:
        type:
          - "null"
          - string
      Status:
        type:
          - "null"
          - string
      ShowInExpenseClaims:
        type:
          - "null"
          - boolean
      CurrencyCode:
        type:
          - "null"
          - string
      ReportingCode:
        type:
          - "null"
          - string
      EnablePaymentsToAccount:
        type:
          - "null"
          - boolean
      HasAttachments:
        type:
          - "null"
          - boolean
    additionalProperties: true

  bank_transfers_schema:
    type: object
    properties:
      FromBankAccount:
        $ref: "#/definitions/accounts_schema"
      ToBankAccount:
        $ref: "#/definitions/accounts_schema"
      Amount:
        type:
          - "null"
          - number
      Date:
        type:
          - "null"
          - string
        format: date-time
      DateString:
        type:
          - "null"
          - string
        format: date-time
      BankTransferID:
        type:
          - string
      CurrencyRate:
        type:
          - "null"
          - number
      FromBankTransactionID:
        type:
          - "null"
          - string
      ToBankTransactionID:
        type:
          - "null"
          - string
      HasAttachments:
        type:
          - "null"
          - boolean
      CreatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
      CreatedDateUTCString:
        type:
          - "null"
          - string
        format: date-time
    additionalProperties: true

  employees_schema:
    type: object
    properties:
      Status:
        type:
          - "null"
          - string
      FirstName:
        type:
          - "null"
          - string
      LastName:
        type:
          - "null"
          - string
      ExternalLink:
        type:
          - "null"
          - string
      UpdatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
      EmployeeID:
        type:
          - string
    additionalProperties: true

  items_schema:
    type: object
    properties:
      ItemID:
        type:
          - string
      Code:
        type:
          - "null"
          - string
      Name:
        type:
          - "null"
          - string
      IsSold:
        type:
          - "null"
          - boolean
      IsPurchased:
        type:
          - "null"
          - boolean
      Description:
        type:
          - "null"
          - string
      PurchaseDescription:
        type:
          - "null"
          - string
      PurchaseDetails:
        properties:
          TaxType:
            type:
              - "null"
              - string
          COGSAccountCode:
            type:
              - "null"
              - string
          UnitPrice:
            type:
              - "null"
              - number
          AccountCode:
            type:
              - "null"
              - string
        type:
          - "null"
          - object
        additionalProperties: true
      SalesDetails:
        properties:
          TaxType:
            type:
              - "null"
              - string
          UnitPrice:
            type:
              - "null"
              - number
          AccountCode:
            type:
              - "null"
              - string
        type:
          - "null"
          - object
        additionalProperties: true
      IsTrackedAsInventory:
        type:
          - "null"
          - boolean
      InventoryAssetAccountCode:
        type:
          - "null"
          - string
      TotalCostPool:
        type:
          - "null"
          - number
      QuantityOnHand:
        type:
          - "null"
          - number
      UpdatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
    additionalProperties: true

  nested_invoice_schema:
    type: object
    properties:
      Type:
        type:
          - "null"
          - "string"
      Contact:
        $ref: "#/definitions/contacts_schema"
      Date:
        format: "date-time"
        type:
          - "null"
          - "string"
      DueDate:
        format: "date-time"
        type:
          - "null"
          - "string"
      Status:
        type:
          - "null"
          - "string"
      LineAmountTypes:
        type:
          - "null"
          - "string"
      LineItems:
        type:
          - "null"
          - "array"
        items:
          $ref: "#/definitions/line_items_schema"
      SubTotal:
        type:
          - "null"
          - "number"
      TotalTax:
        type:
          - "null"
          - "number"
      Total:
        type:
          - "null"
          - "number"
      TotalDiscount:
        type:
          - "null"
          - "number"
      UpdatedDateUTC:
        format: "date-time"
        type:
          - "null"
          - "string"
      CurrencyCode:
        type:
          - "null"
          - "string"
      CurrencyRate:
        type:
          - "null"
          - "number"
      InvoiceID:
        type:
          - "string"
      InvoiceNumber:
        type:
          - "null"
          - "string"
      Reference:
        type:
          - "null"
          - "string"
      BrandingThemeID:
        type:
          - "null"
          - "string"
      Url:
        type:
          - "null"
          - "string"
      SentToContact:
        type:
          - "null"
          - "boolean"
      ExpectedPaymentDate:
        type:
          - "null"
          - "string"
        format: "date-time"
      PlannedPaymentDate:
        type:
          - "null"
          - "string"
        format: "date-time"
      HasAttachments:
        type:
          - "null"
          - "boolean"
      AmountDue:
        type:
          - "null"
          - "number"
      AmountPaid:
        type:
          - "null"
          - "number"
      FullyPaidOnDate:
        format: "date-time"
        type:
          - "null"
          - "string"
      AmountCredited:
        type:
          - "null"
          - "number"
      DueDateString:
        format: "date-time"
        type:
          - "null"
          - "string"
      IsDiscounted:
        type:
          - "null"
          - "boolean"
      HasErrors:
        type:
          - "null"
          - "boolean"
      DateString:
        format: "date-time"
        type:
          - "null"
          - "string"
    additionalProperties: true

  payments_schema:
    type: object
    properties:
      Date:
        type:
          - "null"
          - string
        format: date-time
      CurrencyRate:
        type:
          - "null"
          - number
      Amount:
        type:
          - "null"
          - number
      Reference:
        type:
          - "null"
          - string
      IsReconciled:
        type:
          - "null"
          - boolean
      Status:
        type:
          - "null"
          - string
      PaymentType:
        type:
          - "null"
          - string
      UpdatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
      Account:
        $ref: "#/definitions/accounts_schema"
      Invoice:
        $ref: "#/definitions/nested_invoice_schema"
      CreditNote:
        type:
          - "null"
          - object
        properties:
          CreditNoteNumber:
            type:
              - string
        additionalProperties: true
      Prepayments:
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - object
          properties:
            PrepaymentID:
              type:
                - string
          additionalProperties: true
      Overpayment:
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - object
          properties:
            OverpaymentID:
              type:
                - string
          additionalProperties: true
      BankAmount:
        type:
          - "null"
          - number
      HasValidationErrors:
        type:
          - "null"
          - boolean
      PaymentID:
        type:
          - string
      HasAccount:
        type:
          - "null"
          - boolean
      BatchPaymentID:
        type:
          - "null"
          - string
    additionalProperties: true

  users_schema:
    type: object
    properties:
      UserID:
        type:
          - string
      EmailAddress:
        type:
          - "null"
          - string
      FirstName:
        type:
          - "null"
          - string
      LastName:
        type:
          - "null"
          - string
      UpdatedDateUTC:
        format: date-time
        type:
          - "null"
          - string
      IsSubscriber:
        type:
          - "null"
          - boolean
      OrganisationRole:
        type:
          - "null"
          - string
      ValidationErrors:
        $ref: "#/definitions/validation_errors_schema"
    additionalProperties: true

  branding_themes_schema:
    type: object
    properties:
      CreatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
      SortOrder:
        type:
          - "null"
          - integer
      Name:
        type:
          - "null"
          - string
      BrandingThemeID:
        type:
          - string
    additionalProperties: true

  contact_groups_schema:
    type: object
    properties:
      Status:
        type:
          - "null"
          - string
      Name:
        type:
          - "null"
          - string
      ContactGroupID:
        type:
          - string
      HasValidationErrors:
        type:
          - "null"
          - boolean
    additionalProperties: true

  currencies_schema:
    type: object
    properties:
      Description:
        type:
          - "null"
          - string
      Code:
        type:
          - string
    additionalProperties: true

  organisations_schema:
    type: object
    properties:
      APIKey:
        type:
          - "null"
          - string
      Name:
        type:
          - "null"
          - string
      LegalName:
        type:
          - "null"
          - string
      PaysTax:
        type:
          - "null"
          - boolean
      Version:
        type:
          - "null"
          - string
      OrganisationType:
        type:
          - "null"
          - string
      BaseCurrency:
        type:
          - "null"
          - string
      CountryCode:
        type:
          - "null"
          - string
      IsDemoCompany:
        type:
          - "null"
          - boolean
      OrganisationStatus:
        type:
          - "null"
          - string
      RegistrationNumber:
        type:
          - "null"
          - string
      TaxNumber:
        type:
          - "null"
          - string
      FinancialYearEndDay:
        type:
          - "null"
          - integer
      FinancialYearEndMonth:
        type:
          - "null"
          - integer
      SalesTaxBasis:
        type:
          - "null"
          - string
      SalesTaxPeriod:
        type:
          - "null"
          - string
      DefaultSalesTax:
        type:
          - "null"
          - string
      DefaultPurchasesTax:
        type:
          - "null"
          - string
      PeriodLockDate:
        type:
          - "null"
          - string
        format: date-time
      EndOfYearLockDate:
        type:
          - "null"
          - string
        format: date-time
      CreatedDateUTC:
        type:
          - "null"
          - string
        format: date-time
      Timezone:
        type:
          - "null"
          - string
      OrganisationEntityType:
        type:
          - "null"
          - string
      ShortCode:
        type:
          - "null"
          - string
      OrganisationID:
        type:
          - string
      LineOfBusiness:
        type:
          - "null"
          - string
      Addresses:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/addresses_schema"
      Phones:
        type:
          - "null"
          - array
        items:
          $ref: "#/definitions/phones_schema"
      ExternalLinks:
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - object
          properties:
            LinkType:
              type:
                - "null"
                - string
            Url:
              type:
                - "null"
                - string
          additionalProperties: true
      PaymentTerms:
        $ref: "#/definitions/payment_terms_schema"
    additionalProperties: true

  repeating_invoices_schema:
    type: object
    properties:
      Type:
        type:
          - "null"
          - string
      Contact:
        $ref: "#/definitions/contacts_schema"
      Schedule:
        type:
          - "null"
          - object
        properties:
          Unit:
            type:
              - "null"
              - string
          DueDateType:
            type:
              - "null"
              - string
          StartDate:
            type:
              - "null"
              - string
            format: date-time
          DueDate:
            type:
              - "null"
              - integer
          EndDate:
            type:
              - "null"
              - string
          NextScheduledDate:
            type:
              - "null"
              - string
            format: date-time
          Period:
            type:
              - "null"
              - integer
        additionalProperties: true
      LineItems:
        items:
          $ref: "#/definitions/line_items_schema"
        type:
          - "null"
          - array
      LineAmountTypes:
        type:
          - "null"
          - string
      Reference:
        type:
          - "null"
          - string
      BrandingThemeID:
        type:
          - "null"
          - string
      CurrencyCode:
        type:
          - "null"
          - string
      Status:
        type:
          - "null"
          - string
      SubTotal:
        type:
          - "null"
          - number
      TotalTax:
        type:
          - "null"
          - number
      TotalDiscount:
        type:
          - "null"
          - number
      Total:
        type:
          - "null"
          - number
      RepeatingInvoiceID:
        type:
          - string
      HasAttachments:
        type:
          - "null"
          - boolean
      ID:
        type:
          - "null"
          - string
    additionalProperties: true

  tax_rates_schema:
    type: object
    properties:
      Name:
        type:
          - "null"
          - string
      TaxType:
        type:
          - string
      TaxComponents:
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - object
          properties:
            Name:
              type:
                - "null"
                - string
            IsCompound:
              type:
                - "null"
                - boolean
            IsNonRecoverable:
              type:
                - "null"
                - boolean
            Rate:
              type:
                - "null"
                - number
          additionalProperties: true
      Status:
        type:
          - "null"
          - string
      ReportTaxType:
        type:
          - "null"
          - string
      CanApplyToAssets:
        type:
          - "null"
          - boolean
      CanApplyToEquity:
        type:
          - "null"
          - boolean
      CanApplyToExpenses:
        type:
          - "null"
          - boolean
      CanApplyToLiabilities:
        type:
          - "null"
          - boolean
      CanApplyToRevenue:
        type:
          - "null"
          - boolean
      DisplayTaxRate:
        type:
          - "null"
          - number
      EffectiveRate:
        type:
          - "null"
          - number
    additionalProperties: true

  tracking_categories_schema:
    type: object
    properties:
      Status:
        type:
          - "null"
          - "string"
      TrackingCategoryID:
        type:
          - "string"
      Option:
        type:
          - "null"
          - "string"
      TrackingCategoryName:
        type:
          - "null"
          - "string"
      TrackingOptionID:
        type:
          - "null"
          - "string"
      TrackingOptionName:
        type:
          - "null"
          - "string"
      Options:
        items:
          type:
            - "null"
            - "object"
          properties:
            IsActive:
              type:
                - "null"
                - "boolean"
            IsDeleted:
              type:
                - "null"
                - "boolean"
            TrackingOptionID:
              type:
                - "null"
                - "string"
            IsArchived:
              type:
                - "null"
                - "boolean"
            Status:
              type:
                - "null"
                - "string"
            Name:
              type:
                - "null"
                - "string"
            HasValidationErrors:
              type:
                - "null"
                - "boolean"
          additionalProperties: true
        type:
          - "null"
          - "array"
      Name:
        type:
          - "null"
          - "string"
    additionalProperties: true

streams:
  - "#/definitions/bank_transactions_stream"
  - "#/definitions/contacts_stream"
  - "#/definitions/credit_notes_stream"
  - "#/definitions/invoices_stream"
  - "#/definitions/manual_journals_stream"
  - "#/definitions/overpayments_stream"
  - "#/definitions/prepayments_stream"
  - "#/definitions/purchase_orders_stream"
  - "#/definitions/accounts_stream"
  - "#/definitions/bank_transfers_stream"
  - "#/definitions/employees_stream"
  - "#/definitions/items_stream"
  - "#/definitions/payments_stream"
  - "#/definitions/users_stream"
  - "#/definitions/branding_themes_stream"
  - "#/definitions/contact_groups_stream"
  - "#/definitions/currencies_stream"
  - "#/definitions/organisations_stream"
  - "#/definitions/repeating_invoices_stream"
  - "#/definitions/tax_rates_stream"
  - "#/definitions/tracking_categories_stream"

check:
  type: CheckStream
  stream_names:
    - "bank_transactions"

spec:
  type: Spec
  documentation_url: https://docs.airbyte.io/integrations/sources/xero
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    title: Xero Spec
    type: object
    required:
      - credentials
      - tenant_id
      - start_date
    additionalProperties: true
    properties:
      credentials:
        title: Authentication Method
        type: object
        oneOf:
          - type: object
            title: OAuth Custom Connection
            required:
              - auth_type
              - client_id
              - client_secret
            properties:
              auth_type:
                type: string
                title: Authentication Method
                const: oauth2_confidential_application
                order: 0
              client_id:
                title: Client ID
                description: >-
                  Your Xero application's Client ID.
                type: string
                examples:
                  - "Client_ID"
              client_secret:
                title: Client Secret
                description: >-
                  Your Xero application's Client Secret.
                type: string
                examples:
                  - "Client_Secret"
                airbyte_secret: true
          - type: object
            title: Bearer Access Token
            required:
              - access_token
              - auth_type
            properties:
              auth_type:
                type: string
                title: Authentication Method
                const: oauth2_access_token
                examples:
                  - "access_token"
                order: 0
              access_token:
                title: Access Token
                description: >-
                  The access token used to call the Xero API.
                type: string
                airbyte_secret: true
      tenant_id:
        title: Tenant ID
        type: string
        description: "Enter your Xero organization's Tenant ID"
        airbyte_secret: true
        order: 1
      start_date:
        type: string
        title: Start Date
        pattern: "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z$"
        description: "UTC date and time in the format YYYY-MM-DDTHH:mm:ssZ. Any data with created_at before this date will not be synced."
        examples:
          - "2022-03-01T00:00:00Z"
        format: "date-time"
        order: 2
