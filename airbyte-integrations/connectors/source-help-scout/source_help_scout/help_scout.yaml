version: 0.1.0
type: DeclarativeSource
check:
  type: CheckStream
  stream_names: []
streams:
  - type: DeclarativeStream
    name: Conversations
    primary_key: &ref_0
      - id
    retriever:
      type: SimpleRetriever
      name: Conversations
      primary_key: *ref_0
      requester:
        type: HttpRequester
        name: Conversations
        url_base: https://api.helpscout.net/v2
        path: conversations
        request_options_provider:
          request_parameters:
            mailbox: '{{ config[''mailbox''] }}'
            embed: '{{ config[''embed''] }}'
            folder: '{{ config[''folders''] }}'
            status: '{{ config[''status''] }}'
            tag: '{{ config[''tags''] }}'
            assigned_to: '{{ config[''assigned_to''] }}'
            modifiedSince: '{{ config[''modifiedsince''] }}'
            number: '{{ config[''number''] }}'
            sortField: '{{ config[''sortfield''] }}'
            sortOrder: '{{ config[''sortorder''] }}'
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - conversations
      paginator:
        type: DefaultPaginator
        page_token_option:
          inject_into: request_parameter
          field_name: page
          type: RequestOption
        pagination_strategy:
          type: PageIncrement
          page_size: 25
          start_from_page: 1
        url_base: https://api.helpscout.net/v2
  - type: DeclarativeStream
    name: Mailboxes
    primary_key: &ref_1
      - id
    retriever:
      type: SimpleRetriever
      name: Mailboxes
      primary_key: *ref_1
      requester:
        type: HttpRequester
        name: Mailboxes
        url_base: https://api.helpscout.net/v2
        path: mailboxes
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - mailboxes
      paginator:
        type: DefaultPaginator
        page_token_option:
          inject_into: request_parameter
          field_name: page
          type: RequestOption
        pagination_strategy:
          type: PageIncrement
          page_size: 50
          start_from_page: 1
        url_base: https://api.helpscout.net/v2
  - type: DeclarativeStream
    name: Properties
    primary_key: &ref_2 []
    retriever:
      type: SimpleRetriever
      name: Properties
      primary_key: *ref_2
      requester:
        type: HttpRequester
        name: Properties
        url_base: https://api.helpscout.net/v2
        path: customer-properties
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer: []
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Ratings
    primary_key: &ref_3
      - id
    retriever:
      type: SimpleRetriever
      name: Ratings
      primary_key: *ref_3
      requester:
        type: HttpRequester
        name: Ratings
        url_base: https://api.helpscout.net/v2
        path: ratings/{{ config['ratingid'] }}
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - ratings
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Conversation Threads
    primary_key: &ref_4
      - id
    retriever:
      type: SimpleRetriever
      name: Conversation Threads
      primary_key: *ref_4
      requester:
        type: HttpRequester
        name: Conversation Threads
        url_base: https://api.helpscout.net/v2
        path: conversations/{{ config['conversationid'] }}/threads
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - threads
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Customers
    primary_key: &ref_5
      - id
    retriever:
      type: SimpleRetriever
      name: Customers
      primary_key: *ref_5
      requester:
        type: HttpRequester
        name: Customers
        url_base: https://api.helpscout.net/v2
        path: customers
        request_options_provider:
          request_parameters:
            mailbox: '{{ config[''mailbox''] }}'
            firstName: '{{ config[''firstname''] }}'
            lastName: '{{ config[''lastname''] }}'
            modifiedSince: '{{ config[''modifiedsince''] }}'
            sortField: '{{ config[''sortfield''] }}'
            sortOrder: '{{ config[''sortorder''] }}'
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - customers
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Mailbox Fields
    primary_key: &ref_6
      - id
    retriever:
      type: SimpleRetriever
      name: Mailbox Fields
      primary_key: *ref_6
      requester:
        type: HttpRequester
        name: Mailbox Fields
        url_base: https://api.helpscout.net/v2
        path: mailboxes/{{ config['mailbox'] }}/fields
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - fields
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Mailbox Folders
    primary_key: &ref_7
      - id
    retriever:
      type: SimpleRetriever
      name: Mailbox Folders
      primary_key: *ref_7
      requester:
        type: HttpRequester
        name: Mailbox Folders
        url_base: https://api.helpscout.net/v2
        path: mailboxes/{{ config['mailbox'] }}/folders
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - folders
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Users
    primary_key: &ref_8
      - id
    retriever:
      type: SimpleRetriever
      name: Users
      primary_key: *ref_8
      requester:
        type: HttpRequester
        name: Users
        url_base: https://api.helpscout.net/v2
        path: users
        request_options_provider:
          request_parameters:
            email: '{{ config[''email''] }}'
            mailbox: '{{ config[''mailbox''] }}'
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - users
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Workflows
    primary_key: &ref_9
      - id
    retriever:
      type: SimpleRetriever
      name: Workflows
      primary_key: *ref_9
      requester:
        type: HttpRequester
        name: Workflows
        url_base: https://api.helpscout.net/v2
        path: workflows
        request_options_provider:
          request_parameters:
            mailboxId: '{{ config[''mailbox''] }}'
            type: '{{ config[''type''] }}'
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - workflows
      paginator:
        type: DefaultPaginator
        page_token_option:
          type: RequestOption
          inject_into: request_parameter
          field_name: page
        pagination_strategy:
          type: PageIncrement
          page_size: 50
          start_from_page: 1
        url_base: https://api.helpscout.net/v2
spec:
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    type: object
    required:
      - client_id
      - client_secret
      - refresh_token
    properties:
      mailboxes:
        title: mailboxes
        type: string
        description: >-
          Filters conversations from a specific mailbox id. Use comma separated
          values for more mailboxes
      embed:
        title: embed
        description: ' Allows embedding/loading of sub-entities, allowed values are: threads'
        type: string
        enum:
          - threads
      folders:
        title: folders
        description: Filters conversations from a specific folder id
        type: number
      status:
        title: status
        description: Filter conversation by status
        placeholder: all
        type: string
      tags:
        title: tags
        description: Filter conversation by tags. Use comma separated values for more tags.
        type: string
      assigned_to:
        title: assigned_to
        description: Filters conversations by assignee id
        type: number
      modifiedsince:
        description: Filters conversations modified after this timestamp
        title: modifiedSince
        type: string
      number:
        title: number
        description: Looks up conversation by conversation number
        type: number
      sortfield:
        title: sortField
        description: Sorts the result by specified field
        type: string
      sortorder:
        title: sortOrder
        enum:
          - asc
          - desc
        default: desc
        description: Sort order
        type: string
      conversationid:
        title: conversationID
        description: Numeric ID of the conversation
        type: number
      ratingid:
        title: ratingId
        type: number
      mailbox:
        title: mailbox
        description: Filters customers from a specific mailbox
        type: number
      firstname:
        title: firstName
        description: Filters customers by first name
        type: string
      lastname:
        title: lastName
        description: Filters customers by last name
        type: string
      email:
        title: email
        description: Optional filter param for looking up users by email using exact match.
        type: string
      type:
        title: type
        enum:
          - manual
          - automatic
        description: List workflows by type - manual or automatic
        type: string
      client_id:
        type: string
        title: Client ID
        airbyte_secret: true
      client_secret:
        type: string
        title: Client secret
        airbyte_secret: true
      refresh_token:
        type: string
        title: Refresh token
        airbyte_secret: true
    additionalProperties: true
  documentation_url: ''
  type: Spec
