version: 0.1.0
type: DeclarativeSource
check:
  type: CheckStream
  stream_names: []
streams:
  - type: DeclarativeStream
    name: Conversations
    primary_key: &ref_0
      - id
    retriever:
      type: SimpleRetriever
      name: Conversations
      primary_key: *ref_0
      requester:
        type: HttpRequester
        name: Conversations
        url_base: https://api.helpscout.net/v2
        path: conversations
        request_options_provider:
          request_parameters:
            mailbox: '{{ config[''mailbox''] }}'
            embed: '{{ config[''embed''] }}'
            folder: '{{ config[''folders''] }}'
            status: '{{ config[''status''] }}'
            tag: '{{ config[''tags''] }}'
            assigned_to: '{{ config[''assigned_to''] }}'
            modifiedSince: '{{ config[''modifiedsince''] }}'
            number: '{{ config[''number''] }}'
            sortField: '{{ config[''sortfield''] }}'
            sortOrder: '{{ config[''sortorder''] }}'
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - conversations
      paginator:
        type: DefaultPaginator
        page_token_option:
          inject_into: request_parameter
          field_name: page
          type: RequestOption
        pagination_strategy:
          type: PageIncrement
          page_size: 25
          start_from_page: 1
        url_base: https://api.helpscout.net/v2
  - type: DeclarativeStream
    name: Mailboxes
    primary_key: &ref_1
      - id
    retriever:
      type: SimpleRetriever
      name: Mailboxes
      primary_key: *ref_1
      requester:
        type: HttpRequester
        name: Mailboxes
        url_base: https://api.helpscout.net/v2
        path: mailboxes
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer:
            - _embedded
            - mailboxes
      paginator:
        type: DefaultPaginator
        page_token_option:
          inject_into: request_parameter
          field_name: page
          type: RequestOption
        pagination_strategy:
          type: PageIncrement
          page_size: 50
          start_from_page: 1
        url_base: https://api.helpscout.net/v2
  - type: DeclarativeStream
    name: Properties
    primary_key: &ref_2 []
    retriever:
      type: SimpleRetriever
      name: Properties
      primary_key: *ref_2
      requester:
        type: HttpRequester
        name: Properties
        url_base: https://api.helpscout.net/v2
        path: customer-properties
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer: []
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Ratings
    primary_key: &ref_3 []
    retriever:
      type: SimpleRetriever
      name: Ratings
      primary_key: *ref_3
      requester:
        type: HttpRequester
        name: Ratings
        url_base: https://api.helpscout.net/v2
        path: ratings/{{ config['ratingid'] }}
        request_options_provider:
          request_parameters: {}
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer: []
      paginator:
        type: NoPagination
  - type: DeclarativeStream
    name: Reports
    primary_key: &ref_4 []
    retriever:
      type: SimpleRetriever
      name: Reports
      primary_key: *ref_4
      requester:
        type: HttpRequester
        name: Reports
        url_base: https://api.helpscout.net/v2
        path: reports/{{ config['reporttype'] }}/{{ config['subreporttype'] }}
        request_options_provider:
          request_parameters:
            start: '{{ config[''start''] }}'
            end: '{{ config[''end''] }}'
            previousStart: '{{ config[''previousstart''] }}'
            previousEnd: '{{ config[''previousend''] }}'
            mailboxes: '{{ config[''mailboxes''] }}'
            tags: '{{ config[''tags''] }}'
            folders: '{{ config[''folders''] }}'
            types: '{{ config[''types''] }}'
            sites: '{{ config[''sites''] }}'
            officeHours: '{{ config[''officehours''] }}'
          request_headers: {}
          request_body_json: {}
        authenticator:
          type: OAuthAuthenticator
          client_id: '{{ config[''client_id''] }}'
          client_secret: '{{ config[''client_secret''] }}'
          refresh_token: '{{ config[''client_refresh_token''] }}'
          refresh_request_body: {}
          token_refresh_endpoint: https://api.helpscout.net/v2/oauth2/token
          grant_type: client_credentials
      record_selector:
        type: RecordSelector
        extractor:
          type: DpathExtractor
          field_pointer: []
      paginator:
        type: NoPagination
spec:
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    type: object
    required:
      - client_id
      - client_secret
      - refresh_token
    properties:
      mailboxes:
        title: mailboxes
        type: string
        description: >-
          Filters conversations from a specific mailbox id. Use comma separated
          values for more mailboxes
      embed:
        title: embed
        description: ' Allows embedding/loading of sub-entities, allowed values are: threads'
        type: string
        enum:
          - threads
      folders:
        title: folders
        description: Filters conversations from a specific folder id
        type: number
      status:
        title: status
        description: Filter conversation by status
        placeholder: all
        type: string
      tags:
        title: tags
        description: Filter conversation by tags. Use comma separated values for more tags.
        type: string
      assigned_to:
        title: assigned_to
        description: Filters conversations by assignee id
        type: number
      modifiedsince:
        description: Filters conversations modified after this timestamp
        title: modifiedSince
        type: string
      number:
        title: number
        description: Looks up conversation by conversation number
        type: number
      sortfield:
        title: sortField
        description: Sorts the result by specified field
        enum:
          - createdAt
          - customerEmail
          - customerName
          - mailboxid
          - modifiedAt
          - number
          - score
          - status
          - subject
          - waitingSince
        type: string
      sortorder:
        title: sortOrder
        enum:
          - asc
          - desc
        default: desc
        description: Sort order
        type: string
      conversationid:
        title: conversationID
        description: Numeric ID of the conversation
        type: number
      ratingid:
        title: ratingId
        type: number
      reporttype:
        title: reportType
        description: The type of the overall report you want to retrieve
        placeholder: company
        type: string
      start:
        title: start
        description: Start of the interval
        placeholder: '2019-05-02T12:00:00Z'
        type: string
      end:
        title: end
        placeholder: '2019-06-02T12:00:00Z'
        description: End of the interval
        type: string
      previousstart:
        title: previousStart
        description: Start of the previous interval
        placeholder: '2019-04-02T12:00:00Z'
        type: string
      previousend:
        title: previousEnd
        description: End of the previous interval
        placeholder: '2019-05-02T12:00:00Z'
        type: string
      types:
        enum:
          - email
          - chat
          - phone
        title: types
        description: List of comma separated conversation types to filter on
        type: string
      sites:
        description: List of comma separated docs site IDs
        title: sites
        type: string
      officehours:
        title: officeHours
        type: boolean
        description: >-
          Whether to take office hours into consideration in the report
          (defaults to false); office hours must be enabled if true is passed,
          otherwise the default of false will be used
      subreporttype:
        title: subReportType
        type: string
      client_id:
        type: string
        title: Client ID
        airbyte_secret: true
      client_secret:
        type: string
        title: Client secret
        airbyte_secret: true
      refresh_token:
        type: string
        title: Refresh token
        airbyte_secret: true
    additionalProperties: true
  documentation_url: ''
  type: Spec
