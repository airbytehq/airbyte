plugins {
    id 'airbyte-python'
    id 'airbyte-docker'
}

airbytePython {
    moduleDirectory 'airbyte_protocol'
}

task generateProtocolClassFilesWithoutLicense(type: Exec) {
    environment 'ROOT_DIR', rootDir.absolutePath
    commandLine 'bin/generate-protocol-files.sh'
    dependsOn ':tools:code-generator:airbyteDocker'
}

task generateProtocolClassFiles(dependsOn: [generateProtocolClassFilesWithoutLicense])
blackFormat.dependsOn generateProtocolClassFilesWithoutLicense
isortFormat.dependsOn generateProtocolClassFilesWithoutLicense
flakeCheck.dependsOn generateProtocolClassFilesWithoutLicense
installReqs.dependsOn generateProtocolClassFilesWithoutLicense
