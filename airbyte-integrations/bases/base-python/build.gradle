apply from: rootProject.file('tools/gradle/commons/integrations/image.gradle')

task generateProtocolClassFiles(type: Exec) {
    workingDir '.'
    commandLine 'bin/generate-protocol-files.sh'
    dependsOn ':airbyte-integrations:base-python:code-generator:buildImage'
    outputs.upToDateWhen { false }
}

build.dependsOn generateProtocolClassFiles
buildImage.dependsOn generateProtocolClassFiles
buildImage.dependsOn ':airbyte-integrations:base:buildImage'
