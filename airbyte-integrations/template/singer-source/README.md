### Create an Airbyte Source from a Singer Tap
1. If you are trying to create an Airbyte Source from scratch (not using a Singer Tap), you should follow [this guide](https://github.com/airbytehq/airbyte/blob/master/airbyte-integrations/template/python-source/README.md) instead.
1. Copy the template into a directory with your integration name. `cp -r airbyte-integrations/template/singer-source airbyte-integrations/singer/SOURCENAME`.
1. ```
   mv airbyte-integrations/singer/SOURCENAME/template_singer_source airbyte-integrations/singer/SOURCENAME/SOURCENAME_singer_source
   ``` 
1. Update the name, description, and dependencies in `setup.py`
    1. Your Singer Tap's package should be added as a dependency.
    1. Note that all of your dependencies should go in `setup.py`, NOT `requirements.txt`. The requirements file is only used to connect internal Airbyte dependencies for local development.
1. Update the `Dockerfile` to point `CODE_PATH` and `AIRBYTE_IMPL_MODULE` at `SOURCENAME_singer_source`
1. Edit the classname in `SOURCENAME_singer_source/source.py` and update the `Dockerfile` to point `AIRBYTE_IMPL_PATH` to that classname. 
1. Update the `io.airbyte.name` label in the `Dockerfile` to `airbyte/source-SOURCENAME-singer`
1. Define a specification for the configuration when connecting to the source by modifying `SOURCENAME_singer_source/spec.json`.
    1. This spec uses JsonSchema to define properties and validations.
    1. Ultimately, configurations that match this schema will be generated by the Airbyte UI and passed to your integration as input. You can also manually generate config files and pass them to the integration CLI.
1. `SOURCENAME_singer_source/source.py` is where you actually implement your integration.
    1. `check` should check if a connection can be established to a source given a config that matches your specification.
    1. `discover_cmd` returns a command string we will execute to retrieve a Singer catalog.
        1. Behind the scenes, we convert this Singer catalog to an `AirbyteCatalog`. 
        1. In some cases, your Singer Tap might not implement discover. In this case, you will have to add functionality to create your own catalog.
    1. `read_cmd` will write messages to stdout. 
        1. The command to specify is typically the same as the sync from a Singer Tap.
        1. Usually this command needs to be computed from the config file and optionally the state.
1. We highly recommend creating tests for your integration. 
    1. Since some tests may require external APIs, you may need to give instructions on how to set up a testing instance for CI testing.
1. Update `README.md` to document the usage of your integration. 
    1. We recommend including sample configs and catalogs in the `sample_files` directory or within your `README.md`.
1. Add your source to the source registry in `airbyte-config/init`.

Please reach out in a GitHub Issue or Slack if you run into any issues developing a source. We're happy to help!

# Python Singer Airbyte Source Development

Prepare development environment:
```
cd airbyte-integrations/template/singer-source

# create & activate virtualenv using python 3.7
python3.7 -m venv build/venv
source build/venv/bin/activate

# install necessary dependencies
pip install -r requirements.txt
```

Test locally:
```
python main_dev.py spec
python main_dev.py check --config sample_files/test_config.json
python main_dev.py discover --config sample_files/test_config.json
python main_dev.py read --config sample_files/test_config.json --catalog sample_files/test_catalog.json
```

Test image:
```
# in airbyte root directory
./gradlew :airbyte-integrations:template:singer-source:buildImage
docker run --rm -v $(pwd)/airbyte-integrations/template/singer-source/sample_files:/sample_files airbyte/source-template-python:dev spec
docker run --rm -v $(pwd)/airbyte-integrations/template/singer-source/sample_files:/sample_files airbyte/source-template-python:dev check --config /sample_files/test_config.json
docker run --rm -v $(pwd)/airbyte-integrations/template/singer-source/sample_files:/sample_files airbyte/source-template-python:dev discover --config /sample_files/test_config.json
docker run --rm -v $(pwd)/airbyte-integrations/template/singer-source/sample_files:/sample_files airbyte/source-template-python:dev read --config /sample_files/test_config.json --catalog /sample_files/test_catalog.json
```
