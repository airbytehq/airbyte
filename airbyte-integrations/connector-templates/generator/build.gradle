plugins {
    id "base"
    id "com.github.node-gradle.node" version "2.2.4"
}

node {
    download = true
    version = "14.11.0"
}

assemble.dependsOn(npmInstall)

task generateSourcePythonScaffold(type: Exec) {
    def outputDir = 'airbyte-integrations/connectors/source-scaffold-source-python'

    inputs.files rootProject.fileTree('airbyte-integrations/connector-templates/source-python')

    workingDir rootDir

    commandLine './tools/connectors/manage.sh', 'scaffold', 'source-python', 'scaffold-source-python'

    outputs.dir rootProject.file(outputDir)
}
