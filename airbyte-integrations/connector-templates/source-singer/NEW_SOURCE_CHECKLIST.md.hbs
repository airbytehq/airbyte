# New Singer source checklist

This is an autogenerated file describing the steps needed to implement a new Airbyte source based on a Singer Tap.

1. Include the Singer Tap you'd like to build this Source on top by including it in `setup.py` as a dependency.
1. First, build the module by running the following from the `airbyte` project root directory:
   ```
   ./gradlew :airbyte-integrations:connectors:source-{{dashCase name}}-singer:build
   ```
1. Define the specification for this source connector by modifying `source_{{snakeCase name}}_singer/spec.json`.
   A specification is a JSON file which uses JSONSchema to declare all the inputs needed for your integration to function
   correctly. For example, if you were configuring a Postgres source, your specification might declare that you need a
   `username` field which a string, a `password` field which is a string, a `host_url` which is a URI-formatted string,
   and a `port` which is a `number`. The Airbyte UI will generate configurations that match the specification (by asking
   the user to input them) and pass those configs to your source connector as input when it is being run.
   You can also manually generate config files and pass them to the integration CLI.
1. Implement your integration by editing `source_{{snakeCase name}}_singer/source.py` (and creating additional files as necessary).
    1. Implement the `Source` interface. For more information see the docstrings in `Source` and any parent classes.
    1. All logging should be done through the `logger` object passed into each method. Otherwise, logs will not be shown
    in the Airbyte UI.
1. Update the `sample_files` directory with an example config and catalog (discover output).
1. Create tests for your integration.
    1. Unit tests: Unit tests go in the `unit_tests` folder.
    1. Integration tests: Integration tests go in the `integration_tests` folder. Any tests that require external APIs or resources, you may need to give instructions on how to set up a testing instance/account for Airbyte's CI.
        1. However, for initial local development, you can place any sensitive credentials inside the `secrets/config.json` file -- this is gitignored by default.
    1. Standard tests: These are a bank of tests that all sources need to pass. We have pre-written them for you, all you need to do is provide this test suite with the proper inputs. These tests will be re-run as part of the CI on the master branch.
        1. Supplying inputs: In the generated code, you'll find `integration_tests/standard_source_test.py`. You need to implement each method. The template provides comments explaining what each method does. These tests will have access to any files in the `secrets` and `integration_tests` directories, as well as the directory that contains `source.py`.
            1. Note: each method is called by the tests from a separate process, so no instance variables can be stored or accessed from one method to another.
            1. If your source supports incremental syncing, then make sure that the catalog that is returned in the get_catalog method is configured for incremental syncing (e.g. include cursor fields, etc).
        1. Running the tests: You can run these tests with the following command `./gradlew :airbyte-integrations:connectors:source-{{dashCase name}}:standardSourceTestPython`.
        1. Reading the tests: If you'd like to take a look at the implementation of these tests they can be found in `airbyte-integrations/bases/standard-source-test/src/main/java/io/airbyte/integrations/standardtest/source/TestSource.java`. The tests are written in java, but Airbyte handles translating the inputs from your python implementation of `standard_source_test.py` to what the tests need. You do not need to worry about writing anything in java!
1. Update `README.md` to document the usage of your integration. If API credentials are required to run the integration, please document how they can be obtained or link to a how-to guide.
    1. For Airybte core contributors, make sure to add the secret to RPass under the secret name as listed in `README.md`.
1. So far, all we've done is create the integration. Now let's make it available for use from the Airbyte UI and API! Add your source to the source
   definition registry. In `airbyte-config/init/src/main/resources/seed/source_definitions.yaml` add an entry for the new source. Make sure to generate a new _unique_ UUIDv4 for the `sourceDefinitionId` field. You can get one [here](https://www.uuidgenerator.net/). Follow the example of the other entries in the index. Include a unique `name` as well as the `dockerRepository` and `dockerImageTag` for the connectors docker image. Also include a link to the documentation in the `documentationUrl` field. Running `./gradlew :airbyte-config:init:build` will generate the necessary configuration to insert the new connector in the UI.
1. To be able to run the integration tests for this connector in CI, add your config.json to the Airbyte repo Github secrets. If you are unable to provide
   your own credentials (e.g: they're for your personal or employer's account), create an issue in the Airbyte Github repo with directions on how the
   Airbyte team can create credentials and run them against your integration.
1. Once the config is stored in Github Secrets, edit `.github/workflows/gradle.yaml` to inject the config into the build environment.
1. Edit the `airbyte/tools/bin/ci_credentials.sh` script to pull the script from the build environment and write it to `secrets/config.json` during the build.\
1. From the `airbyte` project root, run `./gradlew build` to make sure your module builds within the rest of the monorepo. Commit any changes, such as styling changes.
    1. Create a PR against the Airbyte repo with your changes.

Once you've done all the above, delete this file :)
