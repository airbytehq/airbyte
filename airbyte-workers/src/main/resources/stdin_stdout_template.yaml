apiVersion: v1
kind: Pod
metadata:
  name: airbyte-worker-JOBID-ATTEMPTID-SUFFIX
spec:
  restartPolicy: Never
  initContainers:
    - name: init
      image: busybox:1.28
      command: [ 'sh', '-c', "mkfifo /pipes/stdin && mkfifo /pipes/stdout" ]
      volumeMounts:
        - name: airbyte-pipes
          mountPath: /pipes
  containers:
    - name: worker
      image: IMAGE
      workingDir: WORKDIR
      command: [ 'sh', '-c', "cat /pipes/stdin | COMMAND > /pipes/stdout" ]
      args: ARGS
      volumeMounts:
#        - name: airbyte-volume-workspace
#          mountPath: /workspace
        - name: airbyte-pipes
          mountPath: /pipes
  volumes:
#    - name: airbyte-volume-workspace
#      persistentVolumeClaim:
#        claimName: airbyte-volume-workspace
    - name: airbyte-pipes
      emptyDir: {}
