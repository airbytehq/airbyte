---
id: create-agents-discovery-source-definition-id
title: "Create Discovery Agent"
description: "Trigger discovery job for a specific source definition."
sidebar_label: "Create Discovery Agent"
hide_title: true
hide_table_of_contents: true
api: eJztWNtyGzcS/ZUuPGySqiGpi+XLvCm2U6vU7tplKclWiSqpiemZgY0BJgCGEpc1/77VmAtJi8zGLmef9CSR7HufBtBnLQIWXqTX4rwgEzxM4I3y0i7JrcRNIjLy0qk6KGtEKq6cKgpykA0i8NEuILcOEHxNUuVKgreNkwQZ5cooVpzOzdxclcoDmay2ygS4V1qnc3M8hV/JqXzF+p1aoKrWGAjuVShhLkZXE+QA5wICFkAPygcfPQc2/Mjn3JxM4Q1pCgRoVp2CMgVIDKhtAcGytiRwNBl9zM3pFC5lSVmjCRAM3e/mupUJLjR51naNMWx5I8hhdRF5CCUGMETZ6LmpMwzkY1XOXeHTuQGAXuF2k8KtylK4KulxcnDxhuN3jdl1yhY/UGicGYyOvYzdfe0IA30gX1vj+wojeGUKTbGTMgpk0Q4qT4OZv19dvX/7ICniAJ4dPUvh8rN2GRsgt43JwLr4IWBRUHawjSIRtiaHbPEiE6nofN/Gn/3tKH+7ry4iEZ5k41RYifR6LTi+HwkdOZFe37Q3iajRYUWBnI8CBisSqThgSzG2awylSISj3xvlKBNpcA0lwsuSKhTpWoRVHW0Ep0whEpFbV2EQqWiaaCWooFmgr8ybrXZlom2TMQo0xgYMNHj+veFh23ado/b7fC+s1YRGfD6Xv5UUSnIMisE4hJJGdGyjj9sdfxy+6TV4iLn20XiOjQ5jHENm50Pg7V8awFapHibWFWjUfyJOJptulYQZuT9VtIMN203hkjTJEAO7t+4TB7ntewr/Ikneo1vxxEiCxpPzINHAgrQ18UipGh1UrWlH1U+30PHvybvtjBga/9dIeDhcfwJ4rtLJ0RH/+SyERrKLvNEwHBciEdKawA1K1wLrWisZjc4+etZZb1W+djzbQXUePtqFv+2PFv6sAlV+rxiP4xdM2s92AV0B9w72N5jZwYBdfCQZduB2PQR8wPvNxvruKfyzXbzui7FxgM7hajc1D6PY/w5kU+CDfndPf9G2bPbZvu7/iBmwffLh67teMUQLimpm9S6P5/BuP3jQ+29Mo3XE5hD7P3v1NhHknHX+D5CTK9LZ1zr6KSq3ybcO+Fba7KuNvWUL8Jot7Gv+eCDXKkr+AZDedsXbOtSvb/6MyUc4OX2Mk5+sW6gsI/OEkieURJScnDxGyS+mdjZeWAtNQCbwq+0JME+AaRNxtu/6uTCBnEENntySHMS8nxDzhJgImYpCaXlhrG18nsS9LRUzrNVseTzr9sfZuD/O1vteZ23cIBld3X7YOM1LRQh1OptpK1GXnfVdZJ4rt1gFgktr0MH5+4tYq2EVZeKg6oCwvZCOxWXzol9Q4jbXCXBSyuQ2So7vUYMMed9UFbrVxvV3nt2Co+AULclDhgHB8su/RJ2DzWFlGwey8cFWvBagySAnyjyowItB/DlWScm4X+Ta3scVZTdXJjooOuO5Q2U8nAJn4tnJwOQwQzCBu6H6VC0oyyi7S1liwovJJEfJKwxbChak1XG7kY4yjgE1MyFbJjynfpdCxw5Yt3EVORsKsuySzp2tRi/dVwPp8j3WysPfIHNqSf6HjoQIJSnHyeSqaOJGeigEZQIVHTXh71JAreMytj+iCg0WNNrt9yymUC4CKGaIpK0qMhllLN7RZKtoMLda23suTrfOgjLRWWwRo2V4hXOV7+7uVljpuXm0QaY7O953Hni5iQoxBubagIxvHHVsFLt2qijDjh7H2njKOjqvT3nwz5FJ9NSFFguuPCBU3HDHgDiwb87NRUQkWKNXUOKSwJpdoYSBGYPsTwYuUwzUGkrAMrFwrzz1nIHWnXCOSk/n/PTkKe4wezR9NT0SiXiYaFvEgdoMtk9nM5mZae1sNr2nhVeBJrnS5KfSVrPnR2d0dLyQJ2f5Czp+hS9P6MWzFy9fzp6fnp7h6asMX8pXzxf44uzs5GhxfPb89h+2sFO/LOIA82FUYbyHeuqiW7c2DBycj+zK1pitN7faE7v6xK5+Q3a1v3QCPYRZrVEZvpvjOKz7O/NaYK14fo5FIrp7k+E50v+JSA8xG/F2TK/Fer1AT7843bb8dcdk8oWaqfjc39ByB1H/jbnLvWl/otUu77pE3bBYvL+X6BQH+4WBf/+hp2B+gEN+h6eQWW37HOLZW9z2pk0GdvPL4vmrCczDhd3H0m4qnKx7sXPJGN/67dErnrsxvu/ev7u8YmA2jNUNBd49mpLhn63n7G6Z1+tO4sp+ItO2Y9UDf+Yyt+1/AanTetE=
sidebar_class_name: "post api-method"
info_path: embedded-api///sonar
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create Discovery Agent"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/v1/agents/discovery/{source_definition_id}"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Trigger discovery job for a specific source definition.

This endpoint will:
1. Verify a source template with "discovery-agent" tag exists for this source definition
2. Delete any existing catalog to force re-discovery
3. Schedule a new discovery job

This enables re-running discovery for sources that need catalog updates.

Args:
    source_definition_id: The source definition ID to run discovery for

Returns:
    DiscoveryAgentCreateResponse with a single job created

Raises:
    HTTPException 404: Source template not found or not tagged with "discovery-agent"

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"source_definition_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Source Definition Id"}},{"name":"annotate","in":"query","required":false,"schema":{"type":"boolean","description":"Whether to annotate the discovered catalog using the catalog annotator agent","default":false,"title":"Annotate"},"description":"Whether to annotate the discovered catalog using the catalog annotator agent"},{"name":"x-organization-id","in":"header","required":false,"schema":{"type":"string","format":"uuid","description":"Select the working organization. Necessary since users can belong to multiple organizations.","title":"X-Organization-Id"},"description":"Select the working organization. Necessary since users can belong to multiple organizations."}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"properties":{"jobs_created":{"items":{"properties":{"job_id":{"type":"string","format":"uuid","title":"Job Id"},"source_definition_id":{"type":"string","format":"uuid","title":"Source Definition Id"}},"type":"object","required":["job_id","source_definition_id"],"title":"DiscoveryAgentJobCreated"},"type":"array","title":"Jobs Created"}},"type":"object","required":["jobs_created"],"title":"DiscoveryAgentCreateResponse"}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"properties":{"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"errors":{"items":{"properties":{"field":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Field"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"}},"type":"object","title":"ApiError"},"type":"array","title":"Errors","default":[]}},"type":"object","title":"ApiErrorResponse"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"properties":{"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"errors":{"items":{"properties":{"field":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Field"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"}},"type":"object","title":"ApiError"},"type":"array","title":"Errors","default":[]}},"type":"object","title":"ApiErrorResponse"}}}},"422":{"description":"Unprocessable entity","content":{"application/json":{"schema":{"properties":{"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"errors":{"items":{"properties":{"field":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Field"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"}},"type":"object","title":"ApiError"},"type":"array","title":"Errors","default":[]}},"type":"object","title":"ApiErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"properties":{"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"errors":{"items":{"properties":{"field":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Field"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"}},"type":"object","title":"ApiError"},"type":"array","title":"Errors","default":[]}},"type":"object","title":"ApiErrorResponse"}}}}}}
>
  
</StatusCodes>


      